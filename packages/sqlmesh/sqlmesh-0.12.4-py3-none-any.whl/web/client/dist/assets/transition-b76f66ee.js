import{r as i,R as b}from"./index-3144ef62.js";import{b as D,s as C,h as fe,T as ve,l as _,i as me,u as y,S as pe,D as J,y as Z,v as R,j as ee,o as S,w as he,c as ge,d as L,X as te,C as re}from"./keyboard-896332ff.js";function ne(){let[e]=i.useState(D);return i.useEffect(()=>()=>e.dispose(),[e]),e}function G(e,t,r){let n=C(t);i.useEffect(()=>{function s(d){n.current(d)}return document.addEventListener(e,s,r),()=>document.removeEventListener(e,s,r)},[e,r])}function Be(e,t,r=!0){let n=i.useRef(!1);i.useEffect(()=>{requestAnimationFrame(()=>{n.current=r})},[r]);function s(a,f){if(!n.current||a.defaultPrevented)return;let o=function c(v){return typeof v=="function"?c(v()):Array.isArray(v)||v instanceof Set?v:[v]}(e),l=f(a);if(l!==null&&l.getRootNode().contains(l)){for(let c of o){if(c===null)continue;let v=c instanceof HTMLElement?c:c.current;if(v!=null&&v.contains(l)||a.composed&&a.composedPath().includes(v))return}return!fe(l,ve.Loose)&&l.tabIndex!==-1&&a.preventDefault(),t(a,l)}}let d=i.useRef(null);G("mousedown",a=>{var f,o;n.current&&(d.current=((o=(f=a.composedPath)==null?void 0:f.call(a))==null?void 0:o[0])||a.target)},!0),G("click",a=>{d.current&&(s(a,()=>d.current),d.current=null)},!0),G("blur",a=>s(a,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Ee(e,t,r){let n=C(t);i.useEffect(()=>{function s(d){n.current(d)}return window.addEventListener(e,s,r),()=>window.removeEventListener(e,s,r)},[e,r])}var be=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(be||{});function je(){let e=i.useRef(0);return Ee("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function Q(){let e=i.useRef(!1);return _(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Ie(...e){return i.useMemo(()=>me(...e),[...e])}function Ue(e,t,r,n){let s=C(r);i.useEffect(()=>{e=e??window;function d(a){s.current(a)}return e.addEventListener(t,d,n),()=>e.removeEventListener(t,d,n)},[e,t,n])}function we(e=0){let[t,r]=i.useState(e),n=Q(),s=i.useCallback(o=>{n.current&&r(l=>l|o)},[t,n]),d=i.useCallback(o=>!!(t&o),[t]),a=i.useCallback(o=>{n.current&&r(l=>l&~o)},[r,n]),f=i.useCallback(o=>{n.current&&r(l=>l^o)},[r]);return{flags:t,addFlag:s,hasFlag:d,removeFlag:a,toggleFlag:f}}function Te(e){let t={called:!1};return(...r)=>{if(!t.called)return t.called=!0,e(...r)}}function K(e,...t){e&&t.length>0&&e.classList.add(...t)}function V(e,...t){e&&t.length>0&&e.classList.remove(...t)}function Fe(e,t){let r=D();if(!e)return r.dispose;let{transitionDuration:n,transitionDelay:s}=getComputedStyle(e),[d,a]=[n,s].map(o=>{let[l=0]=o.split(",").filter(Boolean).map(c=>c.includes("ms")?parseFloat(c):parseFloat(c)*1e3).sort((c,v)=>v-c);return l}),f=d+a;if(f!==0){r.group(l=>{l.setTimeout(()=>{t(),l.dispose()},f),l.addEventListener(e,"transitionrun",c=>{c.target===c.currentTarget&&l.dispose()})});let o=r.addEventListener(e,"transitionend",l=>{l.target===l.currentTarget&&(t(),o())})}else t();return r.add(()=>t()),r.dispose}function Le(e,t,r,n){let s=r?"enter":"leave",d=D(),a=n!==void 0?Te(n):()=>{};s==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let f=y(s,{enter:()=>t.enter,leave:()=>t.leave}),o=y(s,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),l=y(s,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return V(e,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),K(e,...f,...l),d.nextFrame(()=>{V(e,...l),K(e,...o),Fe(e,()=>(V(e,...f),K(e,...t.entered),a()))}),d.dispose}function ye({container:e,direction:t,classes:r,onStart:n,onStop:s}){let d=Q(),a=ne(),f=C(t);_(()=>{let o=D();a.add(o.dispose);let l=e.current;if(l&&f.current!=="idle"&&d.current)return o.dispose(),n.current(f.current),o.add(Le(l,r.current,f.current==="enter",()=>{o.dispose(),s.current(f.current)})),o.dispose},[t])}function $(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let A=i.createContext(null);A.displayName="TransitionContext";var Re=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Re||{});function Ce(){let e=i.useContext(A);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function $e(){let e=i.useContext(O);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let O=i.createContext(null);O.displayName="NestingContext";function M(e){return"children"in e?M(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function ie(e,t){let r=C(e),n=i.useRef([]),s=Q(),d=ne(),a=S((p,u=R.Hidden)=>{let h=n.current.findIndex(({el:m})=>m===p);h!==-1&&(y(u,{[R.Unmount](){n.current.splice(h,1)},[R.Hidden](){n.current[h].state="hidden"}}),d.microTask(()=>{var m;!M(n)&&s.current&&((m=r.current)==null||m.call(r))}))}),f=S(p=>{let u=n.current.find(({el:h})=>h===p);return u?u.state!=="visible"&&(u.state="visible"):n.current.push({el:p,state:"visible"}),()=>a(p,R.Unmount)}),o=i.useRef([]),l=i.useRef(Promise.resolve()),c=i.useRef({enter:[],leave:[],idle:[]}),v=S((p,u,h)=>{o.current.splice(0),t&&(t.chains.current[u]=t.chains.current[u].filter(([m])=>m!==p)),t==null||t.chains.current[u].push([p,new Promise(m=>{o.current.push(m)})]),t==null||t.chains.current[u].push([p,new Promise(m=>{Promise.all(c.current[u].map(([g,E])=>E)).then(()=>m())})]),u==="enter"?l.current=l.current.then(()=>t==null?void 0:t.wait.current).then(()=>h(u)):h(u)}),w=S((p,u,h)=>{Promise.all(c.current[u].splice(0).map(([m,g])=>g)).then(()=>{var m;(m=o.current.shift())==null||m()}).then(()=>h(u))});return i.useMemo(()=>({children:n,register:f,unregister:a,onStart:v,onStop:w,wait:l,chains:c}),[f,a,n,v,w,c,l])}function Se(){}let xe=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function Y(e){var t;let r={};for(let n of xe)r[n]=(t=e[n])!=null?t:Se;return r}function Pe(e){let t=i.useRef(Y(e));return i.useEffect(()=>{t.current=Y(e)},[e]),t}let ke="div",le=pe.RenderStrategy;function He(e,t){let{beforeEnter:r,afterEnter:n,beforeLeave:s,afterLeave:d,enter:a,enterFrom:f,enterTo:o,entered:l,leave:c,leaveFrom:v,leaveTo:w,...p}=e,u=i.useRef(null),h=Z(u,t),m=p.unmount?R.Unmount:R.Hidden,{show:g,appear:E,initial:ae}=Ce(),[T,B]=i.useState(g?"visible":"hidden"),W=$e(),{register:P,unregister:k}=W,j=i.useRef(null);i.useEffect(()=>P(u),[P,u]),i.useEffect(()=>{if(m===R.Hidden&&u.current){if(g&&T!=="visible"){B("visible");return}return y(T,{hidden:()=>k(u),visible:()=>P(u)})}},[T,u,P,k,g,m]);let I=C({enter:$(a),enterFrom:$(f),enterTo:$(o),entered:$(l),leave:$(c),leaveFrom:$(v),leaveTo:$(w)}),H=Pe({beforeEnter:r,afterEnter:n,beforeLeave:s,afterLeave:d}),U=ee();i.useEffect(()=>{if(U&&T==="visible"&&u.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[u,T,U]);let q=ae&&!E,oe=(()=>!U||q||j.current===g?"idle":g?"enter":"leave")(),x=we(0),se=S(F=>y(F,{enter:()=>{x.addFlag(L.Opening),H.current.beforeEnter()},leave:()=>{x.addFlag(L.Closing),H.current.beforeLeave()},idle:()=>{}})),ce=S(F=>y(F,{enter:()=>{x.removeFlag(L.Opening),H.current.afterEnter()},leave:()=>{x.removeFlag(L.Closing),H.current.afterLeave()},idle:()=>{}})),N=ie(()=>{B("hidden"),k(u)},W);ye({container:u,classes:I,direction:oe,onStart:C(F=>{N.onStart(u,F,se)}),onStop:C(F=>{N.onStop(u,F,ce),F==="leave"&&!M(N)&&(B("hidden"),k(u))})}),i.useEffect(()=>{q&&(m===R.Hidden?j.current=null:j.current=g)},[g,q,T]);let z=p,de={ref:h};return E&&g&&(z={...z,className:he(p.className,...I.current.enter,...I.current.enterFrom)}),b.createElement(O.Provider,{value:N},b.createElement(ge,{value:y(T,{visible:L.Open,hidden:L.Closed})|x.flags},te({ourProps:de,theirProps:z,defaultTag:ke,features:le,visible:T==="visible",name:"Transition.Child"})))}function Ne(e,t){let{show:r,appear:n=!1,unmount:s,...d}=e,a=i.useRef(null),f=Z(a,t);ee();let o=re();if(r===void 0&&o!==null&&(r=(o&L.Open)===L.Open),![!0,!1].includes(r))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[l,c]=i.useState(r?"visible":"hidden"),v=ie(()=>{c("hidden")}),[w,p]=i.useState(!0),u=i.useRef([r]);_(()=>{w!==!1&&u.current[u.current.length-1]!==r&&(u.current.push(r),p(!1))},[u,r]);let h=i.useMemo(()=>({show:r,appear:n,initial:w}),[r,n,w]);i.useEffect(()=>{if(r)c("visible");else if(!M(v))c("hidden");else{let g=a.current;if(!g)return;let E=g.getBoundingClientRect();E.x===0&&E.y===0&&E.width===0&&E.height===0&&c("hidden")}},[r,v]);let m={unmount:s};return b.createElement(O.Provider,{value:v},b.createElement(A.Provider,{value:h},te({ourProps:{...m,as:i.Fragment,children:b.createElement(ue,{ref:f,...m,...d})},theirProps:{},defaultTag:i.Fragment,features:le,visible:l==="visible",name:"Transition"})))}function De(e,t){let r=i.useContext(A)!==null,n=re()!==null;return b.createElement(b.Fragment,null,!r&&n?b.createElement(X,{ref:t,...e}):b.createElement(ue,{ref:t,...e}))}let X=J(Ne),ue=J(He),Ae=J(De),qe=Object.assign(X,{Child:Ae,Root:X});export{Ue as E,Be as L,je as a,we as c,Q as f,Ie as n,ne as p,be as s,qe as t};
