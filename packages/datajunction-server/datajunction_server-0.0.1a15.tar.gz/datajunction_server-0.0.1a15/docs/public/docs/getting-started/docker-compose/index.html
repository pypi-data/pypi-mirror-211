<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Docker Compose # DataJunction Demo Docker Compose Setup # The easiest way to try out DJ is to use the dj-demo docker compose setup. This setup will launch and connect a DJ server, a DJRS server, and a jupyter lab instance with a few example notebooks.
Clone the DJ demo repository along with the DJ and DJQS repositories.
git clone git@github.com:DataJunction/dj-demo.git git clone git@github.com:DataJunction/dj.git git clone git@github.com:DataJunction/djqs.git Change into the dj-demo/ directory and start the docker compose environment.">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="" />
<meta property="og:description" content="Docker Compose # DataJunction Demo Docker Compose Setup # The easiest way to try out DJ is to use the dj-demo docker compose setup. This setup will launch and connect a DJ server, a DJRS server, and a jupyter lab instance with a few example notebooks.
Clone the DJ demo repository along with the DJ and DJQS repositories.
git clone git@github.com:DataJunction/dj-demo.git git clone git@github.com:DataJunction/dj.git git clone git@github.com:DataJunction/djqs.git Change into the dj-demo/ directory and start the docker compose environment." />
<meta property="og:type" content="article" />
<meta property="og:url" content="--cleanDestinationDir/docs/getting-started/docker-compose/" /><meta property="article:section" content="docs" />


<title>Docker Compose | DataJunction</title>
<link rel="manifest" href="/--cleanDestinationDir/manifest.json">
<link rel="icon" href="/--cleanDestinationDir/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/--cleanDestinationDir/book.min.25238d768e1f627f906826dba6a7c2574c9bf20c014e26e2b8d8dc2f922e2739.css" >
  <script defer src="/--cleanDestinationDir/flexsearch.min.js"></script>
  <script defer src="/--cleanDestinationDir/en.search.min.843ae58feb62abb2371e90127ba8ca121e7f14fd1ce7d67e7571be181e588fb2.js" ></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script
  type="text/javascript"
  src="https://unpkg.com/@excalidraw/excalidraw/dist/excalidraw.production.min.js"
></script>
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="--cleanDestinationDir/"><img src="/--cleanDestinationDir/dj-logo.png" alt="Logo" /><span>DataJunction</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<a href="/versions" style="color: #ff7900; font-size: 0.8rem">Other Versions</a>












  



  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Getting Started</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/getting-started/docker-compose/" class="active">Docker Compose</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-2b8d7e68acacf0de5c4f58935c86c1d2" class="toggle"  />
    <label for="section-2b8d7e68acacf0de5c4f58935c86c1d2" class="flex justify-between">
      <a role="button" class="">Creating Nodes</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/getting-started/creating-nodes/sources/" class="">Sources</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/getting-started/creating-nodes/transforms/" class="">Transforms</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/getting-started/creating-nodes/dimensions/" class="">Dimensions</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/getting-started/creating-nodes/metrics/" class="">Metrics</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/getting-started/creating-nodes/cubes/" class="">Cubes</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/getting-started/listing-nodes/" class="">Listing Nodes</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/getting-started/requesting-sql/" class="">Requesting SQL</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/getting-started/requesting-data/" class="">Requesting Data</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>DJ Concepts</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/dj-concepts/nodes/" class="">Nodes</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/dj-concepts/the-dj-dag/" class="">The DJ DAG</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/dj-concepts/dimension-discovery/" class="">Dimension Discovery</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/dj-concepts/node-dependencies/" class="">Node Dependencies</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/dj-concepts/dag-impact-analysis/" class="">DAG Impact Analysis</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/dj-concepts/materialization/" class="">Materialization</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/dj-concepts/table-reflection/" class="">Table Reflection</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <input type="checkbox" id="section-5e8b12c271b2b367e7ed1fc38b0a98c3" class="toggle"  />
    <label for="section-5e8b12c271b2b367e7ed1fc38b0a98c3" class="flex justify-between">
      <a role="button" class="">Deploying DJ</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/deploying-dj/the-components-of-a-dj-deployment/" class="">The Components of a DJ Deployment</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/deploying-dj/running-a-dj-server/" class="">Running a DJ Server</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/deploying-dj/materialization-service/" class="">Materialization Service</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/deploying-dj/query-service/" class="">Query Service</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/deploying-dj/reflection-service/" class="">Reflection Service</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/deploying-dj/running-dj-on-kubernetes/" class="">Running DJ on Kubernetes</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <input type="checkbox" id="section-46cdd03a513e8b21f7b96d28d8d84c3d" class="toggle"  />
    <label for="section-46cdd03a513e8b21f7b96d28d8d84c3d" class="flex justify-between">
      <a role="button" class="">Tutorials</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/tutorials/analyzing-a-b-tests/" class="">Analyzing A/B Tests</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/tutorials/publishing-draft-nodes/" class="">Publishing Draft Nodes</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/tutorials/debugging-invalid-nodes/" class="">Debugging Invalid Nodes</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/tutorials/improving-performance-using-materialization/" class="">Improving Performance Using Materialization</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/tutorials/connecting-superset-to-dj/" class="">Connecting Superset to DJ</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <input type="checkbox" id="section-12aad16aea37bbd376260baf2d0199b2" class="toggle"  />
    <label for="section-12aad16aea37bbd376260baf2d0199b2" class="flex justify-between">
      <a role="button" class="">Developers</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/developers/the-datajunction-api-specification/" class="">The Datajunction API Specification</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/developers/codebase-overview/" class="">Codebase Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/developers/api-routes/" class="">API Routes</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/developers/djs-sql-ast/" class="">DJ&#39;s SQL AST</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/developers/djs-sql-parser/" class="">DJ&#39;s SQL Parser</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/developers/how-metric-requests-are-converted-to-sql/" class="">How Metric Requests are Converted to SQL</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/developers/functions/" class="">Functions</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/developers/testing/" class="">Testing</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/developers/opening-and-reviewing-prs/" class="">Opening and Reviewing PR&#39;s</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/developers/versioning/" class="">Versioning</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/developers/openapi/" class="">OpenAPI</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/developers/docs-development/" class="">Docs Development</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="--cleanDestinationDir/docs/developers/publishing-to-pypi/" class="">Publishing to Pypi</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/--cleanDestinationDir/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Docker Compose</strong>

  <label for="toc-control">
    
    <img src="/--cleanDestinationDir/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#datajunction-demo-docker-compose-setup">DataJunction Demo Docker Compose Setup</a></li>
    <li><a href="#starting-individual-dj-services">Starting Individual DJ Services</a>
      <ul>
        <li><a href="#datajunction---docker-compose">DataJunction - Docker Compose</a></li>
        <li><a href="#datajunction-query-service---docker-compose">DataJunction Query Service - Docker Compose</a></li>
        <li><a href="#example-notebooks">Example Notebooks</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="docker-compose">
  Docker Compose
  <a class="anchor" href="#docker-compose">#</a>
</h1>
<h2 id="datajunction-demo-docker-compose-setup">
  DataJunction Demo Docker Compose Setup
  <a class="anchor" href="#datajunction-demo-docker-compose-setup">#</a>
</h2>
<p>The easiest way to try out DJ is to use the <a href="https://github.com/DataJunction/dj-demo">dj-demo</a> docker compose setup. This setup will launch and connect
a DJ server, a DJRS server, and a jupyter lab instance with a few example notebooks.</p>
<p>Clone the DJ demo repository along with the DJ and DJQS repositories.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git clone git@github.com:DataJunction/dj-demo.git
</span></span><span style="display:flex;"><span>git clone git@github.com:DataJunction/dj.git
</span></span><span style="display:flex;"><span>git clone git@github.com:DataJunction/djqs.git
</span></span></code></pre></div><p>Change into the <code>dj-demo/</code> directory and start the docker compose environment.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>cd dj-demo
</span></span><span style="display:flex;"><span>docker compose up
</span></span></code></pre></div><p>A jupyter lab instance is now available at <a href="http://localhost:8888/lab">localhost:8888/lab</a> and contains examples in the <code>notebooks/</code>
directory, such as <code>Modeling the Roads Example Database.ipynb</code>.</p>
<h2 id="starting-individual-dj-services">
  Starting Individual DJ Services
  <a class="anchor" href="#starting-individual-dj-services">#</a>
</h2>
<p>As an alternative to the DJ demo, you can start one or more of the individual services separately and configure them to connect to one another or to other
existing instances. One example of why you may do this is if you&rsquo;re only interested in the SQL generating capabilities, in which case you only need to launch
the main DJ service.</p>
<h3 id="datajunction---docker-compose">
  DataJunction - Docker Compose
  <a class="anchor" href="#datajunction---docker-compose">#</a>
</h3>
<p>To start a DJ instance, clone the DJ repository.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git clone git@github.com:DataJunction/dj.git
</span></span></code></pre></div><p>Start the docker compose environment.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>docker compose up
</span></span></code></pre></div><p>A DJ server is now available and the API docs can be found at <a href="http://localhost:8000/docs">localhost:8000</a>. You can
ping the <code>/health/</code> endpoint to ensure the server is up.</p>




<div class="book-tabs"><input type="radio" class="toggle" name="tabs-1" id="tabs-1-0" checked="checked" />
  <label for="tabs-1-0">curl</label>
  <div class="book-tabs-content markdown-inner"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>curl <span style="color:#e6db74">&#34;http://localhost:8000/health/&#34;</span> | jq
</span></span></code></pre></div><p><em>response</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;database&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;ok&#34;</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div></div></div>

<h3 id="datajunction-query-service---docker-compose">
  DataJunction Query Service - Docker Compose
  <a class="anchor" href="#datajunction-query-service---docker-compose">#</a>
</h3>
<p>By setting <code>QUERY_SERVICE</code> in a DJ instance&rsquo;s configuration, you can connect it to a DJQS instance. Queries generated by the DJ instance
will then be executed by the DJQS instance.</p>
<p>To start a DJQS instance, first clone the DJQS repository.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git clone git@github.com:DataJunction/djqs.git
</span></span></code></pre></div><p>Start the docker compose environment.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>docker compose up
</span></span></code></pre></div><p>A DJQS server is now available and the API docs can be found at <a href="http://localhost:8001/docs">localhost:8001</a>.</p>
<p><blockquote class="book-hint warning">
  You only need to launch DJQS if you want to both generate SQL queries <strong>and</strong> execute them to retrieve data. Generating SQL queries is possible by only launching DJ.
</blockquote>

<blockquote class="book-hint info">
  Although it&rsquo;s interesting to check out the API docs for DJQS, you don&rsquo;t need to call the DJQS API directly&ndash;DJ will call DJQS on your behalf. You can see in the <a href="https://github.com/DataJunction/dj/blob/main/.docker-env/.env#L6">.env</a> file that the local DJ setup is by default configured to connect to a local DJQS instance running on port 8001.
</blockquote>
</p>
<h3 id="example-notebooks">
  Example Notebooks
  <a class="anchor" href="#example-notebooks">#</a>
</h3>
<p>The DJ repository includes notebooks that each contain examples of different ways you can use a DJ server. Once you have DJ running, you can launch a python notebook server
to try them out. If you already have a remote DJ server running, you can connect the example notebooks to it simply by changing the <code>DJ_HOST</code>, <code>DJ_PORT</code> and <code>DJ_PROTOCOL</code>
variables at the top of each notebook.</p>
<p>Clone the DJ demo repository.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>git clone git@github.com:DataJunction/dj-demo.git
</span></span></code></pre></div><p>Install jupyter lab.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>pip install jupyterlab
</span></span></code></pre></div><p>Change into the notebooks directory and start a jupyter server.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>cd notebooks
</span></span><span style="display:flex;"><span>jupyter lab
</span></span></code></pre></div></article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#datajunction-demo-docker-compose-setup">DataJunction Demo Docker Compose Setup</a></li>
    <li><a href="#starting-individual-dj-services">Starting Individual DJ Services</a>
      <ul>
        <li><a href="#datajunction---docker-compose">DataJunction - Docker Compose</a></li>
        <li><a href="#datajunction-query-service---docker-compose">DataJunction Query Service - Docker Compose</a></li>
        <li><a href="#example-notebooks">Example Notebooks</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












