{"version":3,"file":"chunks/app_components_charts_areaChart_tsx-app_components_charts_chartZoom_tsx-app_components_charts-8b96c2.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/components/charts/areaChart.tsx","webpack:///./app/components/charts/series/areaSeries.tsx","webpack:///./app/components/charts/components/dataZoomSlider.tsx","webpack:///./app/components/charts/chartZoom.tsx","webpack:///./app/components/charts/components/dataZoomInside.tsx","webpack:///./app/components/charts/components/toolBox.tsx","webpack:///./app/components/charts/lineChart.tsx","webpack:///./app/components/gridEditable/sortLink.tsx"],"sourcesContent":["import type {LineSeriesOption} from 'echarts';\n\nimport {Series} from 'sentry/types/echarts';\n\nimport AreaSeries from './series/areaSeries';\nimport BaseChart from './baseChart';\n\ntype ChartProps = Omit<React.ComponentProps<typeof BaseChart>, 'css'>;\n\nexport type AreaChartSeries = Series & Omit<LineSeriesOption, 'data' | 'name'>;\n\nexport interface AreaChartProps extends Omit<ChartProps, 'series'> {\n  series: AreaChartSeries[];\n  additionalSeries?: LineSeriesOption[];\n  stacked?: boolean;\n}\n\nexport function AreaChart({series, stacked, colors, ...props}: AreaChartProps) {\n  return (\n    <BaseChart\n      {...props}\n      data-test-id=\"area-chart\"\n      colors={colors}\n      series={series.map(({seriesName, data, ...otherSeriesProps}, i) =>\n        AreaSeries({\n          stack: stacked ? 'area' : undefined,\n          name: seriesName,\n          data: data.map(({name, value}) => [name, value]),\n          lineStyle: {\n            color: colors?.[i],\n            opacity: 1,\n            width: 0.4,\n          },\n          areaStyle: {\n            color: colors?.[i],\n            opacity: 1.0,\n          },\n          animation: false,\n          animationThreshold: 1,\n          animationDuration: 0,\n          ...otherSeriesProps,\n        })\n      )}\n    />\n  );\n}\n","import type {LineSeriesOption} from 'echarts';\n\nimport LineSeries from 'sentry/components/charts/series/lineSeries';\n\nexport default function AreaSeries(props: LineSeriesOption = {}): LineSeriesOption {\n  return LineSeries({\n    ...props,\n  });\n}\n","import 'echarts/lib/component/dataZoomSlider';\n\nimport type {SliderDataZoomComponentOption} from 'echarts';\n\nconst DEFAULT: SliderDataZoomComponentOption = {\n  realtime: false,\n  showDetail: false,\n  left: 0,\n  right: 6,\n  bottom: 8,\n};\n\nexport default function DataZoomSlider(\n  props: SliderDataZoomComponentOption | SliderDataZoomComponentOption[]\n): SliderDataZoomComponentOption[] {\n  // `props` can be boolean, if so return default\n  if (!props || !Array.isArray(props)) {\n    const dataZoom = {\n      ...DEFAULT,\n      ...props,\n    };\n    return [dataZoom];\n  }\n\n  return props;\n}\n","import {Component} from 'react';\nimport {InjectedRouter} from 'react-router';\nimport type {\n  DataZoomComponentOption,\n  InsideDataZoomComponentOption,\n  ToolboxComponentOption,\n  XAXisComponentOption,\n} from 'echarts';\nimport moment from 'moment';\nimport * as qs from 'query-string';\n\nimport {updateDateTime} from 'sentry/actionCreators/pageFilters';\nimport DataZoomInside from 'sentry/components/charts/components/dataZoomInside';\nimport DataZoomSlider from 'sentry/components/charts/components/dataZoomSlider';\nimport ToolBox from 'sentry/components/charts/components/toolBox';\nimport {DateString} from 'sentry/types';\nimport {\n  EChartChartReadyHandler,\n  EChartDataZoomHandler,\n  EChartFinishedHandler,\n  EChartRestoreHandler,\n} from 'sentry/types/echarts';\nimport {callIfFunction} from 'sentry/utils/callIfFunction';\nimport {getUtcDateString, getUtcToLocalDateObject} from 'sentry/utils/dates';\n\nconst getDate = date =>\n  date ? moment.utc(date).format(moment.HTML5_FMT.DATETIME_LOCAL_SECONDS) : null;\n\ntype Period = {\n  end: DateString;\n  period: string | null;\n  start: DateString;\n};\n\nconst ZoomPropKeys = [\n  'period',\n  'xAxis',\n  'onChartReady',\n  'onDataZoom',\n  'onRestore',\n  'onFinished',\n] as const;\n\nexport type ZoomRenderProps = Pick<Props, (typeof ZoomPropKeys)[number]> & {\n  dataZoom?: DataZoomComponentOption[];\n  end?: Date;\n  isGroupedByDate?: boolean;\n  showTimeInTooltip?: boolean;\n  start?: Date;\n  toolBox?: ToolboxComponentOption;\n  utc?: boolean;\n};\n\ntype Props = {\n  children: (props: ZoomRenderProps) => React.ReactNode;\n  chartZoomOptions?: DataZoomComponentOption;\n  disabled?: boolean;\n  end?: DateString;\n  onChartReady?: EChartChartReadyHandler;\n  onDataZoom?: EChartDataZoomHandler;\n  onFinished?: EChartFinishedHandler;\n  onRestore?: EChartRestoreHandler;\n  onZoom?: (period: Period) => void;\n  period?: string | null;\n  router?: InjectedRouter;\n  showSlider?: boolean;\n  start?: DateString;\n  usePageDate?: boolean;\n  utc?: boolean | null;\n  xAxis?: XAXisComponentOption;\n  xAxisIndex?: number | number[];\n};\n\n/**\n * This is a very opinionated component that takes a render prop through `children`. It\n * will provide props to be passed to `BaseChart` to enable support of zooming without\n * eCharts' clunky zoom toolboxes.\n *\n * This also is very tightly coupled with the Global Selection Header. We can make it more\n * generic if need be in the future.\n */\nclass ChartZoom extends Component<Props> {\n  constructor(props: Props) {\n    super(props);\n\n    // Zoom history\n    this.history = [];\n\n    // Initialize current period instance state for zoom history\n    this.saveCurrentPeriod(props);\n  }\n\n  componentDidUpdate() {\n    if (this.props.disabled) {\n      return;\n    }\n\n    // When component updates, make sure we sync current period state\n    // for use in zoom history\n    this.saveCurrentPeriod(this.props);\n  }\n\n  history: Period[];\n  currentPeriod?: Period;\n  zooming: (() => void) | null = null;\n\n  /**\n   * Save current period state from period in props to be used\n   * in handling chart's zoom history state\n   */\n  saveCurrentPeriod = props => {\n    this.currentPeriod = {\n      period: props.period,\n      start: getDate(props.start),\n      end: getDate(props.end),\n    };\n  };\n\n  /**\n   * Sets the new period due to a zoom related action\n   *\n   * Saves the current period to an instance property so that we\n   * can control URL state when zoom history is being manipulated\n   * by the chart controls.\n   *\n   * Saves a callback function to be called after chart animation is completed\n   */\n  setPeriod = ({period, start, end}, saveHistory = false) => {\n    const {router, onZoom, usePageDate} = this.props;\n    const startFormatted = getDate(start);\n    const endFormatted = getDate(end);\n\n    // Save period so that we can revert back to it when using echarts \"back\" navigation\n    if (saveHistory) {\n      this.history.push(this.currentPeriod!);\n    }\n\n    // Callback to let parent component know zoom has changed\n    // This is required for some more perceived responsiveness since\n    // we delay updating URL state so that chart animation can finish\n    //\n    // Parent container can use this to change into a loading state before\n    // URL parameters are changed\n    onZoom?.({\n      period,\n      start: startFormatted,\n      end: endFormatted,\n    });\n\n    this.zooming = () => {\n      if (usePageDate && router) {\n        const newQuery = {\n          ...router.location.query,\n          pageStart: start ? getUtcDateString(start) : undefined,\n          pageEnd: end ? getUtcDateString(end) : undefined,\n          pageStatsPeriod: period ?? undefined,\n        };\n\n        // Only push new location if query params has changed because this will cause a heavy re-render\n        if (qs.stringify(newQuery) !== qs.stringify(router.location.query)) {\n          router.push({\n            pathname: router.location.pathname,\n            query: newQuery,\n          });\n        }\n      } else {\n        updateDateTime(\n          {\n            period,\n            start: startFormatted\n              ? getUtcToLocalDateObject(startFormatted)\n              : startFormatted,\n            end: endFormatted ? getUtcToLocalDateObject(endFormatted) : endFormatted,\n          },\n          router,\n          {skipDesyncUpdate: true}\n        );\n      }\n\n      this.saveCurrentPeriod({period, start, end});\n    };\n  };\n\n  /**\n   * Enable zoom immediately instead of having to toggle to zoom\n   */\n  handleChartReady = chart => {\n    this.props.onChartReady?.(chart);\n  };\n\n  /**\n   * Restores the chart to initial viewport/zoom level\n   *\n   * Updates URL state to reflect initial params\n   */\n  handleZoomRestore = (evt, chart) => {\n    if (!this.history.length) {\n      return;\n    }\n\n    this.setPeriod(this.history[0]);\n\n    // reset history\n    this.history = [];\n\n    this.props.onRestore?.(evt, chart);\n  };\n\n  handleDataZoom = (evt, chart) => {\n    const model = chart.getModel();\n    const {startValue, endValue} = model._payload.batch[0];\n\n    // if `rangeStart` and `rangeEnd` are null, then we are going back\n    if (startValue === null && endValue === null) {\n      const previousPeriod = this.history.pop();\n\n      if (!previousPeriod) {\n        return;\n      }\n\n      this.setPeriod(previousPeriod);\n    } else {\n      const start = moment.utc(startValue);\n\n      // Add a day so we go until the end of the day (e.g. next day at midnight)\n      const end = moment.utc(endValue);\n\n      this.setPeriod({period: null, start, end}, true);\n    }\n\n    this.props.onDataZoom?.(evt, chart);\n  };\n\n  /**\n   * Chart event when *any* rendering+animation finishes\n   *\n   * `this.zooming` acts as a callback function so that\n   * we can let the native zoom animation on the chart complete\n   * before we update URL state and re-render\n   */\n  handleChartFinished = (_props, chart) => {\n    if (typeof this.zooming === 'function') {\n      this.zooming();\n      this.zooming = null;\n    }\n\n    // This attempts to activate the area zoom toolbox feature\n    const zoom = chart._componentsViews?.find(c => c._features && c._features.dataZoom);\n    if (zoom && !zoom._features.dataZoom._isZoomActive) {\n      // Calling dispatchAction will re-trigger handleChartFinished\n      chart.dispatchAction({\n        type: 'takeGlobalCursor',\n        key: 'dataZoomSelect',\n        dataZoomSelectActive: true,\n      });\n    }\n\n    callIfFunction(this.props.onFinished);\n  };\n\n  render() {\n    const {\n      utc: _utc,\n      start: _start,\n      end: _end,\n      disabled,\n      children,\n      xAxisIndex,\n\n      router: _router,\n      onZoom: _onZoom,\n      onRestore: _onRestore,\n      onChartReady: _onChartReady,\n      onDataZoom: _onDataZoom,\n      onFinished: _onFinished,\n      showSlider,\n      chartZoomOptions,\n      ...props\n    } = this.props;\n\n    const utc = _utc ?? undefined;\n    const start = _start ? getUtcToLocalDateObject(_start) : undefined;\n    const end = _end ? getUtcToLocalDateObject(_end) : undefined;\n\n    if (disabled) {\n      return children({\n        utc,\n        start,\n        end,\n        ...props,\n      });\n    }\n    const renderProps = {\n      // Zooming only works when grouped by date\n      isGroupedByDate: true,\n      onChartReady: this.handleChartReady,\n      utc,\n      start,\n      end,\n      dataZoom: showSlider\n        ? [\n            ...DataZoomSlider({xAxisIndex, ...chartZoomOptions}),\n            ...DataZoomInside({\n              xAxisIndex,\n              ...(chartZoomOptions as InsideDataZoomComponentOption),\n            }),\n          ]\n        : DataZoomInside({\n            xAxisIndex,\n            ...(chartZoomOptions as InsideDataZoomComponentOption),\n          }),\n      showTimeInTooltip: true,\n      toolBox: ToolBox(\n        {},\n        {\n          dataZoom: {\n            title: {\n              zoom: '',\n              back: '',\n            },\n            iconStyle: {\n              borderWidth: 0,\n              color: 'transparent',\n              opacity: 0,\n            },\n          },\n        }\n      ),\n      onDataZoom: this.handleDataZoom,\n      onFinished: this.handleChartFinished,\n      onRestore: this.handleZoomRestore,\n      ...props,\n    };\n\n    return children(renderProps);\n  }\n}\n\nexport default ChartZoom;\n","import 'echarts/lib/component/dataZoomInside';\n\nimport type {InsideDataZoomComponentOption} from 'echarts';\n\nconst DEFAULT: InsideDataZoomComponentOption = {\n  type: 'inside',\n  // Mouse wheel can not trigger zoom\n  zoomOnMouseWheel: false,\n  // The translation (by mouse drag or touch drag) is available but zoom is not\n  zoomLock: true,\n  throttle: 50,\n};\n\nexport default function DataZoomInside(\n  props: InsideDataZoomComponentOption | InsideDataZoomComponentOption[]\n): InsideDataZoomComponentOption[] {\n  // `props` can be boolean, if so return default\n  if (!props || !Array.isArray(props)) {\n    const dataZoom = {\n      ...DEFAULT,\n      ...props,\n    };\n    return [dataZoom];\n  }\n\n  return props;\n}\n","import type {ToolboxComponentOption} from 'echarts';\n\nfunction getFeatures({\n  dataZoom,\n  ...features\n}: ToolboxComponentOption['feature'] = {}): ToolboxComponentOption['feature'] {\n  return {\n    ...(dataZoom\n      ? {\n          dataZoom: {\n            yAxisIndex: 'none',\n            title: {\n              zoom: 'zoom',\n              back: 'undo',\n            },\n            ...dataZoom,\n          },\n        }\n      : {}),\n    ...features,\n  };\n}\n\nexport default function ToolBox(\n  options: ToolboxComponentOption,\n  features: ToolboxComponentOption['feature']\n): ToolboxComponentOption {\n  return {\n    right: 0,\n    top: 0,\n    itemSize: 16,\n    // Stack the toolbox under the legend.\n    // so all series names are clickable.\n    z: -1,\n\n    feature: getFeatures(features),\n    ...options,\n  };\n}\n","import type {LineSeriesOption} from 'echarts';\n\nimport {Series} from 'sentry/types/echarts';\n\nimport LineSeries from './series/lineSeries';\nimport BaseChart from './baseChart';\n\ntype ChartProps = Omit<React.ComponentProps<typeof BaseChart>, 'css'>;\n\nexport type LineChartSeries = Series &\n  Omit<LineSeriesOption, 'data' | 'name'> & {\n    dataArray?: LineSeriesOption['data'];\n  };\n\nexport interface LineChartProps extends Omit<ChartProps, 'series'> {\n  series: LineChartSeries[];\n  additionalSeries?: LineSeriesOption[];\n  seriesOptions?: LineSeriesOption;\n}\n\nexport function LineChart({series, seriesOptions, ...props}: LineChartProps) {\n  return (\n    <BaseChart\n      {...props}\n      series={series.map(({seriesName, data, dataArray, ...options}) =>\n        LineSeries({\n          ...seriesOptions,\n          ...options,\n          name: seriesName,\n          data: dataArray || data?.map(({value, name}) => [name, value]),\n          animation: false,\n          animationThreshold: 1,\n          animationDuration: 0,\n        })\n      )}\n    />\n  );\n}\n","import {browserHistory} from 'react-router';\nimport styled from '@emotion/styled';\nimport {LocationDescriptorObject} from 'history';\n\nimport Link from 'sentry/components/links/link';\nimport {IconArrow} from 'sentry/icons';\n\nexport type Alignments = 'left' | 'right' | undefined;\nexport type Directions = 'desc' | 'asc' | undefined;\n\ntype Props = {\n  align: Alignments;\n  canSort: boolean;\n  direction: Directions;\n  generateSortLink: () => LocationDescriptorObject | undefined;\n  title: React.ReactNode;\n  onClick?: (e: React.MouseEvent<HTMLAnchorElement>) => void;\n  replace?: boolean;\n};\n\nfunction SortLink({\n  align,\n  title,\n  canSort,\n  generateSortLink,\n  onClick,\n  direction,\n  replace,\n}: Props) {\n  const target = generateSortLink();\n\n  if (!target || !canSort) {\n    return <StyledNonLink align={align}>{title}</StyledNonLink>;\n  }\n\n  const arrow = !direction ? null : (\n    <StyledIconArrow size=\"xs\" direction={direction === 'desc' ? 'down' : 'up'} />\n  );\n\n  const handleOnClick: React.MouseEventHandler<HTMLAnchorElement> = e => {\n    if (replace) {\n      e.preventDefault();\n      browserHistory.replace(target);\n    }\n    onClick?.(e);\n  };\n\n  return (\n    <StyledLink align={align} to={target} onClick={handleOnClick}>\n      {title} {arrow}\n    </StyledLink>\n  );\n}\n\ntype LinkProps = React.ComponentPropsWithoutRef<typeof Link>;\ntype StyledLinkProps = LinkProps & {align: Alignments};\n\nconst StyledLink = styled((props: StyledLinkProps) => {\n  // @ts-ignore It doesn't look like the `css` property is a part of the props,\n  // but prior to this style of destructure-omitting it, it was being omitted\n  // with lodash.omit. I mean keeping it omitted here just in case.\n  const {align: _align, css: _css, ...forwardProps} = props;\n  return <Link {...forwardProps} />;\n})`\n  display: block;\n  width: 100%;\n  white-space: nowrap;\n  color: inherit;\n\n  &:hover,\n  &:active,\n  &:focus,\n  &:visited {\n    color: inherit;\n  }\n\n  ${(p: StyledLinkProps) => (p.align ? `text-align: ${p.align};` : '')}\n`;\n\nconst StyledNonLink = styled('div')<{align: Alignments}>`\n  display: block;\n  width: 100%;\n  white-space: nowrap;\n  ${(p: {align: Alignments}) => (p.align ? `text-align: ${p.align};` : '')}\n`;\n\nconst StyledIconArrow = styled(IconArrow)`\n  vertical-align: top;\n`;\n\nexport default SortLink;\n"],"names":["AreaChart","_ref","series","stacked","colors","props","_jsx","BaseChart","map","_ref2","i","seriesName","data","otherSeriesProps","arguments","length","undefined","LineSeries","AreaSeries","stack","name","_ref3","value","lineStyle","color","opacity","width","areaStyle","animation","animationThreshold","animationDuration","displayName","DEFAULT","realtime","showDetail","left","right","bottom","DataZoomSlider","Array","isArray","getDate","date","moment","format","ChartZoom","Component","constructor","_this","super","this","_defineProperty","currentPeriod","period","start","end","saveHistory","router","onZoom","usePageDate","startFormatted","endFormatted","history","push","zooming","newQuery","location","query","pageStart","getUtcDateString","pageEnd","pageStatsPeriod","qs","pathname","updateDateTime","getUtcToLocalDateObject","skipDesyncUpdate","saveCurrentPeriod","chart","onChartReady","evt","setPeriod","onRestore","model","getModel","startValue","endValue","_payload","batch","previousPeriod","pop","onDataZoom","_props","zoom","_componentsViews","find","c","_features","dataZoom","_isZoomActive","dispatchAction","type","key","dataZoomSelectActive","callIfFunction","onFinished","componentDidUpdate","disabled","render","utc","_utc","_start","_end","children","xAxisIndex","_router","_onZoom","_onRestore","_onChartReady","_onDataZoom","_onFinished","showSlider","chartZoomOptions","isGroupedByDate","handleChartReady","DataZoomInside","showTimeInTooltip","toolBox","ToolBox","title","back","iconStyle","borderWidth","handleDataZoom","handleChartFinished","handleZoomRestore","zoomOnMouseWheel","zoomLock","throttle","getFeatures","features","yAxisIndex","options","top","itemSize","z","feature","LineChart","seriesOptions","dataArray","SortLink","align","canSort","generateSortLink","onClick","direction","replace","target","StyledNonLink","arrow","StyledIconArrow","size","_jsxs","StyledLink","to","e","preventDefault","browserHistory","_styled","_align","css","_css","forwardProps","Link","p","IconArrow","styles"],"sourceRoot":""}