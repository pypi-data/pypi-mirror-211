"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_monitors_monitors_tsx-images_spot_onboarding-preview_svg"],{"./app/actionCreators/monitors.tsx":(e,t,n)=>{n.d(t,{Mw:()=>r,gm:()=>a,so:()=>l});var o=n("./app/actionCreators/indicator.tsx"),s=n("./app/locale.tsx"),i=n("../node_modules/@sentry/core/esm/exports.js");async function r(e,t,n){(0,o.E3)((0,s.t)("Deleting Monitor..."));try{await e.requestPromise(`/organizations/${t}/monitors/${n}/`,{method:"DELETE"}),(0,o.B8)()}catch{(0,o.Iw)((0,s.t)("Unable to remove monitor."))}}async function a(e,t,n,i){(0,o.E3)((0,s.t)("Deleting Environment..."));try{await e.requestPromise(`/organizations/${t}/monitors/${n}/`,{method:"DELETE",query:{environment:i}}),(0,o.B8)()}catch{(0,o.Iw)((0,s.t)("Unable to remove environment from monitor."))}}async function l(e,t,n,r){(0,o.E3)();try{const s=await e.requestPromise(`/organizations/${t}/monitors/${n}/`,{method:"PUT",data:r});return(0,o.B8)(),s}catch(e){a=e,i.$e((e=>{i.Tb(a)})),window.console&&console.error&&console.error(a),(0,o.Iw)((0,s.t)("Unable to update monitor."))}var a;return null}},"./app/components/diamondStatus.tsx":(e,t,n)=>{n.d(t,{V:()=>r});var o=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("./app/icons/index.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){let{color:t,icon:n,...o}=e;return(0,i.BX)(l,{role:"presentation",color:t,...o,children:[(0,i.tZ)(a,{color:t}),(0,i.tZ)(n,{color:"white"})]})}r.displayName="DiamondStatus";const a=(0,o.Z)(s.Sq,{target:"ehwnb4y1"})({name:"bgbjt4",styles:"width:36px;height:36px"}),l=(0,o.Z)("div",{target:"ehwnb4y0"})({name:"1uzdu7j",styles:"width:36px;height:36px;position:relative;svg:last-child{width:16px;z-index:2;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;}"})},"./app/components/onboardingPanel.tsx":(e,t,n)=>{n.d(t,{Z:()=>p});var o=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("./app/components/panels/index.tsx"),i=n("./app/styles/space.tsx"),r=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{image:t,noCenter:n,children:o,...i}=e;return(0,r.tZ)(s.s_,{...i,children:(0,r.BX)(l,{children:[t?(0,r.tZ)(m,{children:t}):null,(0,r.tZ)(c,{centered:!t&&!n,children:o})]})})}a.displayName="OnboardingPanel";const l=(0,o.Z)("div",{target:"euclof22"})("padding:",(0,i.D)(3),";position:relative;@media (min-width: ",(e=>e.theme.breakpoints.small),"){display:flex;align-items:center;flex-direction:row;justify-content:center;flex-wrap:wrap;min-height:300px;max-width:1000px;margin:0 auto;}@media (min-width: ",(e=>e.theme.breakpoints.medium),"){min-height:350px;}"),c=(0,o.Z)("div",{target:"euclof21"})("min-width:0;z-index:1;",(e=>e.centered?"text-align: center;":"")," ",(e=>e.centered?"max-width: 600px;":""),"@media (min-width: ",(e=>e.theme.breakpoints.small),"){flex:2;}"),m=(0,o.Z)(c,{target:"euclof20"})("position:relative;min-height:100px;max-width:300px;min-width:150px;margin:",(0,i.D)(2)," auto;@media (min-width: ",(e=>e.theme.breakpoints.small),"){flex:1;margin:",(0,i.D)(3),";max-width:auto;}"),p=a},"./app/components/searchBar.tsx":(e,t,n)=>{n.d(t,{Z:()=>g,p:()=>x});var o=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("../node_modules/react/index.js"),i=n("./app/components/button.tsx"),r=n("./app/components/inputGroup.tsx"),a=n("./app/icons/index.tsx"),l=n("./app/icons/iconClose.tsx"),c=n("./app/locale.tsx"),m=n("./app/styles/space.tsx"),p=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{query:t,defaultQuery:n="",onChange:o,onSearch:i,width:m,size:d,className:g,trailing:y,...Z}=e;const w=(0,s.useRef)(null),[v,b]=(0,s.useState)(t??n);(0,s.useEffect)((()=>{"string"==typeof t&&b(t)}),[t]);const f=(0,s.useCallback)((e=>{const{value:t}=e.target;b(t),o?.(t)}),[o]),k=(0,s.useCallback)((e=>{e.preventDefault(),w.current?.blur(),i?.(v)}),[i,v]),C=(0,s.useCallback)((()=>{b(""),o?.(""),i?.("")}),[o,i]);return(0,p.tZ)(u,{onSubmit:k,className:g,children:(0,p.BX)(r.BZ,{children:[(0,p.tZ)(r.BZ.LeadingItems,{disablePointerEvents:!0,children:(0,p.tZ)(a.jV,{color:"subText",size:"xs"===d?"xs":"sm"})}),(0,p.tZ)(h,{...Z,ref:w,type:"text",name:"query",autoComplete:"off",value:v,onChange:f,width:m,size:d}),(0,p.BX)(r.BZ.TrailingItems,{children:[y,!!v&&(0,p.tZ)(x,{size:"zero",borderless:!0,onClick:C,icon:(0,p.tZ)(l.b,{size:"xs"}),"aria-label":(0,c.t)("Clear")})]})]})})}d.displayName="SearchBar";const u=(0,o.Z)("form",{target:"elu65nr2"})({name:"4bgdod",styles:"display:block;position:relative"}),h=(0,o.Z)(r.BZ.Input,{target:"elu65nr1"})((e=>e.width&&`width: ${e.width};`),";"),x=(0,o.Z)(i.zx,{target:"elu65nr0"})("color:",(e=>e.theme.subText),";padding:",(0,m.D)(.5),";"),g=d},"./app/utils/routeAnalytics/useRouteAnalyticsEventNames.tsx":(e,t,n)=>{n.d(t,{Z:()=>i});var o=n("../node_modules/react/index.js"),s=n("./app/views/routeAnalyticsContextProvider.tsx");function i(e,t){const{setEventNames:n,previousUrl:i}=(0,o.useContext)(s.o);(0,o.useEffect)((()=>{n(e,t)}),[n,e,t,i])}},"./app/views/monitors/components/cronsFeedbackButton.tsx":(e,t,n)=>{n.d(t,{Z:()=>r});var o=n("./app/components/featureFeedback/index.tsx"),s=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(){return(0,s.tZ)(o.z,{featureName:"crons",buttonProps:{size:"sm"}})}i.displayName="CronsFeedbackButton";const r=i},"./app/views/monitors/monitors.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>Y});var o=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/react/index.js")),i=n("../node_modules/query-string/index.js");const r=n.p+"assets/onboarding-preview.9ab72020d945116f13ae.svg";var a=n("./app/components/button.tsx"),l=n("./app/components/buttonBar.tsx"),c=n("./app/components/environmentPageFilter.tsx"),m=n("./app/components/featureBadge.tsx"),p=n("./app/components/layouts/thirds.tsx"),d=n("./app/components/loadingIndicator.tsx"),u=n("./app/components/onboardingPanel.tsx"),h=n("./app/components/organizations/pageFilterBar.tsx"),x=n("./app/components/organizations/pageFilters/parse.tsx"),g=n("./app/components/pageHeadingQuestionTooltip.tsx"),y=n("./app/components/pagination.tsx"),Z=n("./app/components/panels/index.tsx"),w=n("./app/components/projectPageFilter.tsx"),v=n("./app/components/searchBar.tsx"),b=n("./app/components/sentryDocumentTitle.tsx"),f=n("./app/icons/index.tsx"),k=n("./app/locale.tsx"),C=n("./app/styles/space.tsx"),E=n("./app/utils/queryClient.tsx"),j=n("./app/utils/queryString.tsx"),N=n("./app/utils/routeAnalytics/useRouteAnalyticsEventNames.tsx"),_=n("./app/utils/routeAnalytics/useRouteAnalyticsParams.tsx"),B=n("./app/utils/useOrganization.tsx"),z=n("./app/utils/usePageFilters.tsx"),I=n("./app/utils/useRouter.tsx"),T=n("./app/views/monitors/components/cronsFeedbackButton.tsx"),S=n("./app/actionCreators/monitors.tsx"),D=n("./app/components/confirm.tsx"),q=n("./app/components/dropdownMenu/index.tsx"),P=n("./app/components/idBadge/index.tsx"),R=n("./app/components/links/link.tsx"),A=n("./app/components/textOverflow.tsx"),M=n("./app/components/timeSince.tsx"),O=n("./app/utils/useApi.tsx"),$=n("./app/utils/withDomainRequired.tsx"),X=n("./app/views/monitors/utils.tsx"),F=n("./app/views/monitors/types.tsx"),L=n("./app/components/diamondStatus.tsx"),U=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function V(e){let{status:t}=e;const{Icon:n,color:o}=K[t]??K.ok;return(0,U.tZ)(L.V,{icon:n,color:o})}V.displayName="MonitorBadge";const K={ok:{Icon:f.DL,color:"successText"},error:{Icon:f.zC,color:"errorText"},timeout:{Icon:f.zC,color:"errorText"},missed_checkin:{Icon:f.qV,color:"warningText"},active:{Icon:f._$,color:"subText"},disabled:{Icon:e=>(0,U.tZ)(f.ky,{...e,size:"xs"}),color:"subText"}};function H(e){let{monitor:t,monitorEnv:n,organization:o,onDelete:i}=e;const r=(0,O.Z)(),a=n?.lastCheckIn?(0,U.tZ)(M.Z,{unitStyle:"regular",date:n.lastCheckIn}):null,l=n?(0,k._N)('Are you sure you want to permanently delete the "[envName]" environment from "[monitorName]"?',{monitorName:t.name,envName:n.name}):(0,k._N)('Are you sure you want to permanently delete "[monitorName]"?',{monitorName:t.name}),c=[{key:"edit",label:(0,k.t)("Edit"),to:(0,$.D)({pathname:`/organizations/${o.slug}/crons/${t.slug}/edit/`,query:{environment:n?.name}})},{key:"delete",label:(0,k.t)("Delete"),priority:"danger",onAction:()=>{(0,D._)({onConfirm:async()=>{n?await(0,S.gm)(r,o.slug,t.slug,n.name):await(0,S.Mw)(r,o.slug,t.slug),i(n)},header:(0,k.t)("Delete Monitor?"),message:l,confirmText:(0,k.t)("Delete Monitor"),priority:"danger"})}}],m=`/organizations/${o.slug}/crons/${t.slug}/${n?`?environment=${n.name}`:""}`,p="disabled"!==t.status&&n?n.status:t.status;return(0,U.BX)(s.Fragment,{children:[(0,U.BX)(W,{children:[(0,U.tZ)(V,{status:p}),(0,U.tZ)(R.Z,{to:m,children:t.name})]}),(0,U.tZ)(J,{children:(0,U.tZ)(A.Z,{children:"disabled"===p?(0,k.t)("Paused"):p!==F.wo.ACTIVE&&a?p===F.wo.OK?(0,k._N)("Check-in [lastCheckin]",{lastCheckin:a}):p===F.wo.MISSED_CHECKIN?(0,k._N)("Missed [lastCheckin]",{lastCheckin:a}):p===F.wo.ERROR?(0,k._N)("Failed [lastCheckin]",{lastCheckin:a}):p===F.wo.TIMEOUT?(0,k.t)("Timed out"):null:(0,k.t)("Waiting for first check-in")})}),(0,U.tZ)(J,{children:(0,X.J)(t.config)}),(0,U.tZ)(J,{children:n?.nextCheckIn&&n.status!==F.wo.DISABLED&&n.status!==F.wo.ACTIVE?(0,U.tZ)(M.Z,{unitStyle:"regular",date:n.nextCheckIn}):"—"}),(0,U.tZ)(J,{children:(0,U.tZ)(P.Z,{project:t.project,avatarSize:18,avatarProps:{hasTooltip:!0,tooltip:t.project.slug}})}),(0,U.tZ)(J,{children:n?.name??"—"}),(0,U.tZ)(G,{children:(0,U.tZ)(q.h,{items:c,position:"bottom-end",triggerProps:{"aria-label":(0,k.t)("Actions"),size:"xs",icon:(0,U.tZ)(f.YR,{size:"xs"}),showChevron:!1}})})]})}H.displayName="MonitorRow";const W=(0,o.Z)("div",{target:"e137lq2l2"})("display:flex;align-items:center;gap:",(0,C.D)(2),";font-size:",(e=>e.theme.fontSizeLarge),";"),J=(0,o.Z)("div",{target:"e137lq2l1"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),G=(0,o.Z)("div",{target:"e137lq2l0"})({name:"1wnowod",styles:"display:flex;align-items:center;justify-content:center"});function Q(e){const t=(0,B.Z)(),{selection:n}=(0,z.Z)();return(0,U.tZ)(a.zx,{to:{pathname:`/organizations/${t.slug}/crons/create/`,query:{project:n.projects}},priority:"primary",...e,children:e.children})}function Y(e){let{location:t}=e;const n=(0,B.Z)(),o=(0,I.Z)(),Z=(0,E.NL)(),C=[`/organizations/${n.slug}/monitors/`,{query:{...t.query,includeNew:!0}}],{data:z,getResponseHeader:S,isLoading:D}=(0,E.WE)(C,{staleTime:0});(0,N.Z)("monitors.page_viewed","Monitors: Page Viewed"),(0,_.Z)({empty_state:!z||0===z.length});const q=S?.("Link"),P=(e,t)=>(0,U.tZ)(H,{monitor:e,monitorEnv:t,onDelete:t=>{if(t){if(!z)return;const n=z.find((t=>t.slug===e.slug));if(!n)return;n.environments=n.environments.filter((e=>e.name!==t.name)),(0,E.XN)(Z,C,z)}else(0,E.XN)(Z,C,z?.filter((t=>t.slug!==e.slug)))},organization:n},`${e.slug}-${t?.name??"no-env"}`);return(0,U.tZ)(b.Z,{title:`Crons — ${n.slug}`,children:(0,U.BX)(p.T3,{children:[(0,U.BX)(p.h4,{children:[(0,U.tZ)(p.oB,{children:(0,U.BX)(p.Dx,{children:[(0,k.t)("Cron Monitors"),(0,U.tZ)(g.u,{title:(0,k.t)("Scheduled monitors that check in on recurring jobs and tell you if they’re running on schedule, failing, or succeeding."),docsUrl:"https://docs.sentry.io/product/crons/"}),(0,U.tZ)(m.Z,{type:"beta"})]})}),(0,U.tZ)(p.kP,{children:(0,U.BX)(l.ZP,{gap:1,children:[(0,U.tZ)(T.Z,{}),(0,U.tZ)(Q,{size:"sm",icon:(0,U.tZ)(f.N_,{isCircled:!0,size:"xs"}),children:(0,k.t)("Add Monitor")})]})})]}),(0,U.tZ)(p.uT,{children:(0,U.BX)(p.or,{fullWidth:!0,children:[(0,U.BX)(ee,{children:[(0,U.BX)(h.Z,{children:[(0,U.tZ)(w.Z,{resetParamsOnChange:["cursor"]}),(0,U.tZ)(c.Z,{resetParamsOnChange:["cursor"]})]}),(0,U.tZ)(v.Z,{query:(0,j.ro)(i.parse(t.search)?.query,""),placeholder:(0,k.t)("Search by name or slug"),onSearch:e=>{o.push({pathname:t.pathname,query:(0,x.fK)({...t.query||{},query:e})})}})]}),D?(0,U.tZ)(d.Z,{}):z?.length?(0,U.BX)(s.Fragment,{children:[(0,U.tZ)(te,{headers:[(0,k.t)("Monitor Name"),(0,k.t)("Status"),(0,k.t)("Schedule"),(0,k.t)("Next Checkin"),(0,k.t)("Project"),(0,k.t)("Environment"),(0,k.t)("Actions")],children:z?.map((e=>e.environments.length>0?e.environments.map((t=>P(e,t))):P(e))).flat()}),q&&(0,U.tZ)(y.Z,{pageLinks:q})]}):(0,U.BX)(u.Z,{image:(0,U.tZ)("img",{src:r}),children:[(0,U.tZ)("h3",{children:(0,k.t)("Let Sentry monitor your recurring jobs")}),(0,U.tZ)("p",{children:(0,k.t)("We'll tell you if your recurring jobs are running on schedule, failing, or succeeding.")}),(0,U.BX)(ne,{gap:1,children:[(0,U.tZ)(Q,{children:(0,k.t)("Set up first cron monitor")}),(0,U.tZ)(a.zx,{href:"https://docs.sentry.io/product/crons",external:!0,children:(0,k.t)("Read docs")})]})]})]})})]})})}Q.displayName="NewMonitorButton",Y.displayName="Monitors";const ee=(0,o.Z)("div",{target:"e1ytug0t2"})("display:grid;grid-template-columns:max-content 1fr;gap:",(0,C.D)(1.5),";margin-bottom:",(0,C.D)(2),";"),te=(0,o.Z)(Z.KB,{target:"e1ytug0t1"})({name:"1dqlhcg",styles:"grid-template-columns:1fr max-content 1fr max-content max-content max-content max-content"}),ne=(0,o.Z)(l.ZP,{target:"e1ytug0t0"})({name:"vpj881",styles:"grid-template-columns:repeat(auto-fit, minmax(130px, max-content))"})},"./app/views/monitors/types.tsx":(e,t,n)=>{let o,s,i,r;n.d(t,{Ix:()=>s,NI:()=>r,wo:()=>i}),function(e){e.UNKNOWN="unknown",e.CRON_JOB="cron_job"}(o||(o={})),function(e){e.CRONTAB="crontab",e.INTERVAL="interval"}(s||(s={})),function(e){e.OK="ok",e.ERROR="error",e.DISABLED="disabled",e.ACTIVE="active",e.MISSED_CHECKIN="missed_checkin",e.TIMEOUT="timeout"}(i||(i={})),function(e){e.OK="ok",e.ERROR="error",e.IN_PROGRESS="in_progress",e.MISSED="missed",e.TIMEOUT="timeout"}(r||(r={}))},"./app/views/monitors/utils.tsx":(e,t,n)=>{n.d(t,{J:()=>c,Z:()=>l});var o=n("../node_modules/cronstrue/dist/cronstrue.js"),s=n.n(o),i=n("./app/locale.tsx"),r=n("./app/utils/dates.tsx"),a=n("./app/views/monitors/types.tsx");function l(e){if(!e)return null;let t;try{t=s().toString(e,{verbose:!0,use24HourTimeFormat:(0,r.gn)()})}catch(e){return null}return t}function c(e){if(e.schedule_type===a.Ix.CRONTAB)return l(e.schedule)??(0,i.t)("Unknown schedule");const[t,n]=e.schedule;return"minute"===n?(0,i.tn)("Every minute","Every %s minutes",t):"hour"===n?(0,i.tn)("Every hour","Every %s hours",t):"day"===n?(0,i.tn)("Every day","Every %s days",t):"week"===n?(0,i.tn)("Every week","Every %s weeks",t):"month"===n?(0,i.tn)("Every month","Every %s months",t):(0,i.t)("Unknown schedule")}}}]);
//# sourceMappingURL=../sourcemaps/app_views_monitors_monitors_tsx-images_spot_onboarding-preview_svg.7eee177b443b76838b933a3221472f2e.js.map