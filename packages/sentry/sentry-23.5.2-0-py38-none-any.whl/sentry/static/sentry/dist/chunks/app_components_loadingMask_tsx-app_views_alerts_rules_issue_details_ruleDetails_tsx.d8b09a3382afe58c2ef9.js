"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_loadingMask_tsx-app_views_alerts_rules_issue_details_ruleDetails_tsx"],{"./app/components/charts/areaChart.tsx":(e,t,o)=>{o.d(t,{T:()=>a});var r=o("./app/components/charts/series/lineSeries.tsx"),n=o("./app/components/charts/baseChart.tsx"),s=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{series:t,stacked:o,colors:a,...i}=e;return(0,s.tZ)(n.Z,{...i,"data-test-id":"area-chart",colors:a,series:t.map(((e,t)=>{let{seriesName:n,data:s,...i}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.Z)({...e})}({stack:o?"area":void 0,name:n,data:s.map((e=>{let{name:t,value:o}=e;return[t,o]})),lineStyle:{color:a?.[t],opacity:1,width:.4},areaStyle:{color:a?.[t],opacity:1},animation:!1,animationThreshold:1,animationDuration:0,...i})}))})}a.displayName="AreaChart"},"./app/components/charts/chartZoom.tsx":(e,t,o)=>{o.d(t,{Z:()=>f});var r=o("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(o("../node_modules/core-js/modules/es.array.push.js"),o("../node_modules/react/index.js")),s=o("../node_modules/moment/moment.js"),a=o.n(s),i=o("../node_modules/query-string/index.js"),l=o("./app/actionCreators/pageFilters.tsx"),d=o("./app/components/charts/components/dataZoomInside.tsx");o("../node_modules/echarts/lib/component/dataZoomSlider.js");const c={realtime:!1,showDetail:!1,left:0,right:6,bottom:8};function u(e){return e&&Array.isArray(e)?e:[{...c,...e}]}var p=o("./app/components/charts/components/toolBox.tsx"),m=o("./app/utils/callIfFunction.tsx"),h=o("./app/utils/dates.tsx");const g=e=>e?a().utc(e).format(a().HTML5_FMT.DATETIME_LOCAL_SECONDS):null;class Z extends n.Component{constructor(e){var t;super(e),t=this,(0,r.Z)(this,"history",void 0),(0,r.Z)(this,"currentPeriod",void 0),(0,r.Z)(this,"zooming",null),(0,r.Z)(this,"saveCurrentPeriod",(e=>{this.currentPeriod={period:e.period,start:g(e.start),end:g(e.end)}})),(0,r.Z)(this,"setPeriod",(function(e){let{period:o,start:r,end:n}=e,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{router:a,onZoom:d,usePageDate:c}=t.props,u=g(r),p=g(n);s&&t.history.push(t.currentPeriod),d?.({period:o,start:u,end:p}),t.zooming=()=>{if(c&&a){const e={...a.location.query,pageStart:r?(0,h.v5)(r):void 0,pageEnd:n?(0,h.v5)(n):void 0,pageStatsPeriod:o??void 0};i.stringify(e)!==i.stringify(a.location.query)&&a.push({pathname:a.location.pathname,query:e})}else(0,l.dR)({period:o,start:u?(0,h.hC)(u):u,end:p?(0,h.hC)(p):p},a,{skipDesyncUpdate:!0});t.saveCurrentPeriod({period:o,start:r,end:n})}})),(0,r.Z)(this,"handleChartReady",(e=>{this.props.onChartReady?.(e)})),(0,r.Z)(this,"handleZoomRestore",((e,t)=>{this.history.length&&(this.setPeriod(this.history[0]),this.history=[],this.props.onRestore?.(e,t))})),(0,r.Z)(this,"handleDataZoom",((e,t)=>{const o=t.getModel(),{startValue:r,endValue:n}=o._payload.batch[0];if(null===r&&null===n){const e=this.history.pop();if(!e)return;this.setPeriod(e)}else{const e=a().utc(r),t=a().utc(n);this.setPeriod({period:null,start:e,end:t},!0)}this.props.onDataZoom?.(e,t)})),(0,r.Z)(this,"handleChartFinished",((e,t)=>{"function"==typeof this.zooming&&(this.zooming(),this.zooming=null);const o=t._componentsViews?.find((e=>e._features&&e._features.dataZoom));o&&!o._features.dataZoom._isZoomActive&&t.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}),(0,m.g)(this.props.onFinished)})),this.history=[],this.saveCurrentPeriod(e)}componentDidUpdate(){this.props.disabled||this.saveCurrentPeriod(this.props)}render(){const{utc:e,start:t,end:o,disabled:r,children:n,xAxisIndex:s,router:a,onZoom:i,onRestore:l,onChartReady:c,onDataZoom:m,onFinished:g,showSlider:Z,chartZoomOptions:f,...y}=this.props,v=e??void 0,x=t?(0,h.hC)(t):void 0,S=o?(0,h.hC)(o):void 0;return n(r?{utc:v,start:x,end:S,...y}:{isGroupedByDate:!0,onChartReady:this.handleChartReady,utc:v,start:x,end:S,dataZoom:Z?[...u({xAxisIndex:s,...f}),...(0,d.Z)({xAxisIndex:s,...f})]:(0,d.Z)({xAxisIndex:s,...f}),showTimeInTooltip:!0,toolBox:(0,p.Z)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom,onFinished:this.handleChartFinished,onRestore:this.handleZoomRestore,...y})}}Z.displayName="ChartZoom";const f=Z},"./app/components/charts/components/dataZoomInside.tsx":(e,t,o)=>{o.d(t,{Z:()=>n}),o("../node_modules/echarts/lib/component/dataZoomInside.js");const r={type:"inside",zoomOnMouseWheel:!1,zoomLock:!0,throttle:50};function n(e){return e&&Array.isArray(e)?e:[{...r,...e}]}},"./app/components/charts/components/toolBox.tsx":(e,t,o)=>{function r(){let{dataZoom:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e?{dataZoom:{yAxisIndex:"none",title:{zoom:"zoom",back:"undo"},...e}}:{},...t}}function n(e,t){return{right:0,top:0,itemSize:16,z:-1,feature:r(t),...e}}o.d(t,{Z:()=>n})},"./app/components/keyValueTable.tsx":(e,t,o)=>{o.d(t,{G:()=>l,v:()=>i});var r=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=o("../node_modules/react/index.js"),s=o("./app/styles/space.tsx"),a=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=(0,r.Z)("dl",{target:"ehev67y2"})("display:grid;grid-template-columns:50% 50%;",(e=>e.noMargin?"margin-bottom: 0;":null),";");function l(e){let{keyName:t,value:o}=e;return(0,a.BX)(n.Fragment,{children:[(0,a.tZ)(c,{children:t}),(0,a.tZ)(u,{children:o})]})}l.displayName="KeyValueTableRow";const d=e=>{let{theme:t}=e;return`\nfont-size: ${t.fontSizeMedium};\npadding: ${(0,s.D)(.5)} ${(0,s.D)(1)};\nfont-weight: normal;\nline-height: inherit;\n${e=>e.theme.overflowEllipsis};\n&:nth-of-type(2n-1) {\n  background-color: ${t.backgroundSecondary};\n}\n`},c=(0,r.Z)("dt",{target:"ehev67y1"})(d,";color:",(e=>e.theme.textColor),";"),u=(0,r.Z)("dd",{target:"ehev67y0"})(d,";color:",(e=>e.theme.subText),";text-align:right;")},"./app/components/loadingMask.tsx":(e,t,o)=>{o.d(t,{Z:()=>r});const r=(0,o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"e9w1nku0"})("background-color:",(e=>e.theme.backgroundSecondary),";border-radius:",(e=>e.theme.borderRadius),";position:absolute;top:0;bottom:0;left:0;right:0;")},"./app/components/pageTimeRangeSelector.tsx":(e,t,o)=>{o.d(t,{Z:()=>p});var r=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=o("./app/components/organizations/timeRangeSelector/index.tsx"),s=o("./app/components/panels/index.tsx"),a=o("./app/locale.tsx"),i=o("./app/styles/space.tsx"),l=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{className:t,...o}=e;return(0,l.tZ)(c,{className:t,children:(0,l.tZ)(n.Z,{label:(0,l.tZ)(u,{children:(0,a.t)("Date Range:")}),detached:!0,...o},`period:${o.relative}-start:${o.start}-end:${o.end}-utc:${o.utc}-defaultPeriod:${o.defaultPeriod}`)})}d.displayName="PageTimeRangeSelector";const c=(0,r.Z)(s.s_,{target:"e81ghdn1"})("padding:0;margin:0;display:flex;justify-content:center;align-items:center;height:",(e=>e.theme.form.md.height),"px;background:",(e=>e.theme.background),";border:1px solid ",(e=>e.theme.border),";border-radius:",(e=>e.theme.borderRadius),";font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.textColor),";>div{width:100%;align-self:stretch;}>div>div:first-child>div{padding:0 ",(0,i.D)(2),";}>div>div:last-child:not(:first-child){min-width:calc(100% + 2px);transform:translateX(-1px);right:auto;}"),u=(0,r.Z)("span",{target:"e81ghdn0"})("text-align:left;font-weight:600;color:",(e=>e.theme.textColor),";>span:last-child{font-weight:400;}"),p=d},"./app/utils/routeAnalytics/useRouteAnalyticsEventNames.tsx":(e,t,o)=>{o.d(t,{Z:()=>s});var r=o("../node_modules/react/index.js"),n=o("./app/views/routeAnalyticsContextProvider.tsx");function s(e,t){const{setEventNames:o,previousUrl:s}=(0,r.useContext)(n.o);(0,r.useEffect)((()=>{o(e,t)}),[o,e,t,s])}},"./app/views/alerts/rules/issue/details/ruleDetails.tsx":(e,t,o)=>{o.r(t),o.d(t,{default:()=>Ge});var r=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(o("../node_modules/core-js/modules/es.array.push.js"),o("../node_modules/lodash/pick.js")),s=o.n(n),a=o("../node_modules/moment/moment.js"),i=o.n(a),l=o("./app/components/acl/access.tsx"),d=o("./app/components/alert.tsx"),c=o("../node_modules/react/index.js"),u=o("../node_modules/react-router/es/index.js"),p=o("./app/actionCreators/indicator.tsx"),m=o("./app/components/button.tsx"),h=o("./app/components/buttonBar.tsx"),g=o("./app/components/dropdownMenu/index.tsx"),Z=o("./app/icons/index.tsx"),f=o("./app/locale.tsx"),y=o("./app/types/alerts.tsx"),v=o("./app/utils/useApi.tsx"),x=o("./app/utils/useLocation.tsx"),S=o("./app/utils/useOrganization.tsx"),E=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function b(e){let{isSnoozed:t,onSnooze:o,projectSlug:r,ruleId:n,ruleActionCategory:s,hasAccess:a}=e;const i=(0,S.Z)(),l=(0,v.Z)(),d=(0,x.T)(),[b,_]=(0,c.useState)(!1),D=(0,c.useCallback)((async function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];_(!0);try{await l.requestPromise(`/projects/${i.slug}/${r}/rules/${n}/snooze/`,{method:"POST",data:{target:e}}),s&&u.browserHistory.replace({pathname:d.pathname,query:{...d.query,mute:void 0}}),_(!1),(0,p.S9)((0,f.t)("Alert muted")),o({snooze:!t,snoozeCreatedBy:"You",snoozeForEveryone:"me"!==e})}catch(e){403===e.status?(0,p.Iw)((0,f.t)("You do not have permission to mute this alert")):410===e.status?(0,p.Iw)((0,f.t)("This alert has already been muted")):(0,p.Iw)((0,f.t)("Unable to mute this alert"))}}),[l,t,d.pathname,d.query,o,i.slug,r,n]),N=s===y.IA.AllDefault?"me":"everyone";(0,c.useEffect)((()=>{"1"!==d.query.mute||t||D(N,!0)}),[d.query,t,D,N]);const R=[{key:"me",label:(0,f.t)("Mute for me"),onAction:()=>D("me"),hidden:s!==y.IA.SomeDefault},{key:"everyone",label:(0,f.t)("Mute for everyone"),onAction:()=>D("everyone"),hidden:s!==y.IA.AllDefault}],w=R.filter((e=>!e.hidden)).length>0;return t?(0,E.tZ)(m.zx,{size:"sm",icon:(0,E.tZ)(Z.i1,{}),disabled:b||!a,onClick:()=>async function(){_(!0);try{await l.requestPromise(`/projects/${i.slug}/${r}/rules/${n}/snooze/`,{method:"DELETE"}),_(!1),(0,p.S9)((0,f.t)("Alert unmuted")),o({snooze:!t})}catch(e){403===e.status?(0,p.Iw)((0,f.t)("You do not have permission to unmute this alert")):(0,p.Iw)((0,f.t)("Unable to unmute this alert"))}}(),children:(0,f.t)("Unmute")}):(0,E.BX)(h.ZP,{children:[(0,E.tZ)(A,{size:"sm",icon:(0,E.tZ)(Z.Pw,{}),disabled:b||!a,hasDropdown:w,onClick:()=>{D(N)},children:"me"===N?(0,f.t)("Mute for me"):(0,f.t)("Mute for everyone")}),s!==y.IA.NoDefault&&(0,E.tZ)(g.h,{size:"sm",trigger:e=>(0,E.tZ)(T,{...e,"aria-label":(0,f.t)("Mute alert options"),icon:(0,E.tZ)(Z.g6,{direction:"down",size:"xs"})}),items:R,isDisabled:b||!a})]})}b.displayName="SnoozeAlert";const _=b,T=(0,r.Z)(m.zx,{target:"ev8ogja1"})("box-shadow:none;border-radius:",(e=>e.theme.borderRadiusRight),";border-left:none;"),A=(0,r.Z)(m.zx,{target:"ev8ogja0"})("box-shadow:none;border-radius:",(e=>e.hasDropdown?e.theme.borderRadiusLeft:e.theme.borderRadius),";");var D=o("./app/components/breadcrumbs.tsx"),N=o("./app/components/errorBoundary.tsx"),R=o("./app/components/idBadge/index.tsx"),w=o("./app/components/layouts/thirds.tsx"),I=o("./app/components/links/link.tsx"),z=o("./app/components/loadingError.tsx"),C=o("./app/components/loadingIndicator.tsx"),j=o("./app/components/organizations/pageFilters/container.tsx"),k=o("./app/components/organizations/pageFilters/parse.tsx"),O=o("./app/components/pageTimeRangeSelector.tsx"),P=o("./app/components/sentryDocumentTitle.tsx"),U=o("./app/styles/space.tsx"),B=o("./app/utils/analytics.tsx"),M=o("./app/utils/queryClient.tsx"),F=o("./app/utils/routeAnalytics/useRouteAnalyticsEventNames.tsx"),X=o("./app/utils/routeAnalytics/useRouteAnalyticsParams.tsx"),H=o("./app/utils/useProjects.tsx"),L=o("./app/views/alerts/rules/issue/index.tsx"),$=o("./app/views/alerts/rules/metric/details/constants.tsx"),Y=o("./app/components/charts/areaChart.tsx"),q=o("./app/components/charts/chartZoom.tsx"),V=o("./app/components/charts/styles.tsx"),G=o("./app/components/panels/index.tsx"),W=o("./app/components/placeholder.tsx"),K=o("./app/utils/getDynamicText.tsx"),Q=o("./app/utils/useRouter.tsx"),J=o("./app/views/routeError.tsx");function ee(e){let{project:t,period:o,start:r,end:n,utc:s,rule:a}=e;const i=(0,S.Z)(),l=(0,Q.Z)(),{data:d,isLoading:c,isError:u,error:p}=(0,M.WE)([`/projects/${i.slug}/${t.slug}/rules/${a.id}/stats/`,{query:{...o&&{statsPeriod:o},start:r,end:n,utc:s}}],{staleTime:3e4}),m=d?.reduce(((e,t)=>e+t.count),0)??0;return u?(0,E.tZ)(J.Z,{error:p}):(0,E.BX)(G.s_,{children:[(0,E.BX)(se,{withPadding:!0,children:[(0,E.tZ)(te,{children:(0,E.tZ)(V.ws,{children:(0,f.t)("Alerts Triggered")})}),(0,K.Z)({value:c?(0,E.tZ)(W.Z,{height:"200px"}):(0,E.tZ)(q.Z,{router:l,period:o,start:r,end:n,utc:s,usePageDate:!0,children:e=>(0,E.tZ)(Y.T,{...e,isGroupedByDate:!0,showTimeInTooltip:!0,grid:{left:(0,U.D)(.25),right:(0,U.D)(2),top:(0,U.D)(3),bottom:0},yAxis:{minInterval:1},series:[{seriesName:"Alerts Triggered",data:d?.map((e=>({name:e.date,value:e.count})))??[],emphasis:{disabled:!0}}]})}),fixed:(0,E.tZ)(W.Z,{height:"200px",testId:"skeleton-ui"})})]}),(0,E.BX)(oe,{children:[(0,E.tZ)(re,{children:(0,f.t)("Total Alerts")}),(0,E.tZ)(ne,{children:c?(0,E.tZ)(W.Z,{height:"16px",width:"50px"}):m.toLocaleString()})]})]})}ee.displayName="IssueAlertDetailsChart";const te=(0,r.Z)("div",{target:"e1x37u3e4"})("margin-bottom:",(0,U.D)(3),";"),oe=(0,r.Z)(G.jH,{target:"e1x37u3e3"})("display:flex;align-items:center;padding:",(0,U.D)(1)," 20px;"),re=(0,r.Z)(V.OT,{target:"e1x37u3e2"})("display:flex;align-items:center;margin:0;font-weight:bold;font-size:",(e=>e.theme.fontSizeMedium),";line-height:1;"),ne=(0,r.Z)("div",{target:"e1x37u3e1"})("display:flex;align-items:center;margin:0 ",(0,U.D)(1),";"),se=(0,r.Z)(G.N,{target:"e1x37u3e0"})({name:"sgs7ru",styles:"padding-right:6px"});var ae=o("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),ie=o("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),le=o("./app/components/asyncComponent.tsx"),de=o("./app/components/count.tsx"),ce=o("./app/components/dateTime.tsx"),ue=o("./app/components/pagination.tsx"),pe=o("./app/utils/events.tsx");class me extends le.Z{constructor(){super(...arguments),(0,ae.Z)(this,"shouldRenderBadRequests",!0)}componentDidUpdate(e){const{project:t,organization:o,start:r,end:n,period:s,utc:a,cursor:i}=this.props;e.start===r&&e.end===n&&e.period===s&&e.utc===a&&e.organization.id===o.id&&e.project.id===t.id&&e.cursor===i||this.remountComponent()}getDefaultState(){return{...super.getDefaultState(),groupHistory:null}}getEndpoints(){const{project:e,rule:t,organization:o,period:r,start:n,end:s,utc:a,cursor:i}=this.props;return[["groupHistory",`/projects/${o.slug}/${e.slug}/rules/${t.id}/group-history/`,{query:{per_page:10,...r&&{statsPeriod:r},start:n,end:s,utc:a,cursor:i}}]]}renderLoading(){return this.renderBody()}renderBody(){const{organization:e,rule:t}=this.props,{loading:o,groupHistory:r,groupHistoryPageLinks:n}=this.state;return(0,E.BX)(c.Fragment,{children:[(0,E.tZ)(ge,{isLoading:o,isEmpty:0===r?.length,emptyMessage:(0,f.t)("No issues exist for the current query."),headers:[(0,f.t)("Issue"),(0,E.tZ)(Ze,{children:(0,f.t)("Alerts")},"alerts"),(0,E.tZ)(Ze,{children:(0,f.t)("Events")},"events"),(0,f.t)("Last Triggered")],children:r?.map((o=>{let{group:r,count:n,lastTriggered:s,eventId:a}=o;const i=(0,pe.FC)(r),{title:l}=(0,pe.YQ)(r);return(0,E.BX)(c.Fragment,{children:[(0,E.BX)(ye,{children:[(0,E.BX)(I.Z,{to:{pathname:`/organizations/${e.slug}/issues/${r.id}/`+(a?`events/${a}`:""),query:{referrer:"alert-rule-issue-list",...t.environment?{environment:t.environment}:{}}},children:[l,":"]}),(0,E.tZ)(ve,{children:i})]}),(0,E.tZ)(Ze,{children:(0,E.tZ)(de.Z,{value:n})}),(0,E.tZ)(Ze,{children:(0,E.tZ)(de.Z,{value:r.count})}),(0,E.tZ)("div",{children:(0,E.tZ)(fe,{date:(0,K.Z)({value:s,fixed:"Mar 16, 2020 9:10:13 AM UTC"}),year:!0,seconds:!0,timeZone:!0})})]},r.id)}))}),(0,E.tZ)(xe,{children:(0,E.tZ)(Se,{pageLinks:n,size:"xs"})})]})}}const he=me,ge=(0,r.Z)(G.KB,{target:"e7abfdl6"})("grid-template-columns:1fr 0.2fr 0.2fr 0.5fr;font-size:",(e=>e.theme.fontSizeMedium),";margin-bottom:",(0,U.D)(1.5),";",(e=>!e.isEmpty&&(0,ie.iv)("&>div{padding:",(0,U.D)(1)," ",(0,U.D)(2),";}","")),";"),Ze=(0,r.Z)("div",{target:"e7abfdl5"})({name:"mnwtso",styles:"text-align:right;font-variant-numeric:tabular-nums"}),fe=(0,r.Z)(ce.Z,{target:"e7abfdl4"})("white-space:nowrap;color:",(e=>e.theme.subText),";"),ye=(0,r.Z)("div",{target:"e7abfdl3"})((e=>e.theme.overflowEllipsis),";display:flex;gap:",(0,U.D)(.5),";min-width:200px;"),ve=(0,r.Z)("span",{target:"e7abfdl2"})((e=>e.theme.overflowEllipsis),";color:",(e=>e.theme.textColor),";"),xe=(0,r.Z)("div",{target:"e7abfdl1"})("display:flex;align-items:center;justify-content:flex-end;margin-bottom:",(0,U.D)(2),";"),Se=(0,r.Z)(ue.Z,{target:"e7abfdl0"})({name:"1i9vogi",styles:"margin-top:0"});var Ee=o("./app/components/avatar/actorAvatar.tsx"),be=o("./app/components/keyValueTable.tsx"),_e=o("./app/components/timeSince.tsx"),Te=o("./app/views/alerts/rules/metric/types.tsx"),Ae=o("./app/views/alerts/utils/constants.tsx"),De=o("./app/views/projectInstall/issueAlertOptions.tsx");function Ne(e){let{condition:t}=e;const o=(0,S.Z)();return Ae.SD.includes(t.id)?t.comparisonType===Te.t6.PERCENT?t.id===De.rq?(0,E.tZ)(c.Fragment,{children:(0,f.t)("Percent of sessions affected by an issue is %s%% higher in %s compared to %s ago",t.value,t.comparisonInterval,t.interval)}):(0,E.tZ)(c.Fragment,{children:(0,f.t)("Number of events in an issue is %s%% higher in %s compared to %s ago",t.value,t.comparisonInterval,t.interval)}):(0,E.tZ)(c.Fragment,{children:(0,f.t)("Number of events in an issue is more than %s in %s",t.value,t.interval)}):t.id===De.FZ&&o.features.includes("escalating-issues-ui")?(0,E.tZ)(c.Fragment,{children:(0,f.t)("The issue changes state from archived to escalating")}):(0,E.tZ)(c.Fragment,{children:t.name})}function Re(e){let{action:t,memberList:o,teams:r}=e;if("Member"===t.targetType){const e=o.find((e=>e.user?.id===`${t.targetIdentifier}`));return(0,E.tZ)(c.Fragment,{children:(0,f.t)("Send a notification to %s",e?.email??(0,f.t)("unknown"))})}if("Team"===t.targetType){const e=r.find((e=>e.id===`${t.targetIdentifier}`));return(0,E.tZ)(c.Fragment,{children:(0,f.t)("Send a notification to #%s",e?.name??(0,f.t)("unknown"))})}if("sentry.integrations.slack.notify_action.SlackNotifyServiceAction"===t.id){const e=t.name.replace(/\(optionally.*\)/,"").replace("and show tags [] in notification","");return(0,E.tZ)(c.Fragment,{children:e})}return(0,E.tZ)(c.Fragment,{children:t.name})}function we(e){let{rule:t,teams:o,projectSlug:r}=e;const n=(0,S.Z)(),{data:s}=(0,M.WE)([`/organizations/${n.slug}/users/`,{query:{projectSlug:r}}],{staleTime:6e4});return(0,E.BX)(G.N,{children:[(0,E.tZ)(Pe,{children:(0,E.BX)(Ue,{children:[(0,E.tZ)(Fe,{children:(0,E.tZ)(Z.g6,{color:"gray200",isCircled:!0,direction:"right",size:"sm"})}),(0,E.BX)(Be,{children:[(0,E.tZ)(Me,{children:(0,f._N)("[when:When] an event is captured [selector]",{when:(0,E.tZ)(Xe,{}),selector:t.conditions.length?(0,f.t)("and %s...",t.actionMatch):""})}),t.conditions.map(((e,t)=>(0,E.tZ)(He,{children:(0,E.tZ)(Ne,{condition:e})},t)))]})]})}),t.filters.length?(0,E.tZ)(Pe,{children:(0,E.BX)(Ue,{children:[(0,E.tZ)(Fe,{children:(0,E.tZ)(Z.g6,{color:"gray200",isCircled:!0,direction:"right",size:"sm"})}),(0,E.BX)(Be,{children:[(0,E.tZ)(Me,{children:(0,f._N)("[if:If] [selector] of these filters match",{if:(0,E.tZ)(Xe,{}),selector:t.filterMatch})}),t.filters.map(((e,t)=>(0,E.tZ)(He,{children:e.time?e.name+"(s)":e.name},t)))]})]})}):null,(0,E.tZ)(Pe,{children:(0,E.BX)(Ue,{children:[(0,E.tZ)(Fe,{children:(0,E.tZ)(Z.g6,{isCircled:!0,color:"gray200",direction:"right",size:"sm"})}),(0,E.BX)("div",{children:[(0,E.tZ)(Me,{children:(0,f._N)("[then:Then] perform these actions",{then:(0,E.tZ)(Xe,{})})}),t.actions.length?t.actions.map(((e,t)=>(0,E.tZ)(He,{children:(0,E.tZ)(Re,{action:e,memberList:s??[],teams:o})},t))):(0,E.tZ)(He,{children:(0,f.t)("Do nothing")})]})]})})]})}function Ie(e){let{rule:t,teams:o,projectSlug:r}=e;const n=t.owner?.split(":")[1],s=n&&{type:"team",id:n,name:""};return(0,E.BX)(c.Fragment,{children:[(0,E.tZ)(Oe,{children:(0,E.BX)(je,{children:[(0,E.tZ)(Le,{noMargin:!0,children:(0,f.t)("Last Triggered")}),(0,E.tZ)(ke,{children:t.lastTriggered?(0,E.tZ)(_e.Z,{date:t.lastTriggered}):(0,f.t)("No alerts triggered")})]})}),(0,E.BX)(Ce,{children:[(0,E.tZ)(Le,{noMargin:!0,children:(0,f.t)("Alert Conditions")}),(0,E.tZ)(we,{rule:t,teams:o,projectSlug:r})]}),(0,E.BX)(Ce,{children:[(0,E.tZ)(Le,{children:(0,f.t)("Alert Rule Details")}),(0,E.BX)(be.v,{children:[(0,E.tZ)(be.G,{keyName:(0,f.t)("Environment"),value:(0,E.tZ)($e,{children:t.environment??"-"})}),t.dateCreated&&(0,E.tZ)(be.G,{keyName:(0,f.t)("Date Created"),value:(0,E.tZ)(_e.Z,{date:t.dateCreated,suffix:(0,f.t)("ago")})}),t.createdBy&&(0,E.tZ)(be.G,{keyName:(0,f.t)("Created By"),value:(0,E.tZ)($e,{children:t.createdBy.name??"-"})}),(0,E.tZ)(be.G,{keyName:(0,f.t)("Team"),value:s?(0,E.tZ)(Ee.Z,{actor:s,size:24}):(0,f.t)("Unassigned")})]})]})]})}Ne.displayName="TextCondition",Re.displayName="TextAction",we.displayName="Conditions",Ie.displayName="Sidebar";const ze=Ie,Ce=(0,r.Z)("div",{target:"e2ynvv912"})("margin-bottom:",(0,U.D)(3),";"),je=(0,r.Z)("div",{target:"e2ynvv911"})({name:"10sya4f",styles:"flex:1;display:flex;flex-direction:column;>*:nth-child(2){flex:1;display:flex;align-items:center;}"}),ke=(0,r.Z)("div",{target:"e2ynvv910"})("position:relative;display:grid;grid-template-columns:auto auto auto;gap:",(0,U.D)(.5),";font-size:",(e=>e.theme.fontSizeLarge),";"),Oe=(0,r.Z)("div",{target:"e2ynvv99"})("height:60px;display:flex;margin-bottom:",(0,U.D)(1.5),";"),Pe=(0,r.Z)("div",{target:"e2ynvv98"})("position:relative;margin-top:",(0,U.D)(4),";:first-child{margin-top:",(0,U.D)(1),";}"),Ue=(0,r.Z)("div",{target:"e2ynvv97"})({name:"bnlinx",styles:"display:flex;align-items:flex-start;flex-grow:1"}),Be=(0,r.Z)("div",{target:"e2ynvv96"})("&::before{content:'';position:absolute;height:100%;top:28px;left:",(0,U.D)(1),";border-right:1px ",(e=>e.theme.gray200)," dashed;}"),Me=(0,r.Z)("div",{target:"e2ynvv95"})("margin-bottom:",(0,U.D)(.5),";font-size:",(e=>e.theme.fontSizeMedium),";font-weight:400;"),Fe=(0,r.Z)("div",{target:"e2ynvv94"})("display:flex;align-items:center;padding:",(0,U.D)(.5)," ",(0,U.D)(1)," ",(0,U.D)(.5)," 0;"),Xe=(0,r.Z)("span",{target:"e2ynvv93"})("display:inline-block;background-color:",(e=>e.theme.purple300),";padding:0 ",(0,U.D)(.75),";border-radius:",(e=>e.theme.borderRadius),";color:",(e=>e.theme.white),";text-transform:uppercase;text-align:center;font-size:",(e=>e.theme.fontSizeSmall),";font-weight:400;line-height:1.5;"),He=(0,r.Z)("span",{target:"e2ynvv92"})("display:block;background-color:",(e=>e.theme.surface200),";padding:0 ",(0,U.D)(.75),";border-radius:",(e=>e.theme.borderRadius),";color:",(e=>e.theme.textColor),";font-size:",(e=>e.theme.fontSizeSmall),";margin-bottom:",(0,U.D)(1),";width:fit-content;font-weight:400;"),Le=(0,r.Z)(V.OT,{target:"e2ynvv91"})("margin-top:",(e=>e.noMargin?0:(0,U.D)(2)),";margin-bottom:",(e=>e.noMargin?0:(0,U.D)(1)),";"),$e=(0,r.Z)("div",{target:"e2ynvv90"})((e=>e.theme.overflowEllipsis),";"),Ye=["pageStatsPeriod","pageStart","pageEnd","pageUtc","cursor"],qe=e=>{let{orgSlug:t,projectSlug:o,ruleId:r}=e;return[`/projects/${t}/${o}/rules/${r}/`,{query:{expand:"lastTriggered"}}]};function Ve(e){let{params:t,location:o,router:r}=e;const n=(0,M.NL)(),a=(0,S.Z)(),{projects:c,fetching:u}=(0,H.Z)(),p=c.find((e=>{let{slug:o}=e;return o===t.projectId})),{projectId:g,ruleId:v}=t,{data:x,isLoading:b,isError:T}=(0,M.WE)(qe({orgSlug:a.slug,projectSlug:g,ruleId:v}),{staleTime:0});function A(e){return r.push({...o,query:{...o.query,...s()(e,Ye)}})}function z(e){let{snooze:t,snoozeCreatedBy:o,snoozeForEveryone:r}=e;(0,M.XN)(n,qe({orgSlug:a.slug,projectSlug:g,ruleId:v}),(e=>({...e,snooze:t,snoozeCreatedBy:o,snoozeForEveryone:r})))}if((0,F.Z)("issue_alert_rule_details.viewed","Issue Alert Rule Details: Viewed"),(0,X.Z)({rule_id:parseInt(t.ruleId,10)}),b||u)return(0,E.tZ)(w.uT,{children:(0,E.tZ)(w.or,{fullWidth:!0,children:(0,E.tZ)(C.Z,{})})});if(!x||T)return(0,E.tZ)(Ke,{message:(0,f.t)("The alert rule you were looking for was not found.")});if(!p)return(0,E.tZ)(Ke,{message:(0,f.t)("The project you were looking for was not found.")});const O=a.features.includes("mute-alerts"),U=x.snooze,Y=function(e){switch(e.actions.filter((e=>"sentry.mail.actions.NotifyEmailAction"===e.id)).length){case e.actions.length:return y.IA.AllDefault;case 0:return y.IA.NoDefault;default:return y.IA.SomeDefault}}(x),q={pathname:`/organizations/${a.slug}/alerts/new/issue/`,query:{project:p.slug,duplicateRuleId:x.id,createFromDuplicate:!0,referrer:"issue_rule_details"}},{period:V,start:G,end:W,utc:K}=function(){const e=o?.query??{},{start:t,end:r,statsPeriod:n,utc:s}=(0,k.fK)(e,{allowEmptyPeriod:!0,allowAbsoluteDatetime:!0,allowAbsolutePageDatetime:!0});if(!n&&!t&&!r)return{period:$.N7};if(n)return{period:n};const a="true"===s;return t&&r?a?{start:i().utc(t).format(),end:i().utc(r).format(),utc:a}:{start:i()(t).utc().format(),end:i()(r).utc().format(),utc:a}:{period:$.N7}}(),{cursor:Q}=o.query;return(0,E.BX)(j.Z,{skipInitializeUrlParams:!0,skipLoadLastUsed:!0,shouldForceProject:!0,forceProject:p,children:[(0,E.tZ)(P.Z,{title:x.name,orgSlug:a.slug,projectSlug:g}),(0,E.BX)(w.h4,{children:[(0,E.BX)(w.oB,{children:[(0,E.tZ)(D.Z,{crumbs:[{label:(0,f.t)("Alerts"),to:`/organizations/${a.slug}/alerts/rules/`},{label:x.name,to:null}]}),(0,E.BX)(w.Dx,{children:[(0,E.tZ)(R.Z,{project:p,avatarSize:28,hideName:!0,avatarProps:{hasTooltip:!0,tooltip:p.slug}}),x.name]})]}),(0,E.tZ)(w.kP,{children:(0,E.BX)(h.ZP,{gap:1,children:[O&&(0,E.tZ)(l.Z,{access:["alerts:write"],children:e=>{let{hasAccess:t}=e;return(0,E.tZ)(_,{isSnoozed:U,onSnooze:z,ruleId:x.id,projectSlug:g,ruleActionCategory:Y,hasAccess:t})}}),(0,E.tZ)(m.zx,{size:"sm",icon:(0,E.tZ)(Z.vU,{}),to:q,children:(0,f.t)("Duplicate")}),(0,E.tZ)(m.zx,{size:"sm",icon:(0,E.tZ)(Z.yl,{}),to:`/organizations/${a.slug}/alerts/rules/${g}/${v}/`,onClick:()=>(0,B.Gi)("issue_alert_rule_details.edit_clicked",{organization:a,rule_id:parseInt(v,10)}),children:(0,f.t)("Edit Rule")})]})})]}),(0,E.BX)(w.uT,{children:[(0,E.BX)(w.or,{children:[function(){const e=(0,L.Y)(x);return(e.conditionIndices||e.filterIndices)&&a.features.includes("issue-alert-incompatible-rules")?(0,E.tZ)(d.bZ,{type:"error",showIcon:!0,children:(0,f._N)("The conditions in this alert rule conflict and might not be working properly. [link:Edit alert rule]",{link:(0,E.tZ)(I.Z,{to:`/organizations/${a.slug}/alerts/rules/${g}/${v}/`})})}):null}(),O&&U&&(0,E.tZ)(d.bZ,{showIcon:!0,children:Y===y.IA.NoDefault?(0,f._N)("[creator] muted this alert so these notifications won't be sent in the future.",{creator:x.snoozeCreatedBy}):(0,f._N)("[creator] muted this alert[forEveryone]so you won't get these notifications in the future.",{creator:x.snoozeCreatedBy,forEveryone:x.snoozeForEveryone?" for everyone ":" "})}),(0,E.tZ)(We,{organization:a,relative:V??"",start:G??null,end:W??null,utc:K??null,onUpdate:function(e){const{start:t,end:o,relative:r,utc:n}=e;if(t&&o){const e=n?i().utc:i();return A({pageStatsPeriod:void 0,pageStart:e(t).format(),pageEnd:e(o).format(),pageUtc:n??void 0,cursor:void 0})}return A({pageStatsPeriod:r||void 0,pageStart:void 0,pageEnd:void 0,pageUtc:void 0,cursor:void 0})}}),(0,E.tZ)(N.Z,{children:(0,E.tZ)(ee,{project:p,rule:x,period:V??"",start:G??null,end:W??null,utc:K??null})}),(0,E.tZ)(he,{organization:a,project:p,rule:x,period:V??"",start:G??null,end:W??null,utc:K??null,cursor:Q})]}),(0,E.tZ)(w.MF,{children:(0,E.tZ)(ze,{rule:x,projectSlug:p.slug,teams:p.teams})})]})]})}Ve.displayName="AlertRuleDetails";const Ge=Ve,We=(0,r.Z)(O.Z,{target:"e1amk1uy1"})("margin-bottom:",(0,U.D)(2),";"),Ke=(0,r.Z)(z.Z,{target:"e1amk1uy0"})("margin:",(0,U.D)(2),";")},"./app/views/alerts/rules/metric/details/constants.tsx":(e,t,o)=>{o.d(t,{N7:()=>a,U2:()=>c,UC:()=>d,e2:()=>l,ud:()=>s,v3:()=>i});var r=o("./app/locale.tsx"),n=o("./app/views/alerts/rules/metric/types.tsx");const s={[n.XH.SIX_HOURS]:(0,r.t)("Last 6 hours"),[n.XH.ONE_DAY]:(0,r.t)("Last 24 hours"),[n.XH.THREE_DAYS]:(0,r.t)("Last 3 days"),[n.XH.SEVEN_DAYS]:(0,r.t)("Last 7 days")},a="7d",i=[{label:(0,r.t)("Last 6 hours"),value:n.XH.SIX_HOURS},{label:(0,r.t)("Last 24 hours"),value:n.XH.ONE_DAY},{label:(0,r.t)("Last 3 days"),value:n.XH.THREE_DAYS},{label:(0,r.t)("Last 7 days"),value:n.XH.SEVEN_DAYS},{label:(0,r.t)("Last 14 days"),value:n.XH.FOURTEEN_DAYS}],l={[n.XH.SIX_HOURS]:6*n.Tb.ONE_HOUR*60*1e3,[n.XH.ONE_DAY]:60*n.Tb.ONE_DAY*1e3,[n.XH.THREE_DAYS]:3*n.Tb.ONE_DAY*60*1e3,[n.XH.SEVEN_DAYS]:7*n.Tb.ONE_DAY*60*1e3,[n.XH.FOURTEEN_DAYS]:14*n.Tb.ONE_DAY*60*1e3},d=(n.XH.FOURTEEN_DAYS,1e4),c=150},"./app/views/alerts/rules/metric/types.tsx":(e,t,o)=>{o.d(t,{F4:()=>s,GM:()=>l,LO:()=>h,Lm:()=>g,Tb:()=>p,Us:()=>m,XH:()=>u,Yh:()=>d,hd:()=>Z,lK:()=>c,lT:()=>n,qz:()=>i,t6:()=>a});var r=o("./app/locale.tsx");let n,s,a,i,l,d,c,u,p,m;!function(e){e[e.ABOVE=0]="ABOVE",e[e.BELOW=1]="BELOW"}(n||(n={})),function(e){e.CRITICAL="critical",e.WARNING="warning",e.RESOLVE="resolve"}(s||(s={})),function(e){e.COUNT="count",e.CHANGE="change",e.PERCENT="percent"}(a||(a={})),function(e){e.ERRORS="events",e.TRANSACTIONS="transactions",e.GENERIC_METRICS="generic_metrics",e.SESSIONS="sessions",e.METRICS="metrics"}(i||(i={})),function(e){e.DEFAULT="default",e.ERROR="error",e.TRANSACTION="transaction",e.USER="user",e.SESSION="session"}(l||(l={})),function(e){e.ERROR_DEFAULT="error_default",e.DEFAULT="default",e.ERROR="error",e.TRANSACTION="transaction"}(d||(d={})),function(e){e.CRASH_FREE_SESSIONS="percentage(sessions_crashed, sessions) AS _crash_rate_alert_aggregate",e.CRASH_FREE_USERS="percentage(users_crashed, users) AS _crash_rate_alert_aggregate"}(c||(c={})),function(e){e.SIX_HOURS="6h",e.ONE_DAY="1d",e.THREE_DAYS="3d",e.SEVEN_DAYS="10000m",e.FOURTEEN_DAYS="14d",e.THIRTY_DAYS="30d"}(u||(u={})),function(e){e[e.ONE_MINUTE=1]="ONE_MINUTE",e[e.FIVE_MINUTES=5]="FIVE_MINUTES",e[e.TEN_MINUTES=10]="TEN_MINUTES",e[e.FIFTEEN_MINUTES=15]="FIFTEEN_MINUTES",e[e.THIRTY_MINUTES=30]="THIRTY_MINUTES",e[e.ONE_HOUR=60]="ONE_HOUR",e[e.TWO_HOURS=120]="TWO_HOURS",e[e.FOUR_HOURS=240]="FOUR_HOURS",e[e.ONE_DAY=1440]="ONE_DAY"}(p||(p={})),function(e){e.EMAIL="email",e.SLACK="slack",e.PAGERDUTY="pagerduty",e.MSTEAMS="msteams",e.SENTRY_APP="sentry_app"}(m||(m={}));const h={[m.EMAIL]:(0,r.t)("Emaiâ€‹l"),[m.SLACK]:(0,r.t)("Slack"),[m.PAGERDUTY]:(0,r.t)("Pagerduty"),[m.MSTEAMS]:(0,r.t)("MS Teams"),[m.SENTRY_APP]:(0,r.t)("Notification")};let g;!function(e){e.SPECIFIC="specific",e.USER="user",e.TEAM="team",e.SENTRY_APP="sentry_app"}(g||(g={}));const Z={[g.USER]:(0,r.t)("Member"),[g.TEAM]:(0,r.t)("Team")}}}]);
//# sourceMappingURL=../sourcemaps/app_components_loadingMask_tsx-app_views_alerts_rules_issue_details_ruleDetails_tsx.cf4165226ac97ff528bd82ee886b9905.js.map