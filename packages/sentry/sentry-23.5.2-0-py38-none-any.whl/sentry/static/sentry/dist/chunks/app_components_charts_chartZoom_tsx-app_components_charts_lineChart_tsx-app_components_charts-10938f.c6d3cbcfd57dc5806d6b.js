"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_charts_chartZoom_tsx-app_components_charts_lineChart_tsx-app_components_charts-10938f"],{"./app/components/charts/chartZoom.tsx":(e,t,o)=>{o.d(t,{Z:()=>x});var n=o("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(o("../node_modules/core-js/modules/es.array.push.js"),o("../node_modules/react/index.js")),i=o("../node_modules/moment/moment.js"),r=o.n(i),a=o("../node_modules/query-string/index.js"),l=o("./app/actionCreators/pageFilters.tsx"),d=o("./app/components/charts/components/dataZoomInside.tsx");o("../node_modules/echarts/lib/component/dataZoomSlider.js");const c={realtime:!1,showDetail:!1,left:0,right:6,bottom:8};function p(e){return e&&Array.isArray(e)?e:[{...c,...e}]}var u=o("./app/components/charts/components/toolBox.tsx"),m=o("./app/utils/callIfFunction.tsx"),h=o("./app/utils/dates.tsx");const g=e=>e?r().utc(e).format(r().HTML5_FMT.DATETIME_LOCAL_SECONDS):null;class y extends s.Component{constructor(e){var t;super(e),t=this,(0,n.Z)(this,"history",void 0),(0,n.Z)(this,"currentPeriod",void 0),(0,n.Z)(this,"zooming",null),(0,n.Z)(this,"saveCurrentPeriod",(e=>{this.currentPeriod={period:e.period,start:g(e.start),end:g(e.end)}})),(0,n.Z)(this,"setPeriod",(function(e){let{period:o,start:n,end:s}=e,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{router:r,onZoom:d,usePageDate:c}=t.props,p=g(n),u=g(s);i&&t.history.push(t.currentPeriod),d?.({period:o,start:p,end:u}),t.zooming=()=>{if(c&&r){const e={...r.location.query,pageStart:n?(0,h.v5)(n):void 0,pageEnd:s?(0,h.v5)(s):void 0,pageStatsPeriod:o??void 0};a.stringify(e)!==a.stringify(r.location.query)&&r.push({pathname:r.location.pathname,query:e})}else(0,l.dR)({period:o,start:p?(0,h.hC)(p):p,end:u?(0,h.hC)(u):u},r,{skipDesyncUpdate:!0});t.saveCurrentPeriod({period:o,start:n,end:s})}})),(0,n.Z)(this,"handleChartReady",(e=>{this.props.onChartReady?.(e)})),(0,n.Z)(this,"handleZoomRestore",((e,t)=>{this.history.length&&(this.setPeriod(this.history[0]),this.history=[],this.props.onRestore?.(e,t))})),(0,n.Z)(this,"handleDataZoom",((e,t)=>{const o=t.getModel(),{startValue:n,endValue:s}=o._payload.batch[0];if(null===n&&null===s){const e=this.history.pop();if(!e)return;this.setPeriod(e)}else{const e=r().utc(n),t=r().utc(s);this.setPeriod({period:null,start:e,end:t},!0)}this.props.onDataZoom?.(e,t)})),(0,n.Z)(this,"handleChartFinished",((e,t)=>{"function"==typeof this.zooming&&(this.zooming(),this.zooming=null);const o=t._componentsViews?.find((e=>e._features&&e._features.dataZoom));o&&!o._features.dataZoom._isZoomActive&&t.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}),(0,m.g)(this.props.onFinished)})),this.history=[],this.saveCurrentPeriod(e)}componentDidUpdate(){this.props.disabled||this.saveCurrentPeriod(this.props)}render(){const{utc:e,start:t,end:o,disabled:n,children:s,xAxisIndex:i,router:r,onZoom:a,onRestore:l,onChartReady:c,onDataZoom:m,onFinished:g,showSlider:y,chartZoomOptions:x,...v}=this.props,f=e??void 0,b=t?(0,h.hC)(t):void 0,Z=o?(0,h.hC)(o):void 0;return s(n?{utc:f,start:b,end:Z,...v}:{isGroupedByDate:!0,onChartReady:this.handleChartReady,utc:f,start:b,end:Z,dataZoom:y?[...p({xAxisIndex:i,...x}),...(0,d.Z)({xAxisIndex:i,...x})]:(0,d.Z)({xAxisIndex:i,...x}),showTimeInTooltip:!0,toolBox:(0,u.Z)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom,onFinished:this.handleChartFinished,onRestore:this.handleZoomRestore,...v})}}y.displayName="ChartZoom";const x=y},"./app/components/charts/components/dataZoomInside.tsx":(e,t,o)=>{o.d(t,{Z:()=>s}),o("../node_modules/echarts/lib/component/dataZoomInside.js");const n={type:"inside",zoomOnMouseWheel:!1,zoomLock:!0,throttle:50};function s(e){return e&&Array.isArray(e)?e:[{...n,...e}]}},"./app/components/charts/components/toolBox.tsx":(e,t,o)=>{function n(){let{dataZoom:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e?{dataZoom:{yAxisIndex:"none",title:{zoom:"zoom",back:"undo"},...e}}:{},...t}}function s(e,t){return{right:0,top:0,itemSize:16,z:-1,feature:n(t),...e}}o.d(t,{Z:()=>s})},"./app/components/charts/components/visualMap.tsx":(e,t,o)=>{function n(e){return e}o.d(t,{Z:()=>n}),o("../node_modules/echarts/lib/component/visualMap.js")},"./app/components/charts/lineChart.tsx":(e,t,o)=>{o.d(t,{w:()=>r});var n=o("./app/components/charts/series/lineSeries.tsx"),s=o("./app/components/charts/baseChart.tsx"),i=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){let{series:t,seriesOptions:o,...r}=e;return(0,i.tZ)(s.Z,{...r,series:t.map((e=>{let{seriesName:t,data:s,dataArray:i,...r}=e;return(0,n.Z)({...o,...r,name:t,data:i||s?.map((e=>{let{value:t,name:o}=e;return[o,t]})),animation:!1,animationThreshold:1,animationDuration:0})}))})}r.displayName="LineChart"},"./app/components/charts/transitionChart.tsx":(e,t,o)=>{o.d(t,{Z:()=>l});var n=o("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=o("../node_modules/react/index.js"),i=o("./app/components/charts/loadingPanel.tsx"),r=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class a extends s.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{prevReloading:this.props.reloading,prevLoading:this.props.loading,key:1})}static getDerivedStateFromProps(e,t){const o=t.prevReloading,n=e.reloading,s=t.prevLoading,i=e.loading;return s!==i?{prevReloading:n,prevLoading:i,key:t.key+1}:i?{prevReloading:n,prevLoading:i,key:t.key}:o&&!n?{prevReloading:n,prevLoading:i,key:t.key+1}:{prevReloading:n,prevLoading:i,key:t.key}}render(){const{height:e,loading:t,reloading:o}=this.props;return t&&!o?(0,r.tZ)(i.Z,{height:e,"data-test-id":"events-request-loading"}):(0,r.tZ)(s.Fragment,{children:this.props.children},String(this.state.key))}}a.displayName="TransitionChart",(0,n.Z)(a,"defaultProps",{height:"200px"});const l=a},"./app/components/charts/transparentLoadingMask.tsx":(e,t,o)=>{o.d(t,{Z:()=>r});var n=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=o("./app/components/loadingMask.tsx"),i=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const r=(0,n.Z)((e=>{let{className:t,visible:o,children:n,...r}=e;const a=o?{...r,"data-test-id":"loading-placeholder"}:r;return(0,i.tZ)(s.Z,{className:t,...a,children:n})}),{target:"e1t3xibm0"})((e=>!e.visible&&"display: none;"),";opacity:0.4;z-index:1;")},"./app/components/charts/worldMapChart.tsx":(e,t,o)=>{o.d(t,{y:()=>x});var n=o("../node_modules/react/index.js"),s=o("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),i=o("../node_modules/echarts/lib/core/echarts.js"),r=o("../node_modules/lodash/max.js"),a=o.n(r),l=o("./app/components/charts/components/visualMap.tsx");o("../node_modules/echarts/lib/chart/map.js");var d=o("./app/components/charts/baseChart.tsx"),c=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const p=1.3,u=1.1,m=.9,h=10.97,g=-12,y=9.71;function x(e){let{series:t,seriesOptions:r,fromDiscover:x,fromDiscoverQueryList:v,...f}=e;const b=(0,s.u)(),[Z,w]=(0,n.useState)((()=>({countryToCodeMap:null,map:null,codeToCountryMap:null})));if((0,n.useEffect)((()=>{let e=!1;return e||async function(){try{const[e,t]=await Promise.all([o.e("app_data_countryCodesMap_tsx").then(o.bind(o,"./app/data/countryCodesMap.tsx")),o.e("app_data_world_json").then(o.t.bind(o,"./app/data/world.json",19))]),n=e.default,s=t.default;i.je?.("sentryWorld",s);const r={};for(const e in s)r[n[e]]=e;w({countryToCodeMap:n,map:s,codeToCountryMap:r})}catch{}}(),()=>{e=!0}}),[]),null===Z.countryToCodeMap||null===Z.map)return null;const C=t.map((e=>{let{seriesName:t,data:o,...n}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{map:""};return{roam:!0,...e,emphasis:{label:{show:!1},...e.emphasis},type:"map"}}({...r,...n,map:"sentryWorld",name:t,nameMap:Z.countryToCodeMap??void 0,aspectScale:.85,zoom:x?u:v?m:p,center:[h,v?g:y],itemStyle:{areaColor:b.gray200,borderColor:b.backgroundSecondary},emphasis:{itemStyle:{areaColor:b.pink300},label:{show:!1}},data:o,silent:v,roam:!v})})),S=a()(t.map((e=>{let{data:t}=e;return a()(t.map((e=>{let{value:t}=e;return t})))})))||1;return(0,c.tZ)(d.Z,{options:{backgroundColor:v?void 0:b.background,visualMap:[(0,l.Z)({show:!v,left:x?void 0:"right",right:x?5:void 0,min:0,max:S,inRange:{color:[b.purple200,b.purple300]},text:["High","Low"],textStyle:{color:b.textColor},calculable:!1})]},...f,yAxis:null,xAxis:null,series:C,tooltip:{formatter:e=>{const{marker:t,name:o,value:n}=Array.isArray(e)?e[0]:e;if(isNaN(n))return"";const s="number"==typeof n?n.toLocaleString():"";return[`<div class="tooltip-series tooltip-series-solo">\n               <div><span class="tooltip-label">${t} <strong>${Z.codeToCountryMap?.[o]||o}</strong></span> ${s}</div>\n            </div>`,'<div class="tooltip-arrow"></div>'].join("")}},height:x?400:void 0})}x.displayName="WorldMapChart"},"./app/components/dataExport.tsx":(e,t,o)=>{o.d(t,{ZP:()=>g,tD:()=>m});var n=o("../node_modules/react/index.js"),s=o("../node_modules/lodash/debounce.js"),i=o.n(s),r=o("./app/actionCreators/indicator.tsx"),a=o("./app/components/acl/feature.tsx"),l=o("./app/components/button.tsx"),d=o("./app/locale.tsx"),c=o("./app/utils/withApi.tsx"),p=o("./app/utils/withOrganization.tsx"),u=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let m;function h(e){let{api:t,children:o,disabled:s,organization:c,payload:p,icon:m}=e;const h=(0,n.useRef)(!1),[g,y]=(0,n.useState)(!1);(0,n.useEffect)((()=>{g&&y(!1)}),[p.queryType,p.queryInfo]),(0,n.useEffect)((()=>()=>{h.current=!0}),[]);const x=(0,n.useCallback)((()=>{y(!0),t.requestPromise(`/organizations/${c.slug}/data-export/`,{includeAllArgs:!0,method:"POST",data:{query_type:p.queryType,query_info:p.queryInfo}}).then((e=>{let[t,o,n]=e;h.current||(0,r.S9)(201===n?.status?(0,d.t)("Sit tight. We'll shoot you an email when your data is ready for download."):(0,d.t)("It looks like we're already working on it. Sit tight, we'll email you."))})).catch((e=>{if(h.current)return;const t=e?.responseJSON?.detail??(0,d.t)("We tried our hardest, but we couldn't export your data. Give it another go.");(0,r.Iw)(t),y(!1)}))}),[p.queryInfo,p.queryType,c.slug,t]);return(0,u.tZ)(a.Z,{features:["organizations:discover-query"],children:g?(0,u.tZ)(l.zx,{size:"sm",priority:"default",title:(0,d.t)("You can get on with your life. We'll email you when your data's ready."),disabled:!0,icon:m,children:(0,d.t)("We're working on it...")}):(0,u.tZ)(l.zx,{onClick:i()(x,500),disabled:s||!1,size:"sm",priority:"default",title:(0,d.t)("Put your data to work. Start your export and we'll email you when it's finished."),icon:m,children:o||(0,d.t)("Export All to CSV")})})}!function(e){e.IssuesByTag="Issues-by-Tag",e.Discover="Discover"}(m||(m={})),h.displayName="DataExport";const g=(0,c.Z)((0,p.Z)(h))},"./app/components/gridEditable/sortLink.tsx":(e,t,o)=>{o.d(t,{Z:()=>u});var n=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=o("../node_modules/react-router/es/index.js"),i=o("./app/components/links/link.tsx"),r=o("./app/icons/index.tsx"),a=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){let{align:t,title:o,canSort:n,generateSortLink:i,onClick:r,direction:l,replace:u}=e;const m=i();if(!m||!n)return(0,a.tZ)(c,{align:t,children:o});const h=l?(0,a.tZ)(p,{size:"xs",direction:"desc"===l?"down":"up"}):null;return(0,a.BX)(d,{align:t,to:m,onClick:e=>{u&&(e.preventDefault(),s.browserHistory.replace(m)),r?.(e)},children:[o," ",h]})}l.displayName="SortLink";const d=(0,n.Z)((e=>{const{align:t,css:o,...n}=e;return(0,a.tZ)(i.Z,{...n})}),{target:"esdhr0u2"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(e=>e.align?`text-align: ${e.align};`:""),";"),c=(0,n.Z)("div",{target:"esdhr0u1"})("display:block;width:100%;white-space:nowrap;",(e=>e.align?`text-align: ${e.align};`:""),";"),p=(0,n.Z)(r.CC,{target:"esdhr0u0"})({name:"40f4ru",styles:"vertical-align:top"}),u=l},"./app/components/replays/replayIdCountProvider.tsx":(e,t,o)=>{o.d(t,{Z:()=>l});var n=o("../node_modules/react/index.js"),s=o("./app/components/replays/replayCountContext.tsx"),i=o("./app/components/replays/useReplaysCount.tsx"),r=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{children:t,organization:o,replayIds:a}=e;const l=(0,n.useMemo)((()=>a?.map(String)?.filter(Boolean)||[]),[a]),d=(0,i.Z)({replayIds:(c=l,Array.from(new Set(c))),organization:o});var c;return(0,r.tZ)(s.Z.Provider,{value:d,children:t})}a.displayName="ReplayIdCountProvider";const l=a},"./app/utils/customMeasurements/customMeasurementsContext.tsx":(e,t,o)=>{o.d(t,{z:()=>n});const n=(0,o("../node_modules/react/index.js").createContext)(void 0)},"./app/utils/discover/viewReplayLink.tsx":(e,t,o)=>{o.d(t,{Z:()=>m});var n=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=o("../node_modules/react/index.js"),i=o("./app/components/links/link.tsx"),r=o("./app/components/replays/replayCountContext.tsx"),a=o("./app/components/tooltip.tsx"),l=o("./app/locale.tsx"),d=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c(e){let{children:t,replayId:o,to:n}=e;return((0,s.useContext)(r.Z)[o]||0)<1?(0,d.tZ)(a.u,{title:(0,l.t)("This replay may have been rate limited or deleted."),children:(0,d.tZ)(u,{children:(0,l.t)("(missing)")})}):(0,d.tZ)(a.u,{title:(0,l.t)("View Replay"),children:(0,d.tZ)(p,{to:n,children:t})})}c.displayName="ViewReplayLink";const p=(0,n.Z)(i.Z,{target:"ed9jpq61"})({name:"50z4ny",styles:"& div{display:inline;}"}),u=(0,n.Z)("span",{target:"ed9jpq60"})("color:",(e=>e.theme.gray300),";"),m=c},"./app/utils/useTags.tsx":(e,t,o)=>{o.d(t,{Z:()=>i});var n=o("./app/stores/tagStore.tsx"),s=o("./app/stores/useLegacyStore.tsx");const i=function(){return(0,s.X)(n.Z)}},"./app/utils/userselect.tsx":(e,t,o)=>{o.d(t,{l:()=>n});const n=e=>{const t={userSelect:document.body.style.userSelect,MozUserSelect:document.body.style.MozUserSelect,msUserSelect:document.body.style.msUserSelect,webkitUserSelect:document.body.style.webkitUserSelect};return document.body.style.userSelect=e.userSelect||"",document.body.style.MozUserSelect=e.MozUserSelect||"",document.body.style.msUserSelect=e.msUserSelect||"",document.body.style.webkitUserSelect=e.webkitUserSelect||"",t}},"./app/views/dashboards/widgetBuilder/issueWidget/fields.tsx":(e,t,o)=>{let n;o.d(t,{$L:()=>s,Sh:()=>n,kh:()=>i}),function(e){e.ASSIGNEE="assignee",e.TITLE="title",e.ISSUE="issue",e.LEVEL="level",e.STATUS="status",e.PLATFORM="platform",e.IS_BOOKMARKED="isBookmarked",e.IS_SUBSCRIBED="isSubscribed",e.IS_HANDLED="isHandled",e.LAST_SEEN="lastSeen",e.FIRST_SEEN="firstSeen",e.EVENTS="events",e.USERS="users",e.LIFETIME_EVENTS="lifetimeEvents",e.LIFETIME_USERS="lifetimeUsers",e.PROJECT="project",e.LINKS="links"}(n||(n={}));const s={[n.ASSIGNEE]:"string",[n.TITLE]:"string",[n.ISSUE]:"string",[n.LEVEL]:"string",[n.STATUS]:"string",[n.PLATFORM]:"string",[n.IS_BOOKMARKED]:"boolean",[n.IS_SUBSCRIBED]:"boolean",[n.IS_HANDLED]:"boolean",[n.LAST_SEEN]:"date",[n.FIRST_SEEN]:"date",[n.EVENTS]:"string",[n.USERS]:"string",[n.LIFETIME_EVENTS]:"string",[n.LIFETIME_USERS]:"string",[n.PROJECT]:"string",[n.LINKS]:"string"},i={[n.LIFETIME_EVENTS]:"Lifetime Events",[n.LIFETIME_USERS]:"Lifetime Users"}},"./app/views/discover/table/columnEditCollection.tsx":(e,t,o)=>{o.d(t,{Z:()=>F});var n=o("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=o("../node_modules/react/index.js"),r=o("../node_modules/react-dom/profiling.js"),a=o("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),l=o("./app/components/arithmeticInput/parser.tsx"),d=o("./app/components/button.tsx"),c=o("./app/components/buttonBar.tsx"),p=o("./app/components/charts/styles.tsx"),u=o("./app/components/input.tsx"),m=o("./app/components/performance/waterfall/utils.tsx"),h=o("./app/icons/index.tsx"),g=o("./app/locale.tsx"),y=o("./app/styles/space.tsx"),x=o("./app/utils/analytics.tsx"),v=o("./app/utils/discover/fields.tsx"),f=o("./app/utils/theme.tsx");function b(e,t){const o="nativeEvent"in e?e.nativeEvent:e;return window.TouchEvent&&o instanceof TouchEvent?o.targetTouches[0][t]:o instanceof MouseEvent?o[t]:0}var Z=o("./app/utils/userselect.tsx"),w=o("./app/views/dashboards/types.tsx"),C=o("./app/views/dashboards/widgetBuilder/issueWidget/fields.tsx"),S=o("./app/views/dashboards/widgetBuilder/releaseWidget/fields.tsx"),E=o("./app/views/discover/table/queryField.tsx"),k=o("./app/views/discover/table/types.tsx"),T=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const D="draggable-item";var _;!function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"}(_||(_={}));class I extends i.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{isDragging:!1,draggingIndex:void 0,draggingTargetIndex:void 0,draggingGrabbedOffset:void 0,error:new Map,left:void 0,top:void 0}),(0,n.Z)(this,"previousUserSelect",null),(0,n.Z)(this,"portal",null),(0,n.Z)(this,"dragGhostRef",(0,i.createRef)()),(0,n.Z)(this,"handleAddColumn",(()=>{this.props.onChange([...this.props.columns,{kind:"field",field:""}])})),(0,n.Z)(this,"handleAddEquation",(()=>{const{organization:e}=this.props,t={kind:k.L.EQUATION,field:""};(0,x.Gi)("discover_v2.add_equation",{organization:e}),this.props.onChange([...this.props.columns,t])})),(0,n.Z)(this,"handleUpdateColumn",((e,t)=>{const o=[...this.props.columns];"equation"===t.kind?this.setState((o=>{const n=new Map(o.error);return n.set(e,(0,l.W9)(t.field).error),{...o,error:n}})):this.updateEquationFields(o,e,t),o.splice(e,1,t),this.props.onChange(o)})),(0,n.Z)(this,"updateEquationFields",((e,t,o)=>{const n=e[t],s=(0,v.sN)(e[t]),i=(0,v.sN)(o);if((0,v.el)(o)&&!(0,v.bv)(e,n))for(let t=0;t<e.length;t++){const o=e[t];if("equation"===o.kind){const r=(0,l.W9)(o.field);let a="",d=0;const c="function"===n.kind?r.tc.functions:r.tc.fields;for(const e of c)e.term===s&&d!==e.location.end.offset&&(a+=o.field.substring(d,e.location.start.offset)+i,d=e.location.end.offset);a+=o.field.substring(d),e[t]={kind:"equation",field:a,alias:e[t].alias}}}})),(0,n.Z)(this,"onDragMove",(e=>{const{isDragging:t,draggingTargetIndex:o,draggingGrabbedOffset:n}=this.state;if(!t||!["mousemove","touchmove"].includes(e.type))return;e.preventDefault(),e.stopPropagation();const s=b(e,"pageX"),i=b(e,"pageY"),r=n?.x??0,a=n?.y??0;if(this.dragGhostRef.current){const e=this.dragGhostRef.current;e.style.left=s-r+"px",e.style.top=i-a+"px"}const l=document.querySelectorAll(`.${D}`),d=Array.from(l).findIndex((e=>{const t=e.getBoundingClientRect(),o=i,n=window.scrollY+t.top,s=window.scrollY+t.top+t.height;return o>=n&&o<=s}));d>=0&&d!==o&&this.setState({draggingTargetIndex:d})})),(0,n.Z)(this,"isFixedIssueColumn",(e=>{const{source:t,columns:o}=this.props,n=o[e];return o.filter((e=>"field"===e.kind&&e.field===C.Sh.ISSUE)).length<=1&&t===w.l9.ISSUE&&"field"===n.kind&&n.field===C.Sh.ISSUE})),(0,n.Z)(this,"isRemainingReleaseHealthAggregate",(e=>{const{source:t,columns:o}=this.props,n=o[e];return o.filter((e=>e.kind===k.L.FUNCTION)).length<=1&&t===w.l9.RELEASE&&n.kind===k.L.FUNCTION})),(0,n.Z)(this,"onDragEnd",(e=>{if(!this.state.isDragging||!["mouseup","touchend"].includes(e.type))return;const t=this.state.draggingIndex,o=this.state.draggingTargetIndex;if("number"!=typeof t||"number"!=typeof o)return;this.cleanUpListeners(),this.previousUserSelect&&((0,Z.l)(this.previousUserSelect),this.previousUserSelect=null);const n=[...this.props.columns],s=n.splice(t,1);n.splice(o,0,s[0]),this.checkColumnErrors(n),this.props.onChange(n),this.setState({isDragging:!1,left:void 0,top:void 0,draggingIndex:void 0,draggingTargetIndex:void 0,draggingGrabbedOffset:void 0})}))}componentDidMount(){if(!this.portal){const e=document.createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.zIndex=String(f.ZP.zIndex.modal),this.portal=e,document.body.appendChild(this.portal)}this.checkColumnErrors(this.props.columns)}componentWillUnmount(){this.portal&&document.body.removeChild(this.portal),this.cleanUpListeners()}checkColumnErrors(e){const t=new Map;for(let o=0;o<e.length;o+=1){const n=e[o];if("equation"===n.kind){const e=(0,l.W9)(n.field);e.error&&t.set(o,e.error)}}this.setState({error:t})}keyForColumn(e,t){return"function"===e.kind?[...e.function,t].join(":"):[...e.field,t].join(":")}cleanUpListeners(){this.state.isDragging&&(window.removeEventListener("mousemove",this.onDragMove),window.removeEventListener("touchmove",this.onDragMove),window.removeEventListener("mouseup",this.onDragEnd),window.removeEventListener("touchend",this.onDragEnd))}removeColumn(e){const t=[...this.props.columns];t.splice(e,1),this.checkColumnErrors(t),this.props.onChange(t)}startDrag(e,t){if(this.state.isDragging||!["mousedown","touchstart"].includes(e.type))return;e.preventDefault(),e.stopPropagation();const o=b(e,"pageY"),n=b(e,"pageX"),s=Array.from(document.querySelectorAll(`.${D}`)).find((t=>t.contains(e.currentTarget))),{x:i,y:r}=(0,m.R3)(s),a={x:n-i+4,y:o-r+4};this.previousUserSelect=(0,Z.l)({userSelect:"none",MozUserSelect:"none",msUserSelect:"none",webkitUserSelect:"none"}),window.addEventListener("mousemove",this.onDragMove),window.addEventListener("touchmove",this.onDragMove),window.addEventListener("mouseup",this.onDragEnd),window.addEventListener("touchend",this.onDragEnd),this.setState({isDragging:!0,draggingIndex:t,draggingTargetIndex:t,draggingGrabbedOffset:a,top:o,left:n})}renderGhost(e){let{gridColumns:t,singleColumn:o}=e;const{isDragging:n,draggingIndex:s,draggingGrabbedOffset:i}=this.state,a=s;if("number"!=typeof a||!n||!this.portal)return null;const l=i?.x??0,d=i?.y??0,c=Number(this.state.top)-d,p=Number(this.state.left)-l,u=this.props.columns[a],m={top:`${c}px`,left:`${p}px`},h=(0,T.tZ)(A,{ref:this.dragGhostRef,style:m,children:this.renderItem(u,a,{singleColumn:o,isGhost:!0,gridColumns:t})});return(0,r.createPortal)(h,this.portal)}renderItem(e,t,o){let{singleColumn:n=!1,canDelete:s=!0,canDrag:r=!0,isGhost:a=!1,gridColumns:l=2,disabled:d=!1}=o;const{columns:c,fieldOptions:p,filterAggregateParameters:u,filterPrimaryOptions:m,noFieldsMessage:y,showAliasField:x}=this.props,{isDragging:v,draggingTargetIndex:f,draggingIndex:b}=this.state;let Z=null;if(v&&!1===a&&f===t&&(Z=(0,T.tZ)(L,{className:D},`placeholder:${this.keyForColumn(e,a)}`)),v&&!1===a&&b===t)return Z;const w=Number(f)<=Number(b)?_.TOP:_.BOTTOM;return(0,T.BX)(i.Fragment,{children:[w===_.TOP&&Z,(0,T.BX)(z,{showAliasField:x,singleColumn:n,className:a?"":D,children:[r?(0,T.tZ)(O,{"aria-label":(0,g.t)("Drag to reorder"),onMouseDown:e=>this.startDrag(e,t),onTouchStart:e=>this.startDrag(e,t),icon:(0,T.tZ)(h.LS,{size:"xs"}),size:"zero",borderless:!0}):n&&x?null:(0,T.tZ)("span",{}),(0,T.tZ)(E.q,{fieldOptions:p,gridColumns:l,fieldValue:e,onChange:e=>this.handleUpdateColumn(t,e),error:this.state.error.get(t),takeFocus:t===this.props.columns.length-1,otherColumns:c,shouldRenderTag:!0,disabled:d,filterPrimaryOptions:m,filterAggregateParameters:u,noFieldsMessage:y,skipParameterPlaceholder:x}),x&&(0,T.tZ)(N,{singleColumn:n,children:(0,T.tZ)(P,{name:"alias",placeholder:(0,g.t)("Alias"),value:e.alias??"",onChange:o=>{this.handleUpdateColumn(t,{...e,alias:o.target.value})}})}),s||"equation"===e.kind?x?(0,T.tZ)(q,{"data-test-id":`remove-column-${t}`,"aria-label":(0,g.t)("Remove column"),title:(0,g.t)("Remove column"),onClick:()=>this.removeColumn(t),icon:(0,T.tZ)(h.Fz,{}),borderless:!0}):(0,T.tZ)(q,{"data-test-id":`remove-column-${t}`,"aria-label":(0,g.t)("Remove column"),onClick:()=>this.removeColumn(t),icon:(0,T.tZ)(h.Fz,{}),borderless:!0}):n&&x?null:(0,T.tZ)("span",{})]}),w===_.BOTTOM&&Z]},`${t}:${this.keyForColumn(e,a)}`)}render(){const{className:e,columns:t,showAliasField:o,source:n}=this.props,s=t.filter((e=>"equation"!==e.kind)).length>1,i=t.length>1,r=t.length<20,a=r?void 0:(0,g.t)("Sorry, you've reached the maximum number of columns (%d). Delete columns to add more.",20),l=1===t.length,c=n===w.l9.ISSUE?1:Math.max(...t.map((e=>{if("function"!==e.kind)return 2;const t=v.lx[e.function[0]]??S.Am[e.function[0]];return t&&t.parameters?2===t.parameters.length?3:2:3})));return(0,T.BX)("div",{className:e,children:[this.renderGhost({gridColumns:c,singleColumn:l}),!o&&n!==w.l9.ISSUE&&(0,T.tZ)(z,{showAliasField:o,singleColumn:l,children:(0,T.BX)(R,{gridColumns:c,children:[(0,T.tZ)(M,{children:(0,g.t)("Tag / Field / Function")}),(0,T.tZ)(M,{children:(0,g.t)("Field Parameter")})]})}),t.map(((e,t)=>this.isFixedIssueColumn(t)?this.renderItem(e,t,{singleColumn:l,canDelete:!1,canDrag:i,gridColumns:c,disabled:!0}):this.isRemainingReleaseHealthAggregate(t)?this.renderItem(e,t,{singleColumn:l,canDelete:!1,canDrag:i,gridColumns:c}):this.renderItem(e,t,{singleColumn:l,canDelete:s,canDrag:i,gridColumns:c}))),(0,T.tZ)(z,{showAliasField:o,singleColumn:l,children:(0,T.BX)(j,{gap:1,showAliasField:o,children:[(0,T.tZ)(d.zx,{size:"sm","aria-label":(0,g.t)("Add a Column"),onClick:this.handleAddColumn,title:a,disabled:!r,icon:(0,T.tZ)(h.N_,{isCircled:!0,size:"xs"}),children:(0,g.t)("Add a Column")}),n!==w.l9.ISSUE&&n!==w.l9.RELEASE&&(0,T.tZ)(d.zx,{size:"sm","aria-label":(0,g.t)("Add an Equation"),onClick:this.handleAddEquation,title:a,disabled:!r,icon:(0,T.tZ)(h.N_,{isCircled:!0,size:"xs"}),children:(0,g.t)("Add an Equation")})]})})]})}}I.displayName="ColumnEditCollection";const j=(0,s.Z)(c.ZP,{target:"e8eyv779"})("grid-column:",(e=>e.showAliasField?"1/-1":" 2/3"),";justify-content:flex-start;"),z=(0,s.Z)("div",{target:"e8eyv778"})("display:grid;grid-template-columns:",(0,y.D)(3)," 1fr 40px;justify-content:center;align-items:center;width:100%;touch-action:none;padding-bottom:",(0,y.D)(1),";",(e=>e.showAliasField&&(0,a.iv)("align-items:flex-start;grid-template-columns:",e.singleColumn?"1fr":`${(0,y.D)(3)} 1fr 40px`,";@media (min-width: ",e.theme.breakpoints.small,"){grid-template-columns:",e.singleColumn?`1fr calc(200px + ${(0,y.D)(1)})`:`${(0,y.D)(3)} 1fr calc(200px + ${(0,y.D)(1)}) 40px`,";}","")),";"),A=(0,s.Z)("div",{target:"e8eyv777"})("background:",(e=>e.theme.background),";display:block;position:absolute;padding:",4,"px;border-radius:",(e=>e.theme.borderRadius),";box-shadow:0 0 15px rgba(0, 0, 0, 0.15);width:710px;opacity:0.8;cursor:grabbing;padding-right:",(0,y.D)(2),";&>",z,"{padding-bottom:0;}& svg{cursor:grabbing;}"),L=(0,s.Z)("div",{target:"e8eyv776"})("margin:0 ",(0,y.D)(3)," ",(0,y.D)(1)," ",(0,y.D)(3),";border:2px dashed ",(e=>e.theme.border),";border-radius:",(e=>e.theme.borderRadius),";height:",(e=>e.theme.form.md.height),"px;"),R=(0,s.Z)("div",{target:"e8eyv775"})("grid-column:2/3;display:grid;grid-template-columns:repeat(",(e=>e.gridColumns),", 1fr);grid-column-gap:",(0,y.D)(1),";"),M=(0,s.Z)(p.OT,{target:"e8eyv774"})({name:"ti75j2",styles:"margin:0"}),P=(0,s.Z)(u.Z,{target:"e8eyv773"})({name:"jixqcp",styles:"min-width:50px"}),N=(0,s.Z)("div",{target:"e8eyv772"})("margin-top:",(0,y.D)(1),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){margin-top:0;margin-left:",(0,y.D)(1),";}@media (max-width: ",(e=>e.theme.breakpoints.small),"){grid-row:2/2;grid-column:",(e=>e.singleColumn?"1/-1":"2/2"),";}"),q=(0,s.Z)(d.zx,{target:"e8eyv771"})("margin-left:",(0,y.D)(1),";height:",(e=>e.theme.form.md.height),"px;"),O=(0,s.Z)(d.zx,{target:"e8eyv770"})("height:",(e=>e.theme.form.md.height),"px;"),F=I},"./app/views/discover/table/tableView.tsx":(e,t,o)=>{o.d(t,{Oj:()=>ge,ZP:()=>xe});var n=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(o("../node_modules/core-js/modules/es.error.cause.js"),o("../node_modules/core-js/modules/es.array.push.js"),o("../node_modules/react/index.js")),i=o("../node_modules/react-router/es/index.js"),r=o("../node_modules/@sentry/core/esm/exports.js"),a=o("./app/actionCreators/modal.tsx"),l=o("./app/components/gridEditable/index.tsx"),d=o("./app/components/gridEditable/sortLink.tsx"),c=o("./app/components/links/link.tsx"),p=o("./app/components/replays/replayIdCountProvider.tsx"),u=o("./app/components/tooltip.tsx"),m=o("./app/components/truncate.tsx"),h=o("./app/icons/index.tsx"),g=o("./app/locale.tsx"),y=o("./app/utils/analytics.tsx"),x=o("./app/utils/discover/eventView.tsx"),v=o("./app/utils/discover/fieldRenderers.tsx"),f=o("./app/utils/discover/fields.tsx"),b=o("./app/utils/discover/types.tsx"),Z=o("./app/utils/discover/urls.tsx"),w=o("./app/utils/discover/viewReplayLink.tsx"),C=o("./app/utils/events.tsx"),S=o("./app/utils/profiling/routes.tsx"),E=o("./app/utils/queryString.tsx"),k=o("./app/utils/tokenizeSearch.tsx"),T=o("./app/utils/useProjects.tsx"),D=o("./app/utils/useRoutes.tsx"),_=o("./app/utils/withDomainRequired.tsx"),I=o("./app/views/performance/traceDetails/utils.tsx"),j=o("./app/views/performance/transactionSummary/utils.tsx"),z=o("./app/views/discover/utils.tsx"),A=o("./app/views/discover/table/quickContext/quickContextWrapper.tsx"),L=o("./app/views/discover/table/quickContext/utils.tsx"),R=o("./app/views/discover/table/cellAction.tsx"),M=o("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),P=o("./app/components/button.tsx"),N=o("./app/components/buttonBar.tsx"),q=o("./app/components/links/externalLink.tsx"),O=o("./app/constants/index.tsx"),F=o("./app/styles/space.tsx"),U=o("./app/utils/fields/index.ts"),B=o("./app/utils/theme.tsx"),V=o("./app/utils/useTags.tsx"),G=o("./app/views/discover/table/columnEditCollection.tsx"),$=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function H(e){const{Header:t,Body:o,Footer:n,measurementKeys:i,spanOperationBreakdownKeys:r,organization:a,onApply:l,closeModal:d,customMeasurements:c}=e;(0,s.useEffect)((()=>{(0,y.Gi)("discover_v2.column_editor.open",{organization:a})}),[a]);const p=(0,V.Z)(),u=Object.keys(p),[m,h]=(0,s.useState)(e.columns),x=(0,z.R0)({organization:a,tagKeys:u,measurementKeys:i,spanOperationBreakdownKeys:r,customMeasurements:a.features.includes("dashboards-mep")||a.features.includes("mep-rollout-flag")?Object.values(c??{}).map((e=>{let{key:t,functions:o}=e;return{key:t,functions:o}})):void 0});return(0,$.BX)(s.Fragment,{children:[(0,$.tZ)(t,{closeButton:!0,children:(0,$.tZ)("h4",{children:(0,g.t)("Edit Columns")})}),(0,$.BX)(o,{children:[(0,$.tZ)(W,{children:(0,g._N)("To group events, add [functionLink: functions] f(x) that may take in additional parameters. [fieldTagLink: Tag and field] columns will help you view more details about the events (i.e. title).",{functionLink:(0,$.tZ)(q.Z,{href:"https://docs.sentry.io/product/discover-queries/query-builder/#filter-by-table-columns"}),fieldTagLink:(0,$.tZ)(q.Z,{href:"https://docs.sentry.io/product/sentry-basics/search/searchable-properties/#event-properties"})})}),(0,$.tZ)(G.Z,{columns:m,fieldOptions:x,filterAggregateParameters:e=>e.value.meta.name!==U.Sh.TOTAL_COUNT,onChange:h,organization:a})]}),(0,$.tZ)(n,{children:(0,$.BX)(N.ZP,{gap:1,children:[(0,$.tZ)(P.zx,{priority:"default",href:O.l5,external:!0,children:(0,g.t)("Read the Docs")}),(0,$.tZ)(P.zx,{"aria-label":(0,g.t)("Apply"),priority:"primary",onClick:function(){l(m),d()},children:(0,g.t)("Apply")})]})})]})}H.displayName="ColumnEditModal";const W=(0,n.Z)("div",{target:"e15ouvrx0"})("margin-bottom:",(0,F.D)(4),";"),X=(0,M.iv)("@media (min-width: ",B.ZP.breakpoints.medium,"){width:auto;max-width:900px;}",""),K=H;var Q=o("./app/components/acl/feature.tsx"),Y=o("./app/components/acl/featureDisabled.tsx"),J=o("./app/components/assistant/guideAnchor.tsx"),ee=o("./app/components/dataExport.tsx"),te=o("./app/components/hovercard.tsx");function oe(e,t){const{tableData:o}=t;return(0,$.tZ)(Q.Z,{features:["organizations:discover-query"],renderDisabled:()=>ne(e,t),children:o?.data&&o.data.length<50?ne(e,t):se(e,t)})}function ne(e,t){const{isLoading:o,error:n}=t,s=o||null!==n||!1===e,i=s?void 0:()=>function(e,t){let{organization:o,eventView:n,tableData:s}=t;(0,y.Gi)("discover_v2.results.download_csv",{organization:o.id}),(0,z.Di)(s,n.getColumns(),e)}(t.title,t);return(0,$.tZ)(P.zx,{size:"sm",disabled:s,onClick:i,"data-test-id":"grid-download-csv",icon:(0,$.tZ)(h.Dj,{size:"xs"}),title:(0,g.t)("There aren't that many results, start your export and it'll download immediately."),children:(0,g.t)("Export All")})}function se(e,t){const{isLoading:o,error:n,location:s,eventView:i}=t,r=o||null!==n||!1===e;return(0,$.tZ)(ee.ZP,{payload:{queryType:ee.tD.Discover,queryInfo:i.getEventsAPIPayload(s)},disabled:r,icon:(0,$.tZ)(h.Dj,{size:"xs"}),children:(0,g.t)("Export All")})}function ie(e,t){const o=e?t.onEdit:void 0;return(0,$.tZ)(J.Z,{target:"columns_header_button",children:(0,$.tZ)(P.zx,{size:"sm",disabled:!e,onClick:o,"data-test-id":"grid-edit-enable",icon:(0,$.tZ)(h.bv,{size:"xs"}),children:(0,g.t)("Columns")})})}function re(e){let{onChangeShowTags:t,showTags:o}=e;return(0,$.tZ)(P.zx,{size:"sm",onClick:t,icon:(0,$.tZ)(h.Ah,{size:"xs"}),children:o?(0,g.t)("Hide Tags"):(0,g.t)("Show Tags")})}function ae(e){const t=(0,g.t)("Requires discover query feature.");return(0,$.tZ)(Q.Z,{hookName:"feature-disabled:grid-editable-actions",renderDisabled:e=>(0,$.tZ)(te.uI,{body:(0,$.tZ)(Y.Z,{features:e.features,hideHelpToggle:!0,message:t,featureName:t}),children:e.children(e)}),features:["organizations:discover-query"],children:t=>{let{hasFeature:o}=t;return e.children(o,e)}})}function le(e){return(0,$.BX)(s.Fragment,{children:[(0,M.az)(ae,{...e,key:"edit"},ie),(0,M.az)(ae,{...e,key:"download"},oe),re(e)]})}oe.displayName="renderDownloadButton",ne.displayName="renderBrowserExportButton",se.displayName="renderAsyncExportButton",ie.displayName="renderEditButton",re.displayName="renderSummaryButton",ae.displayName="FeatureWrapper",le.displayName="HeaderActions";const de=le;var ce=o("./app/views/discover/table/topResultsIndicator.tsx");function pe(e){const{projects:t}=(0,T.Z)(),o=(0,D.V)(),n=(0,j.MF)(o);function M(){const{organization:t,eventView:o,measurementKeys:n,spanOperationBreakdownKeys:s,customMeasurements:i}=e;(0,a.openModal)((e=>(0,$.tZ)(K,{...e,organization:t,measurementKeys:n,spanOperationBreakdownKeys:s,columns:o.getColumns().map((e=>e.column)),onApply:N,customMeasurements:i})),{modalCss:X,closeEvents:"escape-key"})}function P(o,n){return(s,r)=>{const{eventView:a,organization:l,location:d,tableData:c,isHomepage:p}=e,u=new k.MY(a.query);let m=a.clone();switch((0,y.Gi)("discover_v2.results.cellaction",{organization:l,action:s}),s){case R.eX.RELEASE:{const e=t.find((e=>e.slug===o.project));return void i.browserHistory.push((0,_.D)({pathname:`/organizations/${l.slug}/releases/${encodeURIComponent(r)}/`,query:{...m.getPageFiltersQuery(),project:e?e.id:void 0}}))}case R.eX.DRILLDOWN:return(0,y.Gi)("discover_v2.results.drilldown",{organization:l}),m=(0,z.Bn)(m,{},o).withNewColumn({kind:"function",function:["count","",void 0,void 0]}),void i.browserHistory.push((0,_.D)(m.getResultsViewUrlTarget(l.slug,p)));default:{let e=r;const t=c?.meta?.units?.[n.name];"number"==typeof e&&t&&(Object.keys(v.en).includes(t)?e*=v.en[t]:Object.keys(v.a_).includes(t)&&(e*=v.a_[t])),(0,R.rh)(u,s,n,e)}}m.query=u.formatString();const h=m.getResultsViewUrlTarget(l.slug,p);h.query.yAxis=(0,E.qP)(d.query.yAxis),i.browserHistory.push((0,_.D)(h))}}function N(t){const{organization:o,eventView:n,location:s,isHomepage:r}=e;(0,y.Gi)("discover_v2.update_columns",{organization:o});const a=n.withColumns(t),l=a.getResultsViewUrlTarget(o.slug,r),d=(0,E.qP)(s.query.yAxis);l.query.yAxis=d.filter((e=>a.getYAxisOptions().find((t=>{let{value:o}=t;return o===e})))),i.browserHistory.push((0,_.D)(l))}const{error:q,eventView:O,isLoading:F,location:U,organization:B,tableData:V}=e,G=O.getColumns(),H=O.getSorts(),W=O.hasAggregateField()?["40px"]:O.hasIdField()?[]:[`minmax(${l.zO}px, max-content)`],Q=V?.data?.map((e=>String(e.replayId))).filter(Boolean);return(0,$.tZ)(p.Z,{organization:B,replayIds:Q,children:(0,$.tZ)(l.ZP,{isLoading:F,error:q,data:V?V.data:[],columnOrder:G,columnSortBy:H,title:(0,g.t)("Results"),grid:{renderHeadCell:function(t){const{eventView:o,location:n,tableData:s}=e,i=s?.meta,r=(0,f.qG)(t.name,t.type,i),a={field:t.key,width:t.width},l=o.sortForField(a,i),c=(0,x.M3)(a,i);let p=(0,f.uI)(t.name)?o.getEquations()[(0,f.G5)(t.name)]:t.name;"replayid"===t.name.toLowerCase()&&(p="Replay");const u=(0,$.tZ)(me,{title:p,children:(0,$.tZ)(m.Z,{value:p,maxLength:60,expandable:!1})});return(0,$.tZ)(d.Z,{align:r,title:u,direction:l?l.kind:void 0,canSort:c,generateSortLink:function(){if(!i)return;const e=o.sortOnField(a,i).generateQueryStringObject();return e.yAxis=(0,E.qP)(n.query.yAxis),{...n,query:e}}})},renderBodyCell:function(o,i,r,a){const{isFirstPage:l,eventView:d,location:c,organization:p,tableData:m,isHomepage:h}=e;if(!m||!m.meta)return i[o.key];const x=String(o.key),f=(0,v.Js)(x,m.meta,!1),E=d.getDisplayMode(),k=E===b.DC.TOP5||E===b.DC.DAILYTOP5,T=d.topEvents?parseInt(d.topEvents,10):b.hY,D=Math.min(m?.data?.length??T,T),_=m.meta.units?.[x];let j=f(i,{organization:p,location:c,unit:_});if("id"===x){const e=(0,Z.JE)(i),o=(0,Z.eQ)({orgSlug:p.slug,eventSlug:e,eventView:d,isHomepage:h}),n=(0,$.tZ)(he,{"data-test-id":"view-event",to:o,children:j});j=(0,$.tZ)(A.V,{organization:p,dataRow:i,contextType:L.z.EVENT,projects:t,eventView:d,children:n})}else if("transaction"===x&&i.transaction)j=(0,$.tZ)(ge,{"data-test-id":"tableView-transaction-link",to:(0,z.vT)(i,p,t,d,c),children:j});else if("trace"===x){const e=d.normalizeDateSelection(c);if(i.trace){const t=(0,I.YA)(p,String(i.trace),e,{});j=(0,$.tZ)(u.u,{title:(0,g.t)("View Trace"),children:(0,$.tZ)(he,{"data-test-id":"view-trace",to:t,children:j})})}}else if("replayId"===x){if(i.replayId){if(!i["project.name"])return(0,C.XQ)(String(i.replayId));const e=n(p,i,void 0);j=(0,$.tZ)(w.Z,{replayId:i.replayId,to:e,children:j})}}else if("profile.id"===x){const e=i.project||i["project.name"],t=i["profile.id"];if(e&&t){const o=(0,S.O$)({orgSlug:p.slug,projectSlug:String(e),profileId:String(t)});j=(0,$.tZ)(me,{title:(0,g.t)("View Profile"),children:(0,$.tZ)(he,{"data-test-id":"view-profile",to:o,onClick:()=>(0,y.Gi)("profiling_views.go_to_flamegraph",{organization:p,source:"discover.table"}),children:j})})}}const M=l&&k&&r<T&&0===a?(0,$.tZ)(ce.C,{count:D,index:r}):null,N=x,q=i[N];return"integer"===m.meta[N]&&"number"==typeof q&&q>999?(0,$.BX)(u.u,{title:q.toLocaleString(),containerDisplayMode:"block",position:"right",children:[M,(0,$.tZ)(R.ZP,{column:o,dataRow:i,handleCellAction:P(i,o),children:j})]}):(0,$.BX)(s.Fragment,{children:[M,(0,$.tZ)(R.ZP,{column:o,dataRow:i,handleCellAction:P(i,o),children:j})]})},onResizeColumn:function(t,o){const{location:n,eventView:s}=e,i=o.width?Number(o.width):l.z7,r=s.withResizedColumn(t,i);(0,z.TX)({location:n,nextEventView:r,extraQuery:(0,x.QN)(n)})},renderPrependColumns:function(o,n,s){const{organization:i,eventView:a,tableData:l,location:p,isHomepage:m}=e,y=a.hasAggregateField(),x=a.hasIdField();if(o)return y?[(0,$.tZ)(ue,{children:(0,$.tZ)(h.bv,{size:"sm"})},"header-icon")]:x?[]:[(0,$.tZ)(ue,{children:(0,$.tZ)(d.Z,{align:"left",title:(0,g.t)("event id"),direction:void 0,canSort:!1,generateSortLink:()=>{}})},"header-event-id")];if(y){const e=(0,z.Bn)(a,{},n),t={pathname:p.pathname,query:e.generateQueryStringObject()};return[(0,$.tZ)(u.u,{title:(0,g.t)("Open Group"),children:(0,$.tZ)(c.Z,{to:t,"data-test-id":"open-group",onClick:()=>{e.isEqualTo(a)&&r.Tb(new Error("Failed to drilldown"))},children:(0,$.tZ)(ye,{size:"sm"})})},`eventlink${s}`)]}if(!x){let e=n.id;l&&l.meta&&(e=(0,v.Js)("id",l.meta)(n,{organization:i,location:p}));const o=(0,Z.JE)(n),r=(0,Z.eQ)({orgSlug:i.slug,eventSlug:o,eventView:a,isHomepage:m}),d=(0,$.tZ)(he,{"data-test-id":"view-event",to:r,children:e});return[(0,$.tZ)(A.V,{dataRow:n,contextType:L.z.EVENT,organization:i,projects:t,eventView:a,children:d},`quickContextEventHover${s}`)]}return[]},prependColumnWidths:W},headerButtons:function(){const{organization:t,title:o,eventView:n,isLoading:s,error:i,tableData:r,location:a,onChangeShowTags:l,showTags:d}=e;return(0,$.tZ)(de,{title:o,isLoading:s,error:i,organization:t,eventView:n,onEdit:M,tableData:r,location:a,onChangeShowTags:l,showTags:d})},location:U})})}pe.displayName="TableView";const ue=(0,n.Z)("span",{target:"e4h6la64"})("color:",(e=>e.theme.subText),";"),me=(0,n.Z)(u.u,{target:"e4h6la63"})({name:"1tff48x",styles:"display:initial;max-width:max-content"}),he=(0,n.Z)(c.Z,{target:"e4h6la62"})({name:"50z4ny",styles:"& div{display:inline;}"}),ge=(0,n.Z)(c.Z,{target:"e4h6la61"})((e=>e.theme.overflowEllipsis),";"),ye=(0,n.Z)(h.bv,{target:"e4h6la60"})({name:"1989ovb",styles:"vertical-align:middle"}),xe="app"==o.j?pe:null},"./app/views/discover/table/topResultsIndicator.tsx":(e,t,o)=>{o.d(t,{C:()=>n});const n=(0,o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"ex85xd30"})("position:absolute;left:-1px;margin-top:4.5px;width:9px;height:15px;border-radius:0 3px 3px 0;background-color:",(e=>e.theme.charts.getColorPalette(e.count-2)[e.index]),";")}}]);
//# sourceMappingURL=../sourcemaps/app_components_charts_chartZoom_tsx-app_components_charts_lineChart_tsx-app_components_charts-10938f.20c6cbf72b5c433108ee6c4db043a719.js.map