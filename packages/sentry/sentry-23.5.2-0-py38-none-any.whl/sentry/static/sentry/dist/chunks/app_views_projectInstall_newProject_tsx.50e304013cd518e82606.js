"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_projectInstall_newProject_tsx"],{"./app/utils/routeAnalytics/useRouteAnalyticsEventNames.tsx":(e,t,a)=>{a.d(t,{Z:()=>n});var o=a("../node_modules/react/index.js"),s=a("./app/views/routeAnalyticsContextProvider.tsx");function n(e,t){const{setEventNames:a,previousUrl:n}=(0,o.useContext)(s.o);(0,o.useEffect)((()=>{a(e,t)}),[a,e,t,n])}},"./app/utils/slugify.tsx":(e,t,a)=>{function o(e){return e.normalize("NFKD").toLowerCase().replace(" ","-").replace(/[^a-z0-9-_]/g,"")}a.d(t,{Z:()=>o})},"./app/views/projectInstall/newProject.tsx":(e,t,a)=>{a.r(t),a.d(t,{default:()=>U});var o=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=a("./app/components/sentryDocumentTitle.tsx"),n=a("./app/styles/space.tsx"),r=(a("../node_modules/core-js/modules/es.array.push.js"),a("../node_modules/react/index.js")),i=a("../node_modules/react-router/es/index.js"),l=a("../node_modules/@sentry/core/esm/exports.js"),c=a("../node_modules/lodash/omit.js"),d=a.n(c),p=a("../node_modules/lodash/startCase.js"),u=a.n(p),m=a("../node_modules/platformicons/build/index.js"),g=a("./app/actionCreators/indicator.tsx"),h=a("./app/actionCreators/modal.tsx"),x=a("./app/components/acl/access.tsx"),f=a("./app/components/alert.tsx"),y=a("./app/components/button.tsx"),Z=a("./app/components/input.tsx"),j=a("./app/components/layouts/thirds.tsx"),v=a("./app/components/links/externalLink.tsx"),b=a("./app/components/onboarding/frameworkSuggestionModal.tsx"),w=a("./app/components/platformPicker.tsx"),C=a("./app/components/projects/useProjectCreationAccess.tsx"),k=a("./app/components/teamSelector.tsx"),_=a("./app/icons/index.tsx"),P=a("./app/locale.tsx"),S=a("./app/stores/projectsStore.tsx"),z=a("./app/utils/analytics.tsx"),D=a("./app/utils/routeAnalytics/useRouteAnalyticsEventNames.tsx"),N=a("./app/utils/slugify.tsx"),T=a("./app/utils/useApi.tsx"),A=a("./app/utils/useOrganization.tsx"),M=a("./app/utils/useTeams.tsx"),$=a("./app/utils/withDomainRequired.tsx"),B=a("./app/views/projectInstall/issueAlertOptions.tsx"),O=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function R(){const e=(0,T.Z)(),t=(0,A.Z)(),{teams:o}=(0,M.y)(),s=o.filter((e=>e.access.includes("team:admin")));(0,D.Z)("project_creation_page.viewed","Project Create: Creation page viewed");const[n,c]=(0,r.useState)(""),[p,m]=(0,r.useState)(void 0),[Z,R]=(0,r.useState)(s?.[0]?.slug),[H,J]=(0,r.useState)(!1),[K,U]=(0,r.useState)(!1),[Y,Q]=(0,r.useState)(void 0),V=!!t?.features.includes("onboarding-sdk-selection"),W=(0,r.useCallback)((async a=>{const{slug:o}=t,{shouldCreateCustomRule:s,name:r,conditions:c,actions:d,actionMatch:u,frequency:m,defaultRules:h}=Y||{},x=a?.key??p?.key;if(x){U(!0);try{const a=await e.requestPromise(null===Z?`/organizations/${o}/experimental/projects/`:`/teams/${o}/${Z}/projects/`,{method:"POST",data:{name:n,platform:x,default_rules:h??!0}});let l;s&&(l=(await e.requestPromise(`/projects/${t.slug}/${a.slug}/rules/`,{method:"POST",data:{name:r,conditions:c,actions:d,actionMatch:u,frequency:m}})).id),(0,z.Gi)("project_creation_page.created",{organization:t,issue_alert:h?"Default":s?"Custom":"No Rule",project_id:a.id,rule_id:l||""}),S.Z.onCreateSuccess(a,t.slug),i.browserHistory.push((0,$.D)(`/${t.slug}/${a.slug}/getting-started/${x}/`))}catch(e){U(!1),J(e.responseJSON),403!==e.status&&409!==e.status&&l.$e((t=>{t.setExtra("err",e),l.uT("Project creation failed")}))}}else(0,g.Iw)((0,P.t)("Please select a platform in Step 1"))}),[e,Y,t,p,n,Z]),ee=(0,r.useCallback)((async()=>{const e=p;if(!e)return void(0,g.Iw)((0,P.t)("Please select a platform in Step 1"));if("language"!==e.type||!Object.values(b.E).includes(e.language))return void W();const{FrameworkSuggestionModal:o,modalCss:s}=await Promise.resolve().then(a.bind(a,"./app/components/onboarding/frameworkSuggestionModal.tsx"));(0,h.openModal)((a=>(0,O.tZ)(o,{...a,organization:t,selectedPlatform:e,onConfigure:e=>{W(e)},onSkip:W})),{modalCss:s,onClose:()=>{(0,z.Gi)("project_creation.select_framework_modal_close_button_clicked",{platform:e.key,organization:t})}})}),[p,W,t]),{shouldCreateCustomRule:te,conditions:ae}=Y||{},{canCreateProject:oe}=(0,C.A)({organization:t,teams:s}),se=0===s.length&&!t.access.includes("project:admin"),ne=!K&&(Z||se)&&oe&&""!==n&&(!te||ae?.every?.((e=>e.value))),re=(0,O.BX)(r.Fragment,{children:[(0,O.tZ)(j.Dx,{withMargins:!0,children:(0,P.t)("3. Name your project and assign it a team")}),(0,O.BX)(X,{onSubmit:e=>{e.preventDefault(),V?ee():W()},children:[(0,O.BX)("div",{children:[(0,O.tZ)(E,{children:(0,P.t)("Project name")}),(0,O.BX)(q,{children:[(0,O.tZ)(L,{platform:p?.key??"other",size:20}),(0,O.tZ)(I,{type:"text",name:"name",placeholder:(0,P.t)("project-name"),autoComplete:"off",value:n,onChange:e=>c((0,N.Z)(e.target.value))})]})]}),!se&&(0,O.BX)("div",{children:[(0,O.tZ)(E,{children:(0,P.t)("Team")}),(0,O.BX)(F,{children:[(0,O.tZ)(k.Z,{name:"select-team","aria-label":(0,P.t)("Select a Team"),menuPlacement:"auto",clearable:!1,value:Z,placeholder:(0,P.t)("Select a Team"),onChange:e=>R(e.value),teamFilter:e=>e.access.includes("team:admin")}),(0,O.tZ)(y.zx,{borderless:!0,"data-test-id":"create-team",icon:(0,O.tZ)(_.N_,{isCircled:!0}),onClick:()=>(0,h.openCreateTeamModal)({organization:t,onClose:e=>{let{slug:t}=e;return R(t)}}),title:(0,P.t)("Create a team"),"aria-label":(0,P.t)("Create a team")})]})]}),(0,O.tZ)("div",{children:(0,O.tZ)(y.zx,{type:"submit","data-test-id":"create-project",priority:"primary",disabled:!ne,children:(0,P.t)("Create Project")})})]})]});return(0,O.tZ)(x.Z,{access:oe?["project:read"]:["project:admin"],children:(0,O.BX)("div",{"data-test-id":"onboarding-info",children:[(0,O.tZ)(j.Dx,{withMargins:!0,children:(0,P.t)("Create a new project in 3 steps")}),(0,O.tZ)(G,{children:(0,P._N)("Set up a separate project for each part of your application (for example, your API server and frontend client), to quickly pinpoint which part of your application errors are coming from. [link: Read the docs].",{link:(0,O.tZ)(v.Z,{href:"https://docs.sentry.io/product/sentry-basics/integrate-frontend/create-new-project/"})})}),(0,O.tZ)(j.Dx,{withMargins:!0,children:(0,P.t)("1. Choose your platform")}),(0,O.tZ)(w.Z,{platform:p?.key,defaultCategory:p?.category,setPlatform:function(e){if(!e?.id)return m(void 0),void c("");const t=n&&n!==p?.key?n:e.id;m({...d()(e,"id"),key:e.id}),c(t)},organization:t,showOther:!0}),(0,O.tZ)(B.ZP,{onChange:e=>Q(e)}),re,H&&(0,O.tZ)(f.bZ,{type:"error",children:Object.keys(H).map((e=>(0,O.BX)("div",{children:[(0,O.tZ)("strong",{children:u()(e)}),": ",H[e]]},e)))})]})})}R.displayName="CreateProject";const X=(0,o.Z)("form",{target:"e84eeos6"})("display:grid;grid-template-columns:300px minmax(250px, max-content) max-content;gap:",(0,n.D)(2),";align-items:end;padding:",(0,n.D)(3)," 0;box-shadow:0 -1px 0 rgba(0, 0, 0, 0.1);background:",(e=>e.theme.background),";"),E=(0,o.Z)("div",{target:"e84eeos5"})("font-size:",(e=>e.theme.fontSizeExtraLarge),";margin-bottom:",(0,n.D)(1),";"),q=(0,o.Z)("div",{target:"e84eeos4"})({name:"bjn8wh",styles:"position:relative"}),I=(0,o.Z)(Z.Z,{target:"e84eeos3"})("padding-left:calc(",(e=>e.theme.formPadding.md.paddingLeft),"px * 1.5 + 20px);"),L=(0,o.Z)(m.v,{target:"e84eeos2"})("position:absolute;top:50%;left:",(e=>e.theme.formPadding.md.paddingLeft),"px;transform:translateY(-50%);"),F=(0,o.Z)("div",{target:"e84eeos1"})("display:grid;gap:",(0,n.D)(1),";grid-template-columns:1fr min-content;align-items:center;"),G=(0,o.Z)("p",{target:"e84eeos0"})("color:",(e=>e.theme.subText),";max-width:760px;");function H(){return(0,O.tZ)(s.Z,{children:(0,O.tZ)(J,{children:(0,O.tZ)("div",{className:"container",children:(0,O.tZ)(K,{children:(0,O.tZ)(R,{})})})})})}H.displayName="NewProject";const J=(0,o.Z)("div",{target:"e1ltwwy41"})("flex:1;background:",(e=>e.theme.background),";"),K=(0,o.Z)("div",{target:"e1ltwwy40"})("margin-top:",(0,n.D)(3),";"),U=H}}]);
//# sourceMappingURL=../sourcemaps/app_views_projectInstall_newProject_tsx.c6bc88d06d4da4e86606fe1816570f57.js.map