"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_discover_homepage_tsx"],{"./app/views/discover/homepage.tsx":(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var i=t("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=(t("../node_modules/core-js/modules/es.array.push.js"),t("../node_modules/react-router/es/index.js")),r=t("./app/components/asyncComponent.tsx"),o=t("./app/components/organizations/pageFilters/container.tsx"),n=t("./app/components/organizations/pageFilters/parse.tsx"),p=t("./app/components/organizations/pageFilters/persistence.tsx"),d=t("./app/utils/discover/eventView.tsx"),u=t("./app/utils/withApi.tsx"),l=t("./app/utils/withOrganization.tsx"),c=t("./app/utils/withPageFilters.tsx"),h=t("./app/views/discover/results.tsx"),g=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class m extends r.Z{constructor(){super(...arguments),(0,i.Z)(this,"shouldReload",!0),(0,i.Z)(this,"setSavedQuery",(e=>{this.setState({savedQuery:e})}))}componentDidUpdate(e,s){const t=!s.savedQuery&&this.state.savedQuery,i=s.loading&&!this.state.loading,r=this.state.savedQuery&&""===this.props.location.search,o=d.ZP.fromLocation(this.props.location).isValid();if(this.state.savedQuery&&(i&&t&&!o||r)){const e=d.ZP.fromSavedQuery(this.state.savedQuery),s=(0,p.EU)(this.props.organization.slug);let t={...e.generateQueryStringObject()};s?.pinnedFilters&&s.pinnedFilters.forEach((e=>{if("projects"===e)t.project=s.state.project?.map(String);else if("datetime"===e){const{period:e,start:i,end:a,utc:r}=(0,n.Sg)(s.state);t={...t,statsPeriod:e??void 0,utc:r?.toString(),start:(0,n.gX)(i),end:(0,n.gX)(a)}}else t[e]=s.state[e]})),a.browserHistory.replace({...this.props.location,query:t})}}getEndpoints(){const{organization:e,selection:s}=this.props,{projects:t,environments:i,datetime:a}=s,r={environment:i,project:t.map((e=>String(e)))},o=[];return e.features.includes("discover-query")&&o.push(["savedQuery",`/organizations/${e.slug}/discover/homepage/`]),e.features.includes("starfish-test-endpoint")&&o.push(["starfishResult",`/organizations/${e.slug}/events-starfish/`,{query:{...r,...(0,n.fK)(a)}}]),o}onRequestSuccess(e){let{stateKey:s,data:t}=e;"savedQuery"===s&&""===t&&this.setState({savedQuery:null})}renderBody(){const{savedQuery:e,loading:s}=this.state;return(0,g.tZ)(h.Results,{...this.props,savedQuery:e??void 0,loading:s,setSavedQuery:this.setSavedQuery,isHomepage:!0})}}function v(e){return(0,g.tZ)(o.Z,{skipInitializeUrlParams:!0,children:(0,g.tZ)(m,{...e})})}v.displayName="HomepageContainer";const y=(0,u.Z)((0,l.Z)((0,c.Z)(v)))}}]);
//# sourceMappingURL=../sourcemaps/app_views_discover_homepage_tsx.7c7e290038a24fa0fbecac284e272088.js.map