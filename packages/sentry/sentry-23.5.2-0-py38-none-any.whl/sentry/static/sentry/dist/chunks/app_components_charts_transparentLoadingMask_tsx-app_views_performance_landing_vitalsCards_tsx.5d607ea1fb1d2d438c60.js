"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_charts_transparentLoadingMask_tsx-app_views_performance_landing_vitalsCards_tsx"],{"./app/components/charts/transparentLoadingMask.tsx":(t,e,i)=>{i.d(e,{Z:()=>n});var r=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=i("./app/components/loadingMask.tsx"),s=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const n=(0,r.Z)((t=>{let{className:e,visible:i,children:r,...n}=t;const o=i?{...n,"data-test-id":"loading-placeholder"}:n;return(0,s.tZ)(a.Z,{className:e,...o,children:r})}),{target:"e1t3xibm0"})((t=>!t.visible&&"display: none;"),";opacity:0.4;z-index:1;")},"./app/utils/performance/vitals/vitalsCardsDiscoverQuery.tsx":(t,e,i)=>{i.d(e,{Z:()=>p});var r=i("../node_modules/lodash/pick.js"),a=i.n(r),s=i("./app/utils/discover/genericDiscoverQuery.tsx"),n=i("./app/utils/performance/constants.tsx"),o=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(t){const{eventView:e,vitals:i}=t,r=e?.getEventsAPIPayload(t.location);return{vital:i,...a()(r,["query",...Object.values(n.s)])}}function d(t){return(0,o.tZ)(s.ZP,{getRequestPayload:l,route:"events-vitals",...t,children:e=>{let{tableData:i,...r}=e;return t.children({vitalsData:i,...r})}})}d.displayName="VitalsCardsDiscoverQuery";const p=d},"./app/views/performance/landing/vitalsCards.tsx":(t,e,i)=>{i.d(e,{JO:()=>F});var r=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(i("../node_modules/core-js/modules/es.array.push.js"),i("../node_modules/react/index.js")),s=i("../node_modules/@sentry/core/esm/exports.js"),n=i("./app/components/card.tsx"),o=i("./app/components/charts/eventsRequest.tsx"),l=i("./app/components/charts/styles.tsx"),d=i("./app/components/charts/utils.tsx"),p=i("./app/components/emptyStateWarning.tsx"),c=(i("./app/components/links/link.tsx"),i("./app/components/placeholder.tsx")),m=i("./app/components/questionTooltip.tsx"),u=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),h=i("../node_modules/react-sparklines/build/index.js"),g=i("../node_modules/prop-types/index.js");class v extends h.Sparklines{}(0,u.Z)(v,"propTypes",{children:g.node,data:g.array,limit:g.number,width:g.number,height:g.number,svgWidth:g.number,svgHeight:g.number,preserveAspectRatio:g.string,margin:g.number,style:g.object,min:g.number,max:g.number,onMouseMove:g.func});var x=i("./app/components/tooltip.tsx"),f=i("./app/locale.tsx"),y=i("./app/styles/space.tsx"),Z=i("./app/utils.tsx"),b=i("./app/utils/dates.tsx"),w=i("./app/utils/discover/discoverQuery.tsx"),S=i("./app/utils/discover/fields.tsx"),j=i("./app/utils/fields/index.ts"),k=(i("./app/utils/performance/vitals/constants.tsx"),i("./app/utils/performance/vitals/vitalsCardsDiscoverQuery.tsx"),i("./app/utils/queryString.tsx"),i("./app/utils/theme.tsx")),D=i("./app/utils/toArray.tsx"),P=i("./app/utils/useApi.tsx"),N=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function _(t){return(0,N.tZ)(C,{barHeight:t.barHeight,fractions:t.colorStops.map((t=>{let{percent:e}=t;return e})),children:t.colorStops.map((t=>{const e=(0,N.tZ)(A,{color:t.color},t.color);return t.renderBarStatus?.(e,t.color)??e}))})}_.displayName="ColorBar";const C=(0,r.Z)("div",{target:"e19cfvm31"})("height:",(t=>t.barHeight?`${t.barHeight}px`:"16px"),";width:100%;overflow:hidden;position:relative;background:",(t=>t.theme.gray100),";display:grid;grid-template-columns:",(t=>t.fractions.map((t=>`${t}fr`)).join(" ")),";margin-bottom:",(t=>t.barHeight?"":(0,y.D)(1)),";border-radius:2px;"),A=(0,r.Z)("div",{target:"e19cfvm30"})("background-color:",(t=>t.theme[t.color]??t.color),";"),z=_;var H=i("./app/views/performance/vitalDetail/utils.tsx"),V=i("./app/utils/formatters.tsx");function M(t,e){const i=Array.isArray(t)||t===j.Zl.CLS?"":"ms";switch(e){case H.SP.POOR:return Array.isArray(t)?(0,f.t)("Poor"):(0,f._N)("(>[threshold][unit])",{threshold:H.eE[t],unit:i});case H.SP.MEH:return Array.isArray(t)?(0,f.t)("Meh"):(0,f._N)("(>[threshold][unit])",{threshold:H.MN[t],unit:i});case H.SP.GOOD:return Array.isArray(t)?(0,f.t)("Good"):(0,f._N)("(<=[threshold][unit])",{threshold:H.MN[t],unit:i});default:return null}}function T(t){return(0,N.tZ)(B,{children:t.percents.map((e=>(0,N.BX)(O,{"data-test-id":"vital-status",children:[H.Np[e.vitalState],t.showVitalPercentNames&&e.vitalState," ",(0,V.rl)(e.percent,0),t.showVitalThresholds&&M(t.vital,e.vitalState)]},e.vitalState)))})}T.displayName="VitalPercents";const B=(0,r.Z)("div",{target:"ezsdbhk1"})("display:inline-grid;grid-auto-flow:column;gap:",(0,y.D)(2),";"),O=(0,r.Z)("div",{target:"ezsdbhk0"})("display:flex;align-items:center;gap:",(0,y.D)(.5),";font-size:",(t=>t.theme.fontSizeMedium),";");var q=i("./app/views/performance/landing/utils.tsx");function L(t){const e=(0,P.Z)(),{eventView:i,location:r,organization:a,functions:n}=t,{query:l}=r,p=i.withColumns(n),c=p.getPageFilters(),m=c.datetime.start?(0,b.hC)(c.datetime.start):void 0,u=c.datetime.end?(0,b.hC)(c.datetime.end):void 0,h="string"==typeof l.sparkInterval?l.sparkInterval:(0,d.ZS)({start:m||null,end:u||null,period:c.datetime.period},"low"),g=p.getEventsAPIPayload(r);return(0,N.tZ)(w.Z,{location:r,eventView:p,orgSlug:a.slug,limit:1,referrer:"api.performance.vitals-cards",children:t=>{let{isLoading:i,tableData:r}=t;return(0,N.tZ)(o.Z,{api:e,organization:a,period:c.datetime.period,project:c.projects,environment:c.environments,team:g.team,start:m,end:u,interval:h,query:g.query,includePrevious:!1,yAxis:p.getFields(),partial:!0,children:t=>{let{results:e}=t;const o=e?.reduce(((t,e)=>(t[e.seriesName]=e.data.map((t=>t.value)),t)),{}),l=(0,q.hv)(a);return(0,N.tZ)(I,{children:n.map((t=>{let e=(0,S.sN)(t);e.includes("apdex")&&(e="apdex()");const a=l[e];if(!a)return s.uT(`Missing field '${e}' in vital cards.`),null;const{title:n,tooltip:d,formatter:p}=a,c=(0,S.LY)(e),m=r?.data?.[0]?.[c],u=o?.[e],h=i||!(0,Z.ri)(m)?"—":p(m),g=(0,N.tZ)(E,{data:u});return(0,N.tZ)(Q,{title:n,tooltip:d,value:h,chart:g,horizontal:!0,minHeight:96,isNotInteractive:!0},e)}))})}})}})}function E(t){const{data:e}=t,i=k.ZP.charts.getColorPalette(1)[0];return(0,N.tZ)(X,{"data-test-id":"sparkline",width:150,height:24,children:(0,N.tZ)(v,{data:e,width:150,height:24,children:(0,N.tZ)(h.SparklinesLine,{style:{stroke:i,fill:"none",strokeWidth:3}})})})}(0,y.D)(1.5),L.displayName="GenericCards",E.displayName="SparklineChart";const X=(0,r.Z)("div",{target:"e3mv3gn8"})("flex-grow:4;max-height:",(t=>t.height),"px;max-width:",(t=>t.width),"px;margin:",(0,y.D)(1)," ",(0,y.D)(0)," ",(0,y.D)(.5)," ",(0,y.D)(3),";"),I=(0,r.Z)("div",{target:"e3mv3gn7"})("display:grid;grid-template-columns:1fr;grid-column-gap:",(0,y.D)(2),";@media (min-width: ",(t=>t.theme.breakpoints.small),"){grid-template-columns:repeat(2, 1fr);}@media (min-width: ",(t=>t.theme.breakpoints.large),"){grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));}");function F(t){const{isLoading:e,data:i,vital:r,value:s,showBar:n=!0,showStates:o=!1,showDurationDetail:l=!1,showVitalPercentNames:d=!0,showVitalThresholds:p=!1,showDetail:m=!0,showTooltip:u=!1,barHeight:h}=t;if(e)return o?(0,N.tZ)(c.Z,{height:"48px"}):null;const g=o?(0,N.tZ)(G,{small:!0,children:(0,f.t)("No vitals found")}):null;if(!i)return g;const v={poor:0,meh:0,good:0,total:0};if((0,D.Z)(r).forEach((t=>{const e=i?.[t]??{};Object.keys(v).forEach((t=>v[t]+=e[t]))})),!v.total)return g;const x=Array.isArray(r)?null:s??function(t,e){const i=t?.p75??null;return null===i?"—":e===j.Zl.CLS?i.toFixed(2):`${i.toFixed(0)}ms`}(i?.[r]??null,r),y=function(t){let{poor:e,meh:i,good:r,total:a}=t;const s=e/a,n=i/a,o=r/a;return[{vitalState:H.SP.GOOD,percent:o},{vitalState:H.SP.MEH,percent:n},{vitalState:H.SP.POOR,percent:s}]}(v),Z=function(t){return t.map((t=>{let{percent:e,vitalState:i}=t;return{percent:e,color:H.fL[i]}}))}(y);return(0,N.BX)(a.Fragment,{children:[n&&(0,N.tZ)(W,{title:(0,N.tZ)(T,{vital:r,percents:y,showVitalPercentNames:!1,showVitalThresholds:!1,hideTooltips:u}),disabled:!u,position:"bottom",children:(0,N.tZ)(z,{barHeight:h,colorStops:Z})}),m&&(0,N.BX)(J,{children:[l&&x&&(0,N.BX)("div",{children:[(0,f.t)("The p75 for all transactions is "),(0,N.tZ)("strong",{children:x})]}),(0,N.tZ)(T,{vital:r,percents:y,showVitalPercentNames:d,showVitalThresholds:p})]})]})}F.displayName="VitalBar";const G=(0,r.Z)(p.Z,{target:"e3mv3gn6"})("height:48px;padding:",(0,y.D)(1.5)," 15%;");function Q(t){const{chart:e,minHeight:i,horizontal:r,title:a,tooltip:s,value:n,isNotInteractive:o}=t;return(0,N.BX)($,{interactive:!o,minHeight:i,children:[(0,N.BX)(l.Gh,{children:[(0,N.tZ)(K,{children:a}),(0,N.tZ)(m.Z,{size:"sm",position:"top",title:s})]}),(0,N.BX)(R,{horizontal:r,children:[(0,N.tZ)(Y,{children:n}),e]})]})}Q.displayName="VitalCard";const R=(0,r.Z)("div",{target:"e3mv3gn5"})("width:100%;display:flex;flex-direction:",(t=>t.horizontal?"row":"column"),";justify-content:space-between;"),$=(0,r.Z)(n.Z,{target:"e3mv3gn4"})("color:",(t=>t.theme.textColor),";padding:",(0,y.D)(2)," ",(0,y.D)(3),";align-items:flex-start;margin-bottom:",(0,y.D)(2),";",(t=>t.minHeight&&`min-height: ${t.minHeight}px`),";"),W=(0,r.Z)(x.u,{target:"e3mv3gn3"})({name:"1d3w5wq",styles:"width:100%"});const J=(0,r.Z)("div",{target:"e3mv3gn2"})("font-size:",(t=>t.theme.fontSizeMedium),";@media (min-width: ",(t=>t.theme.breakpoints.small),"){display:flex;justify-content:space-between;}"),Y=(0,r.Z)("div",{target:"e3mv3gn1"})("font-size:32px;margin-top:",(0,y.D)(1),";"),K=(0,r.Z)("div",{target:"e3mv3gn0"})((t=>t.theme.overflowEllipsis),";")}}]);
//# sourceMappingURL=../sourcemaps/app_components_charts_transparentLoadingMask_tsx-app_views_performance_landing_vitalsCards_tsx.72c0cf69ec7d84ad16558e4487b696ec.js.map