"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_performance_searchBar_tsx-app_utils_performance_contexts_metricsEnhancedSettin-ca62d0"],{"./app/components/performance/searchBar.tsx":(t,e,r)=>{r.d(e,{D:()=>g,Z:()=>D});var a=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(r("../node_modules/core-js/modules/es.array.push.js"),r("../node_modules/core-js/modules/es.error.cause.js"),r("../node_modules/react/index.js")),o=r("../node_modules/react-router/es/index.js"),i=r("../node_modules/lodash/debounce.js"),n=r.n(i),l=r("./app/components/searchBar.tsx"),c=r("./app/components/smartSearchBar/utils.tsx"),p=r("./app/constants/index.tsx"),d=r("./app/locale.tsx"),u=r("./app/utils/discover/genericDiscoverQuery.tsx"),m=r("./app/utils/tokenizeSearch.tsx"),_=r("./app/utils/useApi.tsx"),A=r("./app/utils/useOnClickOutside.tsx"),S=r("./app/utils/withDomainRequired.tsx"),f=r("./app/views/performance/transactionSummary/utils.tsx"),T=r("./app/components/smartSearchBar/searchDropdown.tsx"),h=r("./app/components/smartSearchBar/types.tsx"),R=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function O(t){const{organization:e,eventView:r,onSearch:a,query:i,className:O}=t,[D,I]=(0,s.useState)([]),L=D[0]?.children?.length||0,[C,v]=(0,s.useState)(-1),[M,w]=(0,s.useState)(!1),x=()=>w(!1),[F,$]=(0,s.useState)(!1),[b,N]=(0,s.useState)(i),Z=(0,s.useRef)(null);(0,A.Z)(Z,(0,s.useCallback)(x,[]));const V=(0,_.Z)(),W=r.clone(),U=`/organizations/${e.slug}/events/`,j=W.project?.map(String),k=(0,s.useCallback)(n()((async t=>{try{$(!0);const e=new m.MY("");e.addFilterValues("transaction",[g(t)],!1),e.addFilterValues("event.type",["transaction"]),Object.keys(V.activeRequests).length&&V.clear();const[r]=await(0,u.AA)(V,U,{field:["transaction","project_id","count()"],project:j,sort:"-count()",query:e.formatString(),statsPeriod:W.statsPeriod,referrer:"api.performance.transaction-name-search-bar"}),a=r.data.reduce(((t,e)=>(t.children.push({value:E(e),title:e.transaction,type:h.q.LINK,desc:""}),t)),{title:"All Transactions",children:[],icon:null,type:"header"});v(-1),I([a])}catch(t){throw new Error("Unable to fetch event field values")}finally{$(!1)}}),p.Dk,{leading:!0}),[V,U,W.statsPeriod,j.join(",")]),H=t=>{const e=P(t);G(e.transaction,!1)},G=(t,e)=>{I([]),N(t),t=new m.MY(t).formatString(),a(t?e?t:`transaction:"${t}"`:""),x()};return(0,R.BX)(y,{className:O||"","data-test-id":"transaction-search-bar",ref:Z,children:[(0,R.tZ)(l.Z,{placeholder:(0,d.t)("Search Transactions"),onChange:t=>{if(N(t),0===t.length&&a(""),t.length<3)return I([]),void x();w(!0),k(t)},onKeyDown:t=>{const{key:e}=t;if(!F)if("Escape"===e&&M)x();else{if(("ArrowUp"===e||"ArrowDown"===e)&&M&&L>0){const t=D[0].children[C],r=(C+L+("ArrowUp"===e?-1:1))%L;v(r);const a=D[0].children[r];let s=D;return t&&(s=(0,c.$l)(D,t,!1)),a&&(s=(0,c.$l)(s,a,!0)),void I(s)}if("Enter"===e){t.preventDefault();const e=D[0]?.children[C];e?.value?H(e.value):G(b,!0)}}},query:b}),M&&(0,R.tZ)(T.Z,{maxMenuHeight:300,searchSubstring:b,loading:F,items:D,onClick:H,onIconClick:t=>{(t=>{const{transaction:r,project_id:a}=t,s=W.generateQueryStringObject();I([]);const i=(0,f.e1)({orgSlug:e.slug,transaction:r,projectID:String(a),query:s});o.browserHistory.push((0,S.D)(i))})(P(t))}})]})}O.displayName="SearchBar";const E=t=>`${t.transaction}:${t.project_id}`,P=t=>{const e=t.lastIndexOf(":");return{project_id:parseInt(t.slice(e+1),10),transaction:t.slice(0,e)}},g=t=>(t.startsWith("*")||(t="*"+t),t.endsWith("*")||(t+="*"),t),y=(0,a.Z)("div",{target:"efn8czs0"})({name:"bjn8wh",styles:"position:relative"}),D=O},"./app/utils/performance/contexts/metricsEnhancedPerformanceDataContext.tsx":(t,e,r)=>{r.d(e,{AQ:()=>_,EA:()=>m,UT:()=>u,hX:()=>A});var a=r("../node_modules/react/index.js"),s=r("./app/components/tag.tsx"),o=r("./app/utils/useOrganization.tsx"),i=r("./app/views/performance/landing/widgets/utils.tsx"),n=r("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),l=r("./app/utils/performance/contexts/utils.tsx"),c=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const[p,d]=(0,l.n)({name:"MetricsEnhancedPerformanceDataContext"});function u(t){let{children:e,chartSetting:r}=t;const{setAutoSampleState:s}=(0,n.Eg)(),[o,l]=(0,a.useState)(void 0),d=(0,a.useCallback)((t=>{i.zS.includes(r)||(!0===t?s(n.nl.metrics):!1===t&&s(n.nl.transactions),l(t))}),[s,l,r]);return(0,c.tZ)(p,{value:{isMetricsData:o,setIsMetricsData:d},children:e})}u.displayName="MEPDataProvider";const m=d;function _(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t?.meta?.isMetricsData??t?.seriesAdditionalInfo?.[e]?.isMetricsData??t?.histograms?.meta?.isMetricsData??t?.tableData?.meta?.isMetricsData}function A(){const{isMetricsData:t}=m();if(!(0,o.Z)().features.includes("performance-use-metrics"))return null;if(void 0===t)return(0,c.tZ)("span",{"data-test-id":"no-metrics-data-tag"});const e=t?"processed":"indexed";return(0,c.tZ)(s.Z,{"data-test-id":"has-metrics-data-tag",children:e})}A.displayName="MEPTag"},"./app/utils/performance/contexts/metricsEnhancedSetting.tsx":(t,e,r)=>{r.d(e,{Eg:()=>R,gp:()=>T,kP:()=>h,nP:()=>m,nl:()=>_,oR:()=>A,tm:()=>f});var a=r("../node_modules/react/index.js"),s=r("../node_modules/react-router/es/index.js"),o=(r("./app/utils/localStorage.tsx"),r("./app/utils/performance/contexts/metricsEnhancedPerformanceDataContext.tsx")),i=r("./app/utils/queryString.tsx"),n=r("./app/utils/useOrganization.tsx"),l=r("./app/utils/performance/contexts/utils.tsx"),c=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const[p,d,u]=(0,l.n)({name:"MetricsEnhancedSettingContext"}),m=u.Consumer;let _,A;!function(t){t.unset="unset",t.metrics="metrics",t.transactions="transactions"}(_||(_={})),function(t){t.auto="auto",t.metricsOnly="metricsOnly",t.transactionsOnly="transactionsOnly"}(A||(A={}));const S="metricSetting",f="metricSearchSetting";function T(t){const e=function(t){return t.features.includes("performance-use-metrics")}(t),r=t.features.includes("performance-transaction-name-only-search"),a=t.features.includes("dynamic-sampling")&&t.features.includes("mep-rollout-flag");return e||r||a}function h(t){let{children:e,location:r,_hasMEPState:l,forceTransactions:d}=t;const u=T((0,n.Z)()),m=[A.metricsOnly,A.transactionsOnly],f=r?(0,i.ro)(r.query[S]):A.metricsOnly;let h=A.metricsOnly;d&&(h=A.transactionsOnly);const R=m.find((t=>t===f))??h,O=void 0!==l,[E,P]=(0,a.useReducer)(((t,e)=>e),R),g=(0,a.useCallback)((t=>{r&&(s.browserHistory.replace({...r,query:{...r.query,[S]:t}}),P(t))}),[r,P]),[y,D]=(0,a.useReducer)(((t,e)=>e),_.unset),I=O?l:E,L=u&&I===A.auto,C=u&&I===A.metricsOnly,v=u&&I===A.transactionsOnly,M=`${I}`;return(0,c.tZ)(p,{value:{autoSampleState:y,metricSettingState:I,shouldQueryProvideMEPAutoParams:L,shouldQueryProvideMEPMetricParams:C,shouldQueryProvideMEPTransactionParams:v,memoizationKey:M,setMetricSettingState:g,setAutoSampleState:D},children:(0,c.tZ)(o.UT,{children:e})})}h.displayName="MEPSettingProvider";const R=d},"./app/views/performance/landing/utils.tsx":(t,e,r)=>{r.d(e,{BY:()=>A,Cf:()=>T,Lx:()=>S,NJ:()=>O,Oo:()=>E,Q_:()=>R,TT:()=>h,ZR:()=>g,hv:()=>P,kP:()=>f}),r("../node_modules/core-js/modules/es.array.push.js");var a=r("../node_modules/react-router/es/index.js"),s=r("../node_modules/lodash/omit.js"),o=r.n(s),i=r("./app/locale.tsx"),n=r("./app/utils/analytics.tsx"),l=r("./app/utils/formatters.tsx"),c=r("./app/utils/queryString.tsx"),p=r("./app/utils/tokenizeSearch.tsx"),d=r("./app/views/performance/data.tsx"),u=r("./app/views/performance/utils.tsx");const m="left",_="right";let A;!function(t){t.ALL="all",t.FRONTEND_PAGELOAD="frontend_pageload",t.FRONTEND_OTHER="frontend_other",t.BACKEND="backend",t.MOBILE="mobile"}(A||(A={}));const S=[{label:(0,i.t)("All Transactions"),field:A.ALL},{label:(0,i.t)("Web Vitals"),field:A.FRONTEND_PAGELOAD},{label:(0,i.t)("Frontend"),field:A.FRONTEND_OTHER},{label:(0,i.t)("Backend"),field:A.BACKEND},{label:(0,i.t)("Mobile"),field:A.MOBILE}];function f(t,e){const{eventView:r,location:s}=e,o=new p.MY(r.query);o.addFilterValues("!transaction",[`${t}`]),a.browserHistory.push({pathname:s.pathname,query:{...s.query,cursor:void 0,query:o.formatString()}})}function T(t){const e=(0,c.ro)(t?.query?.landingDisplay);return S.find((t=>{let{field:r}=t;return r===e}))}function h(t,e){const r=E(t,e);return S.find((t=>{let{field:e}=t;return e===r}))||S[0]}function R(t,e,r){return T(t)||h(e,r)}function O(t,e,r,s,i){const l=(0,c.ro)(e.query.query,""),d=new p.MY(l);d.removeFilter("transaction.op");const u={...o()(e.query,["landingDisplay","sort"]),query:d.formatString()};delete u[m],delete u[_];const A=E(r,i),S=R(e,r,i).field,f=A===t?{...u}:{...u,landingDisplay:t};(0,n.Gi)("performance_views.landingv3.display_change",{organization:s,change_to_display:t,default_display:A,current_display:S,is_default:A===S}),a.browserHistory.push({pathname:e.pathname,query:f})}function E(t,e){if(!e)return A.ALL;const r=e.project;return{[u.iy.ANY]:A.ALL,[u.iy.FRONTEND]:A.FRONTEND_PAGELOAD,[u.iy.BACKEND]:A.BACKEND,[u.iy.MOBILE]:A.MOBILE}[(0,u.Bh)(t,r)]??A.ALL}const P=t=>({"p75(transaction.duration)":{title:(0,i.t)("Duration (p75)"),tooltip:(0,d.$r)(t,d.V$.P75),formatter:t=>(0,l.g9)(t/1e3,t>=1e3?3:0,!0)},"tpm()":{title:(0,i.t)("Throughput"),tooltip:(0,d.$r)(t,d.V$.THROUGHPUT),formatter:l.Du},"failure_rate()":{title:(0,i.t)("Failure Rate"),tooltip:(0,d.$r)(t,d.V$.FAILURE_RATE),formatter:t=>(0,l.rl)(t,2)},"apdex()":{title:(0,i.t)("Apdex"),tooltip:(0,d.$r)(t,d.V$.APDEX),formatter:t=>(0,l.$1)(t,4)},"p75(measurements.frames_slow_rate)":{title:(0,i.t)("Slow Frames (p75)"),tooltip:(0,d.$r)(t,d.V$.SLOW_FRAMES),formatter:t=>(0,l.rl)(t,2)},"p75(measurements.frames_frozen_rate)":{title:(0,i.t)("Frozen Frames (p75)"),tooltip:(0,d.$r)(t,d.V$.FROZEN_FRAMES),formatter:t=>(0,l.rl)(t,2)},"p75(measurements.app_start_cold)":{title:(0,i.t)("Cold Start (p75)"),tooltip:(0,d.$r)(t,d.V$.APP_START_COLD),formatter:t=>(0,l.g9)(t/1e3,t>=1e3?3:0,!0)},"p75(measurements.app_start_warm)":{title:(0,i.t)("Warm Start (p75)"),tooltip:(0,d.$r)(t,d.V$.APP_START_WARM),formatter:t=>(0,l.g9)(t/1e3,t>=1e3?3:0,!0)},"p75(measurements.stall_percentage)":{title:(0,i.t)("Stall Percentage (p75)"),tooltip:(0,d.$r)(t,d.V$.STALL_PERCENTAGE),formatter:t=>(0,l.rl)(t,2)}});function g(t){return Boolean(t.getFields().find((t=>t.includes("measurements.stall_percentage"))))}},"./app/views/performance/landing/widgets/types.tsx":(t,e,r)=>{let a,s;r.d(e,{A:()=>s}),function(t){t.ERROR="error",t.LOADING="loading",t.EMPTY="empty",t.DATA="data"}(a||(a={})),function(t){t.histogram="histogram",t.area="area",t.vitals="vitals",t.line_list="line_list",t.trends="trends",t.stacked_area="stacked_area"}(s||(s={}))},"./app/views/performance/landing/widgets/utils.tsx":(t,e,r)=>{r.d(e,{CJ:()=>n,I2:()=>d,gM:()=>c,hD:()=>T,rp:()=>A,zM:()=>S,zS:()=>p});var a=r("./app/utils.tsx"),s=r("./app/utils/localStorage.tsx"),o=r("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),i=r("./app/views/performance/landing/widgets/widgetDefinitions.tsx");const n=["children","organization","yAxis","period","start","end","environment","project","referrer"],l={};function c(t,e){let r={};const s=l;return(t.shouldQueryProvideMEPAutoParams||e)&&(r={...r,...s,dataset:"metricsEnhanced"},e)?r:(t.shouldQueryProvideMEPTransactionParams&&(r={...r,...s,dataset:"discover"}),t.shouldQueryProvideMEPMetricParams&&(r={...r,...s,dataset:"metrics"}),(0,a.z)(r)?void 0:r)}const p=[i.s.MOST_RELATED_ERRORS,i.s.MOST_RELATED_ISSUES];function d(t,e){if(!p.includes(e))return c(t)}const u="landing-chart-container",m=(t,e,r)=>`landing-chart-container#${e}#${r}#${t}`;function _(){return JSON.parse(s.Z.getItem(u)||"{}")}const A=(t,e,r,a,s)=>{if(s)return a;const o=m(t,r,e),n=_(),l=n?.[o];return l&&Object.values(i.s).includes(l)?l:a},S=(t,e,r,a)=>{const o=m(t,r,e),i=_();i[o]=a,function(t){s.Z.setItem(u,JSON.stringify(t))}(i)},f=[i.s.DURATION_HISTOGRAM,i.s.FCP_HISTOGRAM,i.s.LCP_HISTOGRAM,i.s.FID_HISTOGRAM];function T(t,e,r){return!(0,o.gp)(t)||t.features.includes("performance-mep-reintroduce-histograms")||r.metricSettingState===o.oR.transactionsOnly?e:e.filter((t=>!f.includes(t)))}},"./app/views/performance/landing/widgets/widgetDefinitions.tsx":(t,e,r)=>{r.d(e,{W:()=>p,s:()=>l});var a=r("./app/constants/chartPalette.tsx"),s=r("./app/locale.tsx"),o=r("./app/utils/discover/fields.tsx"),i=r("./app/views/performance/data.tsx"),n=r("./app/views/performance/landing/widgets/types.tsx");let l;!function(t){t.DURATION_HISTOGRAM="duration_histogram",t.LCP_HISTOGRAM="lcp_histogram",t.FCP_HISTOGRAM="fcp_histogram",t.FID_HISTOGRAM="fid_histogram",t.APDEX_AREA="apdex_area",t.P50_DURATION_AREA="p50_duration_area",t.P75_DURATION_AREA="p75_duration_area",t.P95_DURATION_AREA="p95_duration_area",t.P99_DURATION_AREA="p99_duration_area",t.P75_LCP_AREA="p75_lcp_area",t.TPM_AREA="tpm_area",t.FAILURE_RATE_AREA="failure_rate_area",t.USER_MISERY_AREA="user_misery_area",t.WORST_LCP_VITALS="worst_lcp_vitals",t.WORST_FCP_VITALS="worst_fcp_vitals",t.WORST_CLS_VITALS="worst_cls_vitals",t.WORST_FID_VITALS="worst_fid_vitals",t.MOST_IMPROVED="most_improved",t.MOST_REGRESSED="most_regressed",t.MOST_RELATED_ERRORS="most_related_errors",t.MOST_RELATED_ISSUES="most_related_issues",t.SLOW_HTTP_OPS="slow_http_ops",t.SLOW_DB_OPS="slow_db_ops",t.SLOW_RESOURCE_OPS="slow_resource_ops",t.SLOW_BROWSER_OPS="slow_browser_ops",t.COLD_STARTUP_AREA="cold_startup_area",t.WARM_STARTUP_AREA="warm_startup_area",t.SLOW_FRAMES_AREA="slow_frames_area",t.FROZEN_FRAMES_AREA="frozen_frames_area",t.MOST_SLOW_FRAMES="most_slow_frames",t.MOST_FROZEN_FRAMES="most_frozen_frames",t.SPAN_OPERATIONS="span_operations",t.TIME_TO_INITIAL_DISPLAY="time_to_initial_display",t.TIME_TO_FULL_DISPLAY="time_to_full_display"}(l||(l={}));const c=a.$[5],p=t=>{let{organization:e}=t;return{[l.DURATION_HISTOGRAM]:{title:(0,s.t)("Duration Distribution"),titleTooltip:(0,i.$r)(e,i.V$.DURATION_DISTRIBUTION),fields:["transaction.duration"],dataType:n.A.histogram,chartColor:c[5]},[l.LCP_HISTOGRAM]:{title:(0,s.t)("LCP Distribution"),titleTooltip:(0,i.$r)(e,i.V$.DURATION_DISTRIBUTION),fields:["measurements.lcp"],dataType:n.A.histogram,chartColor:c[5]},[l.FCP_HISTOGRAM]:{title:(0,s.t)("FCP Distribution"),titleTooltip:(0,i.$r)(e,i.V$.DURATION_DISTRIBUTION),fields:["measurements.fcp"],dataType:n.A.histogram,chartColor:c[5]},[l.FID_HISTOGRAM]:{title:(0,s.t)("FID Distribution"),titleTooltip:(0,i.$r)(e,i.V$.DURATION_DISTRIBUTION),fields:["measurements.fid"],dataType:n.A.histogram,chartColor:c[5]},[l.WORST_LCP_VITALS]:{title:(0,s.t)("Worst LCP Web Vitals"),titleTooltip:(0,i.$r)(e,i.V$.LCP),fields:["measurements.lcp"],vitalStops:{poor:4e3,meh:2500},dataType:n.A.vitals},[l.WORST_FCP_VITALS]:{title:(0,s.t)("Worst FCP Web Vitals"),titleTooltip:(0,i.$r)(e,i.V$.FCP),fields:["measurements.fcp"],vitalStops:{poor:3e3,meh:1e3},dataType:n.A.vitals},[l.WORST_FID_VITALS]:{title:(0,s.t)("Worst FID Web Vitals"),titleTooltip:(0,i.$r)(e,i.V$.FID),fields:["measurements.fid"],vitalStops:{poor:300,meh:100},dataType:n.A.vitals},[l.WORST_CLS_VITALS]:{title:(0,s.t)("Worst CLS Web Vitals"),titleTooltip:(0,i.$r)(e,i.V$.CLS),fields:["measurements.cls"],vitalStops:{poor:.25,meh:.1},dataType:n.A.vitals},[l.TPM_AREA]:{title:(0,s.t)("Transactions Per Minute"),titleTooltip:(0,i.$r)(e,i.V$.TPM),fields:["tpm()"],dataType:n.A.area,chartColor:c[1],allowsOpenInDiscover:!0},[l.APDEX_AREA]:{title:(0,s.t)("Apdex"),titleTooltip:(0,i.$r)(e,i.V$.APDEX),fields:["apdex()"],dataType:n.A.area,chartColor:c[4],allowsOpenInDiscover:!0},[l.P50_DURATION_AREA]:{title:(0,s.t)("p50 Duration"),titleTooltip:(0,i.$r)(e,i.V$.P50),fields:["p50(transaction.duration)"],dataType:n.A.area,chartColor:c[3],allowsOpenInDiscover:!0},[l.P75_DURATION_AREA]:{title:(0,s.t)("p75 Duration"),titleTooltip:(0,i.$r)(e,i.V$.P75),fields:["p75(transaction.duration)"],dataType:n.A.area,chartColor:c[3],allowsOpenInDiscover:!0},[l.P95_DURATION_AREA]:{title:(0,s.t)("p95 Duration"),titleTooltip:(0,i.$r)(e,i.V$.P95),fields:["p95(transaction.duration)"],dataType:n.A.area,chartColor:c[3],allowsOpenInDiscover:!0},[l.P99_DURATION_AREA]:{title:(0,s.t)("p99 Duration"),titleTooltip:(0,i.$r)(e,i.V$.P99),fields:["p99(transaction.duration)"],dataType:n.A.area,chartColor:c[3],allowsOpenInDiscover:!0},[l.P75_LCP_AREA]:{title:(0,s.t)("p75 LCP"),titleTooltip:(0,i.$r)(e,i.V$.P75),fields:["p75(measurements.lcp)"],dataType:n.A.area,chartColor:c[1],allowsOpenInDiscover:!0},[l.FAILURE_RATE_AREA]:{title:(0,s.t)("Failure Rate"),titleTooltip:(0,i.$r)(e,i.V$.FAILURE_RATE),fields:["failure_rate()"],dataType:n.A.area,chartColor:c[2],allowsOpenInDiscover:!0},[l.USER_MISERY_AREA]:{title:(0,s.t)("User Misery"),titleTooltip:(0,i.$r)(e,i.V$.USER_MISERY),fields:["user_misery()"],dataType:n.A.area,chartColor:c[0],allowsOpenInDiscover:!0},[l.COLD_STARTUP_AREA]:{title:(0,s.t)("Cold Startup Time"),titleTooltip:(0,i.$r)(e,i.V$.APP_START_COLD),fields:["p75(measurements.app_start_cold)"],dataType:n.A.area,chartColor:c[4],allowsOpenInDiscover:!0},[l.WARM_STARTUP_AREA]:{title:(0,s.t)("Warm Startup Time"),titleTooltip:(0,i.$r)(e,i.V$.APP_START_WARM),fields:["p75(measurements.app_start_warm)"],dataType:n.A.area,chartColor:c[3],allowsOpenInDiscover:!0},[l.SLOW_FRAMES_AREA]:{title:(0,s.t)("Slow Frames"),titleTooltip:(0,i.$r)(e,i.V$.SLOW_FRAMES),fields:["p75(measurements.frames_slow_rate)"],dataType:n.A.area,chartColor:c[0],allowsOpenInDiscover:!0},[l.FROZEN_FRAMES_AREA]:{title:(0,s.t)("Frozen Frames"),titleTooltip:(0,i.$r)(e,i.V$.FROZEN_FRAMES),fields:["p75(measurements.frames_frozen_rate)"],dataType:n.A.area,chartColor:c[5],allowsOpenInDiscover:!0},[l.MOST_RELATED_ERRORS]:{title:(0,s.t)("Most Related Errors"),titleTooltip:(0,i.$r)(e,i.V$.MOST_ERRORS),fields:["failure_count()"],dataType:n.A.line_list,chartColor:c[0]},[l.MOST_RELATED_ISSUES]:{title:(0,s.t)("Most Related Issues"),titleTooltip:(0,i.$r)(e,i.V$.MOST_ISSUES),fields:["count()"],dataType:n.A.line_list,chartColor:c[0]},[l.SLOW_HTTP_OPS]:{title:(0,s.t)("Slow HTTP Ops"),titleTooltip:(0,i.$r)(e,i.V$.SLOW_HTTP_SPANS),fields:["p75(spans.http)"],dataType:n.A.line_list,chartColor:c[0]},[l.SLOW_BROWSER_OPS]:{title:(0,s.t)("Slow Browser Ops"),titleTooltip:(0,i.$r)(e,i.V$.SLOW_HTTP_SPANS),fields:["p75(spans.browser)"],dataType:n.A.line_list,chartColor:c[0]},[l.SLOW_RESOURCE_OPS]:{title:(0,s.t)("Slow Resource Ops"),titleTooltip:(0,i.$r)(e,i.V$.SLOW_HTTP_SPANS),fields:["p75(spans.resource)"],dataType:n.A.line_list,chartColor:c[0]},[l.SLOW_DB_OPS]:{title:(0,s.t)("Slow DB Ops"),titleTooltip:(0,i.$r)(e,i.V$.SLOW_HTTP_SPANS),fields:["p75(spans.db)"],dataType:n.A.line_list,chartColor:c[0]},[l.TIME_TO_INITIAL_DISPLAY]:{title:(0,s.t)("Time to Initial Display"),titleTooltip:(0,i.$r)(e,i.V$.TIME_TO_INITIAL_DISPLAY),fields:["p75(measurements.time_to_initial_display)"],dataType:n.A.area,chartColor:c[4],allowsOpenInDiscover:!0},[l.TIME_TO_FULL_DISPLAY]:{title:(0,s.t)("Time to Full Display"),titleTooltip:(0,i.$r)(e,i.V$.TIME_TO_FULL_DISPLAY),fields:["p75(measurements.time_to_full_display)"],dataType:n.A.area,chartColor:c[4],allowsOpenInDiscover:!0},[l.MOST_SLOW_FRAMES]:{title:(0,s.t)("Most Slow Frames"),titleTooltip:(0,i.$r)(e,i.V$.SLOW_FRAMES),fields:["avg(measurements.frames_slow)"],dataType:n.A.line_list,chartColor:c[0]},[l.MOST_FROZEN_FRAMES]:{title:(0,s.t)("Most Frozen Frames"),titleTooltip:(0,i.$r)(e,i.V$.FROZEN_FRAMES),fields:["avg(measurements.frames_frozen)"],dataType:n.A.line_list,chartColor:c[0]},[l.MOST_IMPROVED]:{title:(0,s.t)("Most Improved"),titleTooltip:(0,s.t)("This compares the baseline (%s) of the past with the present.","improved"),fields:[],dataType:n.A.trends},[l.MOST_REGRESSED]:{title:(0,s.t)("Most Regressed"),titleTooltip:(0,s.t)("This compares the baseline (%s) of the past with the present.","regressed"),fields:[],dataType:n.A.trends},[l.SPAN_OPERATIONS]:{title:(0,s.t)("Span Operations Breakdown"),titleTooltip:"",fields:o.$4.map((t=>`p75(${t})`)),dataType:n.A.stacked_area}}}},"./app/views/performance/vitalDetail/utils.tsx":(t,e,r)=>{r.d(e,{EX:()=>C,MN:()=>_,Np:()=>f,SP:()=>A,Uy:()=>R,Ve:()=>O,W0:()=>D,a7:()=>y,cD:()=>L,eE:()=>m,fL:()=>S,i4:()=>T,iF:()=>h,il:()=>g,jo:()=>P,q4:()=>E,vk:()=>I});var a=r("./app/components/charts/components/markLine.tsx"),s=r("./app/components/charts/utils.tsx"),o=r("./app/icons/index.tsx"),i=r("./app/locale.tsx"),n=r("./app/utils/discover/charts.tsx"),l=r("./app/utils/discover/fields.tsx"),c=r("./app/utils/fields/index.ts"),p=r("./app/utils/performance/vitals/constants.tsx"),d=r("./app/utils/queryString.tsx"),u=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const m={[c.Zl.FP]:3e3,[c.Zl.FCP]:3e3,[c.Zl.LCP]:4e3,[c.Zl.FID]:300,[c.Zl.CLS]:.25},_={[c.Zl.FP]:1e3,[c.Zl.FCP]:1e3,[c.Zl.LCP]:2500,[c.Zl.FID]:100,[c.Zl.CLS]:.1};let A;!function(t){t.POOR="Poor",t.MEH="Meh",t.GOOD="Good"}(A||(A={}));const S={[A.POOR]:"red300",[A.MEH]:"yellow300",[A.GOOD]:"green300"},f={[A.POOR]:(0,u.tZ)(o.pY,{color:S[A.POOR]}),[A.MEH]:(0,u.tZ)(o.tC,{color:S[A.MEH]}),[A.GOOD]:(0,u.tZ)(o.O1,{color:S[A.GOOD]})};function T(t){let{orgSlug:e,vitalName:r,projectID:a,query:s}=t;const o=function(t){let{orgSlug:e}=t;return`/organizations/${e}/performance/vitaldetail/`}({orgSlug:e});return{pathname:o,query:{vitalName:r,project:a,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}function h(t){const e=(0,d.ro)(t.query.vitalName);return Object.values(c.Zl).find((t=>t===e))||c.Zl.LCP}function R(t){return t===c.Zl.CLS?(0,i.t)("CLS p75"):(0,i.t)("Duration p75")}function O(t){const e=m[t];return`compare_numeric_aggregate(${(0,l.LY)(`p75(${t})`)},greater,${e})`}function E(t){const e=_[t];return`compare_numeric_aggregate(${(0,l.LY)(`p75(${t})`)},greater,${e})`}const P={[c.Zl.FCP]:(0,i.t)("First Contentful Paint"),[c.Zl.CLS]:(0,i.t)("Cumulative Layout Shift"),[c.Zl.FID]:(0,i.t)("First Input Delay"),[c.Zl.LCP]:(0,i.t)("Largest Contentful Paint")},g={[c.Zl.FCP]:(0,i.t)("First Contentful Paint (FCP) measures the amount of time the first content takes to render in the viewport. Like FP, this could also show up in any form from the document object model (DOM), such as images, SVGs, or text blocks. At the moment, there is support for FCP in the following browsers:"),[c.Zl.CLS]:(0,i.t)("Cumulative Layout Shift (CLS) is the sum of individual layout shift scores for every unexpected element shift during the rendering process. Imagine navigating to an article and trying to click a link before the page finishes loading. Before your cursor even gets there, the link may have shifted down due to an image rendering. Rather than using duration for this Web Vital, the CLS score represents the degree of disruptive and visually unstable shifts. At the moment, there is support for CLS in the following browsers:"),[c.Zl.FID]:(0,i.t)("First Input Delay (FID) measures the response time when the user tries to interact with the viewport. Actions maybe include clicking a button, link or other custom Javascript controller. It is key in helping the user determine if a page is usable or not. At the moment, there is support for FID in the following browsers:"),[c.Zl.LCP]:(0,i.t)("Largest Contentful Paint (LCP) measures the render time for the largest content to appear in the viewport. This may be in any form from the document object model (DOM), such as images, SVGs, or text blocks. Itâ€™s the largest pixel area in the viewport, thus most visually defining. LCP helps developers understand how long it takes to see the main content on the page. At the moment, there is support for LCP in the following browsers:")},y={[c.Zl.FCP]:"FCP",[c.Zl.CLS]:"CLS",[c.Zl.FID]:"FID",[c.Zl.LCP]:"LCP"},D={[c.Zl.FCP]:"custom",[c.Zl.CLS]:"cls",[c.Zl.FID]:"fid",[c.Zl.LCP]:"lcp"};function I(t){let e=-1/0;for(const{data:r}of t)for(const t of r)e=Math.max(e,t.value);return e}const L={[c.Zl.LCP]:[p.AR.CHROME,p.AR.EDGE,p.AR.OPERA],[c.Zl.FID]:[p.AR.CHROME,p.AR.EDGE,p.AR.OPERA,p.AR.FIREFOX,p.AR.SAFARI,p.AR.IE],[c.Zl.CLS]:[p.AR.CHROME,p.AR.EDGE,p.AR.OPERA],[c.Zl.FP]:[p.AR.CHROME,p.AR.EDGE,p.AR.OPERA],[c.Zl.FCP]:[p.AR.CHROME,p.AR.EDGE,p.AR.OPERA,p.AR.FIREFOX,p.AR.SAFARI],[c.Zl.TTFB]:[p.AR.CHROME,p.AR.EDGE,p.AR.OPERA,p.AR.FIREFOX,p.AR.SAFARI,p.AR.IE]};function C(t){let{theme:e,location:r,vital:o,yAxis:p}=t;const u="false"!==(0,d.ro)(r.query.utc),A=m[o],S=_[o];return{vitalPoor:A,vitalMeh:S,legend:{right:10,top:0,selected:(0,s.RI)(r)},chartOptions:{grid:{left:"5px",right:"10px",top:"35px",bottom:"0px"},seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",valueFormatter:(t,e)=>(0,n.CX)(t,(0,l.Px)(o===c.Zl.CLS?e:p))},yAxis:{min:0,max:A,axisLabel:{color:e.chartLabel,showMaxLabel:!1,formatter:t=>(0,n.gu)(t,(0,l.Px)(p))}}},markLines:[{seriesName:"Thresholds",type:"line",data:[],markLine:(0,a.Z)({silent:!0,lineStyle:{color:e.red300,type:"dashed",width:1.5},label:{show:!0,position:"insideEndTop",formatter:(0,i.t)("Poor")},data:[{yAxis:A}]})},{seriesName:"Thresholds",type:"line",data:[],markLine:(0,a.Z)({silent:!0,lineStyle:{color:e.yellow300,type:"dashed",width:1.5},label:{show:!0,position:"insideEndTop",formatter:(0,i.t)("Meh")},data:[{yAxis:S}]})}],utc:u}}}}]);
//# sourceMappingURL=../sourcemaps/app_components_performance_searchBar_tsx-app_utils_performance_contexts_metricsEnhancedSettin-ca62d0.011c2af2b0536038247ae5ea74c1ff10.js.map