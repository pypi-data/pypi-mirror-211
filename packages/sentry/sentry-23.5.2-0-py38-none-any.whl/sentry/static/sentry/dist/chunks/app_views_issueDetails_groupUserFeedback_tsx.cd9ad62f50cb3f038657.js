"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_issueDetails_groupUserFeedback_tsx"],{"./app/views/issueDetails/groupUserFeedback.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("../node_modules/react/index.js"),n=s("../node_modules/lodash/isEqual.js"),a=s.n(n),u=s("./app/components/events/userFeedback.tsx"),c=s("./app/components/layouts/thirds.tsx"),p=s("./app/components/loadingError.tsx"),d=s("./app/components/loadingIndicator.tsx"),l=s("./app/components/pagination.tsx"),h=s("./app/styles/space.tsx"),m=s("./app/utils/withOrganization.tsx"),g=s("./app/views/userFeedback/userFeedbackEmpty.tsx"),f=s("./app/views/issueDetails/utils.tsx"),b=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class w extends r.Component{constructor(){super(...arguments),(0,o.Z)(this,"state",{loading:!0,error:!1,reportList:[],pageLinks:""}),(0,o.Z)(this,"fetchData",(()=>{this.setState({loading:!0,error:!1}),(0,f.g5)(this.props.group.id,{...this.props.params,cursor:this.props.location.query.cursor||""}).then((e=>{let[t,s,o]=e;this.setState({error:!1,loading:!1,reportList:t,pageLinks:o?.getResponseHeader("Link")})})).catch((()=>{this.setState({error:!0,loading:!1})}))}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){a()(e.params,this.props.params)&&e.location.pathname===this.props.location.pathname&&e.location.search===this.props.location.search||this.fetchData()}render(){const{reportList:e,loading:t,error:s}=this.state,{organization:o,group:i}=this.props;return t?(0,b.tZ)(d.Z,{}):s?(0,b.tZ)(p.Z,{onRetry:this.fetchData}):e.length?(0,b.tZ)(c.uT,{children:(0,b.BX)(c.or,{children:[e.map(((e,t)=>(0,b.tZ)(_,{report:e,orgId:o.slug,issueId:i.id},t))),(0,b.tZ)(l.Z,{pageLinks:this.state.pageLinks,...this.props})]})}):(0,b.tZ)(c.uT,{children:(0,b.tZ)(c.or,{fullWidth:!0,children:(0,b.tZ)(g.X,{projectIds:[i.project.id]})})})}}w.displayName="GroupUserFeedback";const _=(0,i.Z)(u.o,{target:"e11m39vv0"})("margin-bottom:",(0,h.D)(2),";"),v=(0,m.Z)(w)},"./app/views/issueDetails/utils.tsx":(e,t,s)=>{s.d(t,{Ad:()=>g,M3:()=>b,V7:()=>p,V8:()=>_,by:()=>w,dG:()=>l,g5:()=>d,m7:()=>f,sC:()=>m});var o=s("../node_modules/react/index.js"),i=s("../node_modules/lodash/orderBy.js"),r=s.n(i),n=s("./app/actionCreators/group.tsx"),a=s("./app/api.tsx"),u=s("./app/locale.tsx"),c=s("./app/utils/useLocation.tsx");function p(e,t,s,o){(0,n.Gv)(e,{orgId:t,projectId:s,itemIds:[o],failSilently:!0,data:{hasSeen:!0}},{})}function d(e,t){return(new a.KU).requestPromise(`/issues/${e}/user-reports/`,{includeAllArgs:!0,query:t})}function l(e){const t=e.tags.find((e=>{let{key:t}=e;return"environment"===t}));return t?t.value:null}const h={commented:(0,u.t)("You're receiving workflow notifications because you have commented on this issue."),assigned:(0,u.t)("You're receiving workflow notifications because you were assigned to this issue."),bookmarked:(0,u.t)("You're receiving workflow notifications because you have bookmarked this issue."),changed_status:(0,u.t)("You're receiving workflow notifications because you have changed the status of this issue."),mentioned:(0,u.t)("You're receiving workflow notifications because you have been mentioned in this issue.")};function m(e){if(e.subscriptionDetails&&e.subscriptionDetails.disabled)return(0,u.t)("You have disabled workflow notifications for this project.");if(!e.isSubscribed)return(0,u.t)("Subscribe to workflow notifications for this issue");if(e.subscriptionDetails){const{reason:t}=e.subscriptionDetails;if("unknown"===t)return(0,u.t)("You're receiving workflow notifications because you are subscribed to this issue.");if(t&&h.hasOwnProperty(t))return h[t]}return(0,u.t)("You're receiving updates because you are subscribed to workflow notifications for this project.")}function g(e){return r()([...e],(e=>{let{dateCreated:t}=e;return new Date(t)}),["desc"])[0]}let f;function b(e,t){const{status:s,count:o,activity:i}=e,r=Number(o);switch(s){case"reprocessing":return f.REPROCESSING;case"unresolved":{const e=t??g(i);return"reprocess"===e?.type?0===r?f.REPROCESSED_AND_HASNT_EVENT:f.REPROCESSED_AND_HAS_EVENT:f.NO_STATUS}default:return f.NO_STATUS}}!function(e){e.REPROCESSED_AND_HASNT_EVENT="reprocessed_and_hasnt_event",e.REPROCESSED_AND_HAS_EVENT="reprocessed_and_has_event",e.REPROCESSING="reprocessing",e.NO_STATUS="no_status"}(f||(f={}));const w=function(e){let{groupId:t,environment:s=[]}=e,{enabled:o=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.zk)({groupId:t,environment:s,readable:!0,limit:4},{enabled:o})};function _(){const e=(0,c.T)().query.environment;return(0,o.useMemo)((()=>"string"==typeof e?[e]:e??[]),[e])}}}]);
//# sourceMappingURL=../sourcemaps/app_views_issueDetails_groupUserFeedback_tsx.53e2cde3b0d07a70bf0f58475cd06242.js.map