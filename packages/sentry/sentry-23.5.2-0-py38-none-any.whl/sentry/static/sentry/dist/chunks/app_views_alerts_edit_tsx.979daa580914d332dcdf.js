"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_alerts_edit_tsx"],{"./app/views/alerts/edit.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>I});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/react/index.js"),i=s("./app/components/layouts/thirds.tsx"),n=s("./app/components/loadingIndicator.tsx"),l=s("./app/components/sentryDocumentTitle.tsx"),p=s("./app/locale.tsx"),u=s("./app/utils/analytics.tsx"),d=s("./app/utils/teams.tsx"),c=s("./app/views/alerts/builder/builderBreadCrumbs.tsx"),h=s("./app/views/alerts/rules/issue/index.tsx"),m=(s("../node_modules/core-js/modules/es.array.push.js"),s("./app/actionCreators/indicator.tsx")),g=s("./app/components/alert.tsx"),x=s("./app/utils/routeTitle.tsx"),T=s("./app/utils/withDomainRequired.tsx"),Z=s("./app/views/alerts/rules/metric/ruleForm.tsx"),b=s("./app/views/asyncView.tsx"),j=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class y extends b.Z{constructor(){super(...arguments),(0,r.Z)(this,"handleSubmitSuccess",(()=>{const{organization:e,router:t}=this.props,{ruleId:s}=this.props.params;u.oF.endTransaction({name:"saveAlertRule"}),t.push((0,T.D)({pathname:`/organizations/${e.slug}/alerts/rules/details/${s}/`}))}))}getDefaultState(){return{...super.getDefaultState(),actions:new Map}}getTitle(){const{organization:e,project:t}=this.props,{rule:s}=this.state,r=s?.name;return(0,x.Z)(r?(0,p.t)("Alert %s",r):"",e.slug,!1,t?.slug)}getEndpoints(){const{organization:e}=this.props,{ruleId:t}=this.props.params;return[["rule",`/organizations/${e.slug}/alert-rules/${t}/`]]}onRequestSuccess(e){let{stateKey:t,data:s}=e;"rule"===t&&s.name&&this.props.onChangeTitle(s.name)}onLoadAllEndpointsSuccess(){const{rule:e}=this.state;e?.errors&&(e?.errors||[]).map((e=>{let{detail:t}=e;return(0,m.Iw)(t,{append:!0})}))}renderError(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{errors:s}=this.state;return Object.values(s).find((e=>e&&404===e.status))?(0,j.tZ)(g.bZ,{type:"error",showIcon:!0,children:(0,p.t)("This alert rule could not be found.")}):super.renderError(e,t)}renderBody(){const{ruleId:e}=this.props.params,{rule:t}=this.state;return(0,j.tZ)(Z.Z,{...this.props,ruleId:e,rule:t,onSubmitSuccess:this.handleSubmitSuccess,disableProjectSelector:!0})}}const S=y;var w=s("./app/views/alerts/types.tsx");class v extends o.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{ruleName:""}),(0,r.Z)(this,"handleChangeTitle",(e=>{this.setState({ruleName:e})}))}componentDidMount(){const{organization:e,project:t}=this.props;(0,u.Gi)("edit_alert_rule.viewed",{organization:e,project_id:t.id,alert_type:this.getAlertType()})}getTitle(){const{ruleName:e}=this.state;return`${e}`}getAlertType(){return location.pathname.includes("/alerts/metric-rules/")?w.ok.METRIC:w.ok.ISSUE}render(){const{hasMetricAlerts:e,location:t,organization:s,project:r,routes:a,members:u}=this.props,m=this.getAlertType();return(0,j.BX)(o.Fragment,{children:[(0,j.tZ)(l.Z,{title:this.getTitle(),orgSlug:s.slug,projectSlug:r.slug}),(0,j.tZ)(i.h4,{children:(0,j.BX)(i.oB,{children:[(0,j.tZ)(c.Z,{organization:s,title:(0,p.t)("Edit Alert Rule"),projectSlug:r.slug,routes:a,location:t}),(0,j.tZ)(i.Dx,{children:this.getTitle()})]})}),(0,j.tZ)(C,{children:(0,j.tZ)(d.Z,{provideUserTeams:!0,children:t=>{let{teams:s,initiallyLoaded:a}=t;return a?(0,j.BX)(o.Fragment,{children:[(!e||m===w.ok.ISSUE)&&(0,j.tZ)(h.Z,{...this.props,project:r,onChangeTitle:this.handleChangeTitle,userTeamIds:s.map((e=>{let{id:t}=e;return t})),members:u}),e&&m===w.ok.METRIC&&(0,j.tZ)(S,{...this.props,project:r,onChangeTitle:this.handleChangeTitle,userTeamIds:s.map((e=>{let{id:t}=e;return t}))})]}):(0,j.tZ)(n.Z,{})}})})]})}}v.displayName="ProjectAlertsEditor";const C=(0,a.Z)(i.uT,{target:"e1q5vtuf0"})({name:"9ap5cm",styles:"*:not(img){max-width:1000px;}"}),I=v}}]);
//# sourceMappingURL=../sourcemaps/app_views_alerts_edit_tsx.170fe150d3a621f758e2cd65961352b3.js.map