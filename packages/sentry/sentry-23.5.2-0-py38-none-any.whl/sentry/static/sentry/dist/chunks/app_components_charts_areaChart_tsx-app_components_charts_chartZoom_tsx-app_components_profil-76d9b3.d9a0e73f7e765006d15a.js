"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_charts_areaChart_tsx-app_components_charts_chartZoom_tsx-app_components_profil-76d9b3"],{"./app/components/charts/areaChart.tsx":(e,t,o)=>{o.d(t,{T:()=>a});var n=o("./app/components/charts/series/lineSeries.tsx"),s=o("./app/components/charts/baseChart.tsx"),r=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{series:t,stacked:o,colors:a,...i}=e;return(0,r.tZ)(s.Z,{...i,"data-test-id":"area-chart",colors:a,series:t.map(((e,t)=>{let{seriesName:s,data:r,...i}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.Z)({...e})}({stack:o?"area":void 0,name:s,data:r.map((e=>{let{name:t,value:o}=e;return[t,o]})),lineStyle:{color:a?.[t],opacity:1,width:.4},areaStyle:{color:a?.[t],opacity:1},animation:!1,animationThreshold:1,animationDuration:0,...i})}))})}a.displayName="AreaChart"},"./app/components/charts/chartZoom.tsx":(e,t,o)=>{o.d(t,{Z:()=>y});var n=o("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(o("../node_modules/core-js/modules/es.array.push.js"),o("../node_modules/react/index.js")),r=o("../node_modules/moment/moment.js"),a=o.n(r),i=o("../node_modules/query-string/index.js"),l=o("./app/actionCreators/pageFilters.tsx"),c=o("./app/components/charts/components/dataZoomInside.tsx");o("../node_modules/echarts/lib/component/dataZoomSlider.js");const u={realtime:!1,showDetail:!1,left:0,right:6,bottom:8};function p(e){return e&&Array.isArray(e)?e:[{...u,...e}]}var d=o("./app/components/charts/components/toolBox.tsx"),m=o("./app/utils/callIfFunction.tsx"),h=o("./app/utils/dates.tsx");const g=e=>e?a().utc(e).format(a().HTML5_FMT.DATETIME_LOCAL_SECONDS):null;class f extends s.Component{constructor(e){var t;super(e),t=this,(0,n.Z)(this,"history",void 0),(0,n.Z)(this,"currentPeriod",void 0),(0,n.Z)(this,"zooming",null),(0,n.Z)(this,"saveCurrentPeriod",(e=>{this.currentPeriod={period:e.period,start:g(e.start),end:g(e.end)}})),(0,n.Z)(this,"setPeriod",(function(e){let{period:o,start:n,end:s}=e,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{router:a,onZoom:c,usePageDate:u}=t.props,p=g(n),d=g(s);r&&t.history.push(t.currentPeriod),c?.({period:o,start:p,end:d}),t.zooming=()=>{if(u&&a){const e={...a.location.query,pageStart:n?(0,h.v5)(n):void 0,pageEnd:s?(0,h.v5)(s):void 0,pageStatsPeriod:o??void 0};i.stringify(e)!==i.stringify(a.location.query)&&a.push({pathname:a.location.pathname,query:e})}else(0,l.dR)({period:o,start:p?(0,h.hC)(p):p,end:d?(0,h.hC)(d):d},a,{skipDesyncUpdate:!0});t.saveCurrentPeriod({period:o,start:n,end:s})}})),(0,n.Z)(this,"handleChartReady",(e=>{this.props.onChartReady?.(e)})),(0,n.Z)(this,"handleZoomRestore",((e,t)=>{this.history.length&&(this.setPeriod(this.history[0]),this.history=[],this.props.onRestore?.(e,t))})),(0,n.Z)(this,"handleDataZoom",((e,t)=>{const o=t.getModel(),{startValue:n,endValue:s}=o._payload.batch[0];if(null===n&&null===s){const e=this.history.pop();if(!e)return;this.setPeriod(e)}else{const e=a().utc(n),t=a().utc(s);this.setPeriod({period:null,start:e,end:t},!0)}this.props.onDataZoom?.(e,t)})),(0,n.Z)(this,"handleChartFinished",((e,t)=>{"function"==typeof this.zooming&&(this.zooming(),this.zooming=null);const o=t._componentsViews?.find((e=>e._features&&e._features.dataZoom));o&&!o._features.dataZoom._isZoomActive&&t.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}),(0,m.g)(this.props.onFinished)})),this.history=[],this.saveCurrentPeriod(e)}componentDidUpdate(){this.props.disabled||this.saveCurrentPeriod(this.props)}render(){const{utc:e,start:t,end:o,disabled:n,children:s,xAxisIndex:r,router:a,onZoom:i,onRestore:l,onChartReady:u,onDataZoom:m,onFinished:g,showSlider:f,chartZoomOptions:y,...x}=this.props,Z=e??void 0,k=t?(0,h.hC)(t):void 0,b=o?(0,h.hC)(o):void 0;return s(n?{utc:Z,start:k,end:b,...x}:{isGroupedByDate:!0,onChartReady:this.handleChartReady,utc:Z,start:k,end:b,dataZoom:f?[...p({xAxisIndex:r,...y}),...(0,c.Z)({xAxisIndex:r,...y})]:(0,c.Z)({xAxisIndex:r,...y}),showTimeInTooltip:!0,toolBox:(0,d.Z)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom,onFinished:this.handleChartFinished,onRestore:this.handleZoomRestore,...x})}}f.displayName="ChartZoom";const y=f},"./app/components/charts/components/dataZoomInside.tsx":(e,t,o)=>{o.d(t,{Z:()=>s}),o("../node_modules/echarts/lib/component/dataZoomInside.js");const n={type:"inside",zoomOnMouseWheel:!1,zoomLock:!0,throttle:50};function s(e){return e&&Array.isArray(e)?e:[{...n,...e}]}},"./app/components/charts/components/toolBox.tsx":(e,t,o)=>{function n(){let{dataZoom:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e?{dataZoom:{yAxisIndex:"none",title:{zoom:"zoom",back:"undo"},...e}}:{},...t}}function s(e,t){return{right:0,top:0,itemSize:16,z:-1,feature:n(t),...e}}o.d(t,{Z:()=>s})},"./app/components/performanceDuration.tsx":(e,t,o)=>{o.d(t,{Z:()=>i});var n=o("./app/components/duration.tsx"),s=o("./app/utils.tsx"),r=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){const t=function(e){return(0,s.ri)(e.nanoseconds)}(e)?e.nanoseconds/1e9:function(e){return(0,s.ri)(e.milliseconds)}(e)?e.milliseconds/1e3:e.seconds;return(0,r.tZ)(n.Z,{abbreviation:e.abbreviation,seconds:t,fixedDigits:2})}a.displayName="PerformanceDuration";const i=a},"./app/components/profiling/suspectFunctions/suspectFunctionsTable.tsx":(e,t,o)=>{o.d(t,{f:()=>O});var n=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(o("../node_modules/core-js/modules/es.array.push.js"),o("../node_modules/react/index.js")),r=o("../node_modules/react-router/es/index.js"),a=o("./app/components/compactSelect/index.tsx"),i=o("./app/components/pagination.tsx"),l=o("./app/components/count.tsx"),c=o("./app/components/gridEditable/index.tsx"),u=o("./app/components/performanceDuration.tsx"),p=o("./app/components/links/link.tsx"),d=o("./app/locale.tsx"),m=o("./app/styles/space.tsx"),h=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function g(e){let{items:t}=e;const[o,n]=(0,s.useState)(!1),r=t[0];return(0,h.BX)(y,{expanded:o,children:[r&&(0,h.tZ)(f,{item:r}),t.length>1&&o&&t.slice(1,t.length).map((e=>(0,h.tZ)(f,{item:e},e.value))),t.length>1?(0,h.tZ)(Z,{children:(0,h.tZ)("button",{onClick:()=>n(!o),children:o?(0,d.t)("[collapse]"):(0,d.t)("[+%s more]",t.length-1)})}):null]})}function f(e){let{item:t}=e;return(0,h.tZ)(x,{children:(0,h.tZ)(p.Z,{to:t.target,onClick:t?.onClick,children:t.value})})}g.displayName="ArrayLinks",f.displayName="LinkedItem";const y=(0,n.Z)("div",{target:"e153a8kj2"})("display:flex;flex-direction:",(e=>e.expanded?"column":"row"),";"),x=(0,n.Z)("span",{target:"e153a8kj1"})("flex-shrink:1;display:block;",(e=>e.theme.overflowEllipsis),";width:unset;"),Z=(0,n.Z)("div",{target:"e153a8kj0"})("white-space:nowrap;& button{background:none;border:0;outline:none;padding:0;cursor:pointer;color:",(e=>e.theme.linkColor),";margin-left:",(0,m.D)(.5),";}");var k=o("./app/utils/analytics.tsx"),b=o("./app/utils/discover/styles.tsx"),v=o("./app/utils/events.tsx"),C=o("./app/utils/profiling/routes.tsx"),S=o("./app/utils/profiling/tableRenderer.tsx"),_=o("./app/utils/useLocation.tsx"),w=o("./app/utils/useOrganization.tsx");function j(e){const t=(0,_.T)(),o=(0,w.Z)(),n=(0,s.useMemo)((()=>{const t=e.project;return t?e.functions.map((n=>{const s=n["examples()"]||[];return{...n,"examples()":s.map((s=>({value:(0,v.XQ)(s),onClick:()=>(0,k.Gi)("profiling_views.go_to_flamegraph",{organization:o,source:`${e.analyticsPageSource}.suspect_functions_table`}),target:(0,C.TH)({orgSlug:o.slug,projectSlug:t.slug,profileId:s,query:{frameName:n.function,framePackage:n.package}})})))}})):[]}),[o,e.project,e.functions,e.analyticsPageSource]),r=(0,s.useCallback)((o=>{if(!z.has(o))return()=>{};const n=e.sort.key!==o?"desc":"desc"===e.sort.order?"asc":"desc";return()=>({...t,query:{...t.query,functionsSort:`${"desc"===n?"-":""}${o}`}})}),[t,e.sort]);return(0,h.tZ)(c.ZP,{isLoading:e.isLoading,error:e.error,data:n,columnOrder:q.map((e=>D[e])),columnSortBy:[],grid:{renderHeadCell:(0,S.w)({currentSort:e.sort,rightAlignedColumns:P,sortableColumns:z,generateSortLink:r}),renderBodyCell:F},location:t})}j.displayName="FunctionsTable";const P=new Set(["p75()","sum()","count()"]),z=P;function F(e,t,o,n){return(0,h.tZ)(T,{column:e,dataRow:t,rowIndex:o,columnIndex:n})}F.displayName="renderFunctionsTableCell";const A=(0,n.Z)("span",{target:"e13dbyps0"})("color:",(e=>e.theme.gray300),";");function T(e){let{column:t,dataRow:o}=e;const n=o[t.key];switch(t.key){case"count()":return(0,h.tZ)(b.Hw,{children:(0,h.tZ)(l.Z,{value:n})});case"p75()":case"sum()":return(0,h.tZ)(b.Hw,{children:(0,h.tZ)(u.Z,{nanoseconds:n,abbreviation:!0})});case"examples()":return(0,h.tZ)(g,{items:n});case"function":case"package":const e=n||(0,h.tZ)(A,{children:(0,d.t)("Unknown")});return(0,h.tZ)(b.W2,{children:e});default:return(0,h.tZ)(b.W2,{children:n})}}const q=["function","package","count()","p75()","sum()","examples()"],D={function:{key:"function",name:(0,d.t)("Name"),width:c.z7},package:{key:"package",name:(0,d.t)("Package"),width:c.z7},"p75()":{key:"p75()",name:(0,d.t)("P75 Self Time"),width:c.z7},"sum()":{key:"sum()",name:(0,d.t)("Total Self Time"),width:c.z7},"count()":{key:"count()",name:(0,d.t)("Occurrences"),width:c.z7},"examples()":{key:"examples()",name:(0,d.t)("Example Profiles"),width:c.z7}};var L=o("./app/utils/profiling/hooks/useProfileFunctions.tsx"),R=o("./app/utils/profiling/hooks/utils.tsx"),I=o("./app/utils/queryString.tsx"),N=o("./app/utils/tokenizeSearch.tsx");const M="functionsCursor";function O(e){let{analyticsPageSource:t,project:o,transaction:n}=e;const[i,l]=(0,s.useState)("application"),c=(0,_.T)(),u=(0,s.useMemo)((()=>(0,I.ro)(c.query.functionsCursor)),[c.query.functionsCursor]),p=(0,s.useMemo)((()=>(0,R.k)((0,I.ro)(c.query.functionsSort),E,{key:"sum()",order:"desc"})),[c.query.functionsSort]),m=(0,s.useCallback)(((e,t,o)=>{r.browserHistory.push({pathname:t,query:{...o,[M]:e}})}),[]),g=(0,s.useMemo)((()=>{const e=new N.MY("");return e.setFilterValues("transaction",[n]),"application"===i?e.setFilterValues("is_application",["1"]):"system"===i&&e.setFilterValues("is_application",["0"]),e.formatString()}),[i,n]),f=(0,L.W)({fields:E,referrer:"api.profiling.profile-summary-functions-table",sort:p,query:g,limit:5,cursor:u});return(0,h.BX)(s.Fragment,{children:[(0,h.BX)(B,{children:[(0,h.tZ)(a.Z,{triggerProps:{prefix:(0,d.t)("Suspect Functions"),size:"xs"},value:i,options:[{label:(0,d.t)("All"),value:"all"},{label:(0,d.t)("Application"),value:"application"},{label:(0,d.t)("System"),value:"system"}],onChange:e=>{let{value:t}=e;return l(t)}}),(0,h.tZ)(W,{pageLinks:f.isFetched?f.data?.[2]?.getResponseHeader("Link")??null:null,onCursor:m,size:"xs"})]}),(0,h.tZ)(j,{analyticsPageSource:t,error:f.isError?f.error.message:null,isLoading:f.isLoading,functions:f.isFetched?f.data?.data??[]:[],project:o,sort:p})]})}O.displayName="SuspectFunctionsTable";const E=["package","function","count()","p75()","sum()","examples()"],B=(0,n.Z)("div",{target:"e1qpwo4s1"})("display:flex;justify-content:space-between;margin-bottom:",(0,m.D)(1),";"),W=(0,n.Z)(i.Z,{target:"e1qpwo4s0"})("margin:0 0 0 ",(0,m.D)(1),";")},"./app/utils/profiling/hooks/useProfileFunctions.tsx":(e,t,o)=>{o.d(t,{W:()=>i});var n=o("./app/components/organizations/pageFilters/parse.tsx"),s=o("./app/utils/queryClient.tsx"),r=o("./app/utils/useOrganization.tsx"),a=o("./app/utils/usePageFilters.tsx");function i(e){let{fields:t,referrer:o,sort:i,cursor:l,datetime:c,enabled:u,limit:p,projects:d,query:m,refetchOnMount:h}=e;const g=(0,r.Z)(),{selection:f}=(0,a.Z)(),y=`/organizations/${g.slug}/events/`,x={query:{dataset:"profileFunctions",referrer:o,project:d||f.projects,environment:f.environments,...(0,n.fK)(c??f.datetime),field:t,per_page:p,query:m,sort:"asc"===i.order?i.key:`-${i.key}`,cursor:l}};return(0,s.WE)([y,x],{staleTime:0,refetchOnWindowFocus:!1,refetchOnMount:h,retry:!1,enabled:u})}},"./app/utils/profiling/hooks/utils.tsx":(e,t,o)=>{o.d(t,{Z:()=>a,k:()=>r});var n=o("./app/locale.tsx"),s=o("./app/utils.tsx");function r(e,t,o){const n="-"===(e=e||"")[0]?"desc":"asc",s="asc"===n?e:e.substring(1);return t.includes(s)?{key:s,order:n}:o}function a(e){if(!(0,s.ri)(e))return null;const t=e.responseJSON?.detail;if("string"==typeof t)return t;const o=t?.message;return"string"==typeof o?o:(0,n.t)("An unknown error occurred.")}},"./app/utils/profiling/tableRenderer.tsx":(e,t,o)=>{o.d(t,{w:()=>r});var n=o("./app/components/gridEditable/sortLink.tsx"),s=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){let{currentSort:t,generateSortLink:o,rightAlignedColumns:r,sortableColumns:a,onClick:i}=e;return function(e,l){return(0,s.tZ)(n.Z,{onClick:t=>i?.(e,t),align:r?.has(e.key)?"right":"left",title:e.name,direction:t?.key===e.key?t?.order:void 0,canSort:a?.has(e.key)||!1,generateSortLink:o?.(e.key)??(()=>{}),replace:!0})}}}}]);
//# sourceMappingURL=../sourcemaps/app_components_charts_areaChart_tsx-app_components_charts_chartZoom_tsx-app_components_profil-76d9b3.beb1da5c9c853b06d84f295b34b6e6ad.js.map