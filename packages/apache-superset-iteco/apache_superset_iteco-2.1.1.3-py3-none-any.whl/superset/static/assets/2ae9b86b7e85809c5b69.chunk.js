"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[2549],{22549:(t,e,n)=>{n.r(e),n.d(e,{default:()=>v}),n(67294);var r=n(43323),a=n(51995),s=n(15078),o=n.n(s),l=n(45697),c=n.n(l),i=n(67190),p=n(45511),u=n(28062),g=n(21341);const d={data:c().arrayOf(c().shape({country_id:c().string,metric:c().number})),width:c().number,height:c().number,country:c().string,linearColorScheme:c().string,mapBaseUrl:c().string,numberFormat:c().string},y={};function h(t,e){const{data:n,width:r,height:a,country:s,linearColorScheme:l,numberFormat:c,colorScheme:d,sliceId:h}=e,m=t,f=(0,i.JB)(c),$=(0,p.Z)().get(l).createLinearScale(function(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let a=-1;for(let s of t)null!=(s=e(s,++a))&&(void 0===n?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}(n,(t=>t.metric))),v=u.getScale(d),x={};n.forEach((t=>{x[t.country_id]=d?v(t.country_id,h):$(t.metric)}));const b=t=>x[t.properties.ISO]||"none",k=o().geo.path(),w=o().select(m);w.classed("superset-legacy-chart-country-map",!0),w.selectAll("*").remove(),m.style.height=`${a}px`,m.style.width=`${r}px`;const S=w.append("svg:svg").attr("width",r).attr("height",a).attr("preserveAspectRatio","xMidYMid meet"),_=S.append("rect").attr("class","background").attr("width",r).attr("height",a),z=S.append("g"),C=z.append("g").classed("map-layer",!0),A=z.append("g").classed("text-layer",!0).attr("transform",`translate(${r/2}, 45)`),M=A.append("text").classed("big-text",!0),N=A.append("text").classed("result-text",!0).attr("dy","1em");let Z;const I=function(t){const e=t&&Z!==t;let n,s,o;const l=r/2,c=a/2;if(e){const e=k.centroid(t);[n,s]=e,o=4,Z=t}else n=l,s=c,o=1,Z=null;z.transition().duration(750).attr("transform",`translate(${l},${c})scale(${o})translate(${-n},${-s})`),A.style("opacity",0).attr("transform",`translate(0,0)translate(${n},${e?s-5:45})`).transition().duration(750).style("opacity",1),M.transition().duration(750).style("font-size",e?6:16),N.transition().duration(750).style("font-size",e?16:24)};_.on("click",I);const O=function(t){let e=b(t);"none"!==e&&(e=o().rgb(e).darker().toString()),o().select(this).style("fill",e),function(t){let e="";t&&t.properties&&(e=t.properties.ID_2?t.properties.NAME_2:t.properties.NAME_1),M.text(e)}(t);const r=n.filter((e=>e.country_id===t.properties.ISO));var a;(a=r).length>0&&N.text(f(a[0].metric))},E=function(){o().select(this).style("fill",b),M.text(""),N.text("")};function T(t){const{features:e}=t,n=o().geo.centroid(t),s=o().geo.mercator().scale(100).center(n).translate([r/2,a/2]);k.projection(s);const l=k.bounds(t),c=100*r/(l[1][0]-l[0][0]),i=100*a/(l[1][1]-l[0][1]),p=c<i?c:i;s.scale(p);const u=k.bounds(t);s.translate([r-(u[0][0]+u[1][0])/2,a-(u[0][1]+u[1][1])/2]),C.selectAll("path").data(e).enter().append("path").attr("d",k).attr("class","region").attr("vector-effect","non-scaling-stroke").style("fill",b).on("mouseenter",O).on("mouseout",E).on("click",I)}const j=y[s];if(j)T(j);else{const e=g.ZP[s];o().json(e,((e,n)=>{if(e){var r;const e=(null==(r=g.O$.find((t=>t[0]===s)))?void 0:r[1])||s;o().select(t).html(`<div class="alert alert-danger">Could not load map data for ${e}</div>`)}else y[s]=n,T(n)}))}}h.displayName="CountryMap",h.propTypes=d;const m=h;var f=n(11965);const $=(0,r.Z)(m),v=(0,a.iK)((({className:t,...e})=>(0,f.tZ)("div",{className:t},(0,f.tZ)($,e))))`
  ${({theme:t})=>`\n    .superset-legacy-chart-country-map svg {\n      background-color: ${t.colors.grayscale.light5};\n    }\n\n    .superset-legacy-chart-country-map {\n      position: relative;\n    }\n\n    .superset-legacy-chart-country-map .background {\n      fill: ${t.colors.grayscale.light5};\n      pointer-events: all;\n    }\n\n    .superset-legacy-chart-country-map .map-layer {\n      fill: ${t.colors.grayscale.light5};\n      stroke: ${t.colors.grayscale.light1};\n    }\n\n    .superset-legacy-chart-country-map .effect-layer {\n      pointer-events: none;\n    }\n\n    .superset-legacy-chart-country-map .text-layer {\n      color: ${t.colors.grayscale.dark1};\n      text-anchor: middle;\n      pointer-events: none;\n    }\n\n    .superset-legacy-chart-country-map text.result-text {\n      font-weight: ${t.typography.weights.light};\n      font-size: ${t.typography.sizes.xl}px;\n    }\n\n    .superset-legacy-chart-country-map text.big-text {\n      font-weight: ${t.typography.weights.bold};\n      font-size: ${t.typography.sizes.l}px;\n    }\n\n    .superset-legacy-chart-country-map path.region {\n      cursor: pointer;\n      stroke: ${t.colors.grayscale.light2};\n    }\n  `}
`}}]);
//# sourceMappingURL=2ae9b86b7e85809c5b69.chunk.js.map