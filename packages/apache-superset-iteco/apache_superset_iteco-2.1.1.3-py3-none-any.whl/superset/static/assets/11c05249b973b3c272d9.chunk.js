"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[6579],{16579:(t,e,n)=>{n.r(e),n.d(e,{default:()=>x}),n(67294);var s=n(43323),a=n(51995),r=n(15078),l=n.n(r),i=n(45697),c=n.n(i),o=n(28062),h=n(67190),p=n(45636),u=n(45511);function d(t,e,n){t.each((function(){const t=l().select(this),s=t.text().split(/\s+/);let a=[],r=0;const i=t.attr("x"),c=t.attr("y"),o=parseFloat(t.attr("dy"));let h=t.text(null).append("tspan").attr("x",i).attr("y",c).attr("dy",`${o}em`),p=!1;s.forEach((n=>{a.push(n),h.text(a.join(" ")),h.node().getComputedTextLength()>e&&(r+=1,a.pop(),h.text(a.join(" ")),a=[n],h=t.append("tspan").attr("x",i).attr("y",c).attr("dy",`${1*r+o}em`).text(n),p=!0)})),p||void 0===n||h.attr("y",n)}))}const g={data:c().arrayOf(c().array),width:c().number,height:c().number,colorScheme:c().string,linearColorScheme:c().string,numberFormat:c().string,metrics:c().arrayOf(c().oneOfType([c().string,c().object]))};function m(t){return"string"==typeof t||t instanceof String?t:t.label}function y(t,e){const n=l().select(t),{data:s,width:a,height:r,colorScheme:i,linearColorScheme:c,metrics:g,numberFormat:y,sliceId:f}=e,b=function(t){return t>500?"l":t>200&&t<=500?"m":"s"}(a),$="s"===b;n.attr("class",`superset-legacy-chart-sunburst ${b}`);const x=a,v=r,w=.085*v,k=x-5-5,T=v-10-10-w,A=Math.min(k,T)/2;let N,S,z,C,I,Z,M,P=!0;const W=o.getScale(i);let _;const j=l().layout.partition().size([2*Math.PI,A*A]).value((t=>t.m1)),E=l().svg.arc().startAngle((t=>t.x)).endAngle((t=>t.x+t.dx)).innerRadius((t=>Math.sqrt(t.y))).outerRadius((t=>Math.sqrt(t.y+t.dy))),O=(0,h.JB)(y||p.Z.SI_3_DIGIT),F=(0,h.JB)(p.Z.PERCENT_3_POINT);n.select("svg").remove();const L=n.append("svg:svg").attr("width",x).attr("height",v);function R(t,e){const n=[];return $?(n.push("0,0"),n.push(`${a},0`),n.push(`${a},0`),n.push(`${a},${S.height}`),n.push(`0,${S.height}`)):(n.push("0,0"),n.push(`${S.width},0`),n.push(`${S.width+S.tipTailWidth},${S.height/2}`),n.push(`${S.width},${S.height}`),n.push(`0,${S.height}`),e>0&&n.push(`${S.tipTailWidth},${S.height/2}`)),n.join(" ")}function q(t){const e=function(t){const e=[];let n=t;for(;n.parent;)e.unshift(n),n=n.parent;return e}(t),n=e[e.length-2]||null,s=(t.m1/z).toPrecision(3),r=n?(t.m1/n.m1).toPrecision(3):null,i=F(s),c=n?F(r):"",o=function(t){return t>500?["0","20","40","60"]:t>200&&t<=500?["0","15","30","45"]:["0","10","20","30"]}(a);let h=0;const p=Math.abs(t.m1-t.m2)<1e-5;M.selectAll("*").remove(),h+=1,M.append("text").attr("class","path-abs-percent").attr("y",o[h]).text(`${i} of total`),c&&(h+=1,M.append("text").attr("class","path-cond-percent").attr("y",o[h]).text(`${c} of parent`)),h+=1,M.append("text").attr("class","path-metrics").attr("y",o[h]).text(`${m(g[0])}: ${O(t.m1)}${p?"":`, ${m(g[1])}: ${O(t.m2)}`}`),h+=1,M.append("text").attr("class","path-ratio").attr("y",o[h]).text(p?"":`${m(g[1])}/${m(g[0])}: ${F(t.m2/t.m1)}`),Z.selectAll("path").style("stroke-width",null).style("stroke",null).style("opacity",.3),Z.selectAll("path").filter((t=>e.includes(t))).style("opacity",1).style("stroke","#aaa"),function(t,e){const n=$?a:S.width,s=C.selectAll("g").data(t,(t=>t.name+t.depth)),r=s.enter().append("svg:g");r.append("svg:polygon").attr("points",R).style("fill",(t=>P?W(t.name,f):_(t.m2/t.m1))),r.append("svg:text").attr("x",(n+S.tipTailWidth)/2).attr("y",S.height/4).attr("dy","0.35em").style("fill",(t=>l().hsl(P?W(t.name,f):_(t.m2/t.m1)).l<.5?"white":"black")).attr("class","step-label").text((t=>t.name.replace(/_/g," "))).call(d,n,S.height/2),s.attr("transform",((t,e)=>$?`translate(0, ${e*(S.height+S.spacing)})`:`translate(${e*(S.width+S.spacing)}, 0)`)),s.exit().remove(),C.select(".end-label").attr("x",(()=>$?(n+S.tipTailWidth)/2:(t.length+.5)*(S.width+S.spacing))).attr("y",(()=>$?(t.length+1)*S.height:S.height/2)).attr("dy","0.35em").text(e),C.style("visibility",null)}(e,i)}function B(){C.style("visibility","hidden"),M.selectAll("*").remove(),Z.selectAll("path").on("mouseenter",null),Z.selectAll("path").transition().duration(200).style("opacity",1).style("stroke",null).style("stroke-width",null).each("end",(function(){l().select(this).on("mouseenter",q)}))}var J;J=s[0],N=J.length-2+1,S={width:k/N,height:.8*w,spacing:3,tipTailWidth:10},C=L.append("svg:g").attr("class","breadcrumbs").attr("transform","translate(5,10)"),C.append("svg:text").attr("class","end-label"),function(t){const e=function(t){const e={name:"root",children:[]};return t.forEach((t=>{const n=Number(t[t.length-2]),s=Number(t[t.length-1]),a=t.slice(0,-2);if(Number.isNaN(n))return;let r=e;for(let t=0;t<a.length;t+=1){const e=r.children||[],l=a[t].toString();let i;t>=a.length-1||0===a[t+1]?0!==l&&(i={name:l,m1:n,m2:s},e.push(i)):(i=e.find((e=>e.name===l&&e.level===t)),i||(i={name:l,children:[],level:t},e.push(i)),r=i)}})),function t(e){if(e.children){let n,s=0,a=0;for(let r=0;r<e.children.length;r+=1)n=t(e.children[r]),s+=n[0],a+=n[1];e.m1=s,e.m2=a}return[e.m1,e.m2]}(e),e}(t);N=t[0].length-2,I=L.append("svg:g").attr("class","sunburst-vis").attr("transform",`translate(${5+k/2},${10+($?w*N:w)+T/2})`).on("mouseleave",B),Z=I.append("svg:g").attr("id","arcs"),M=I.append("svg:g").attr("class","center-label"),Z.append("svg:circle").attr("r",A).style("opacity",0);const n=j.nodes(e).filter((t=>t.dx>.005));if(g[0]!==g[1]&&g[1]){P=!1;const t=l().extent(n,(t=>t.m2/t.m1));_=(0,u.Z)().get(c).createLinearScale(t)}Z.selectAll("path").data(n).enter().append("svg:path").attr("display",(t=>t.depth?null:"none")).attr("d",E).attr("fill-rule","evenodd").style("fill",(t=>P?W(t.name,f):_(t.m2/t.m1))).style("opacity",1).on("mouseenter",q),z=e.value}(s)}y.displayName="Sunburst",y.propTypes=g;const f=y;var b=n(11965);const $=(0,s.Z)(f),x=(0,a.iK)((({className:t,...e})=>(0,b.tZ)("div",{className:t},(0,b.tZ)($,e))))`
  ${({theme:t})=>`\n    .superset-legacy-chart-sunburst text {\n      text-rendering: optimizeLegibility;\n    }\n    .superset-legacy-chart-sunburst path {\n      stroke: ${t.colors.grayscale.light2};\n      stroke-width: 0.5px;\n    }\n    .superset-legacy-chart-sunburst .center-label {\n      text-anchor: middle;\n      fill: ${t.colors.grayscale.dark1};\n      pointer-events: none;\n    }\n    .superset-legacy-chart-sunburst .path-abs-percent {\n      font-size: ${t.typography.sizes.m}px;\n      font-weight: ${t.typography.weights.bold};\n    }\n    .superset-legacy-chart-sunburst .path-cond-percent {\n      font-size: ${t.typography.sizes.s}px;\n    }\n    .superset-legacy-chart-sunburst .path-metrics {\n      color: ${t.colors.grayscale.base};\n    }\n    .superset-legacy-chart-sunburst .path-ratio {\n      color: ${t.colors.grayscale.base};\n    }\n\n    .superset-legacy-chart-sunburst .breadcrumbs text {\n      font-weight: ${t.typography.weights.bold};\n      font-size: ${t.typography.sizes.m}px;\n      text-anchor: middle;\n      fill: ${t.colors.grayscale.dark1};\n    }\n  `}
`}}]);
//# sourceMappingURL=11c05249b973b3c272d9.chunk.js.map