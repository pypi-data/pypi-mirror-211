"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[2229],{32229:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var r=n(67294),i=n(67190),a=n(61988),s=n(8608),l=n(40962),o=n(67869),h=n(51995),c=n(63475),d=n(11965);const u=(0,i.JB)(),m=.3;class p extends r.PureComponent{getClassName(){const{className:e,showTrendLine:t,bigNumberFallback:n}=this.props,r=`superset-legacy-chart-big-number ${e} ${n?"is-fallback-value":""}`;return t?r:`${r} no-trendline`}createTemporaryContainer(){const e=document.createElement("div");return e.className=this.getClassName(),e.style.position="absolute",e.style.opacity="0",e}renderFallbackWarning(){const{bigNumberFallback:e,formatTime:t,showTimestamp:n}=this.props;return!e||n?null:(0,d.tZ)("span",{className:"alert alert-warning",role:"alert",title:(0,a.t)("Last available value seen on %s",t(e[0]))},(0,a.t)("Not up to date"))}renderKicker(e){const{timestamp:t,showTimestamp:n,formatTime:r,width:i}=this.props;if(!n)return null;const a=null===t?"":r(t),l=this.createTemporaryContainer();document.body.append(l);const o=(0,s.Z)({text:a,maxWidth:i,maxHeight:e,className:"kicker",container:l});return l.remove(),(0,d.tZ)("div",{className:"kicker",style:{fontSize:o,height:e}},a)}renderHeader(e){const{bigNumber:t,headerFormatter:n,width:r}=this.props,i=null===t?(0,a.t)("No data"):n(t),l=this.createTemporaryContainer();document.body.append(l);const o=(0,s.Z)({text:i,maxWidth:r-8,maxHeight:e,className:"header-line",container:l});return l.remove(),(0,d.tZ)("div",{className:"header-line",style:{fontSize:o,height:e}},i)}renderSubheader(e){const{bigNumber:t,subheader:n,width:r,bigNumberFallback:i}=this.props;let l=0;const o=(0,a.t)("No data after filtering or data is NULL for the latest time record"),h=(0,a.t)("Try applying different filters or ensuring your datasource has data");let c=n;if(null===t&&(c=i?h:o),c){const t=this.createTemporaryContainer();return document.body.append(t),l=(0,s.Z)({text:c,maxWidth:r,maxHeight:e,className:"subheader-line",container:t}),t.remove(),(0,d.tZ)("div",{className:"subheader-line",style:{fontSize:l,height:e}},c)}return null}renderTrendline(e){const{width:t,trendLineData:n,echartOptions:r}=this.props;return null!=n&&n.some((e=>null!==e[1]))?(0,d.tZ)(c.Z,{width:Math.floor(t),height:e,echartOptions:r}):null}render(){const{showTrendLine:e,height:t,kickerFontSize:n,headerFontSize:r,subheaderFontSize:i}=this.props,a=this.getClassName();if(e){const e=Math.floor(m*t),s=t-e;return(0,d.tZ)("div",{className:a},(0,d.tZ)("div",{className:"text-container",style:{height:s}},this.renderFallbackWarning(),this.renderKicker(Math.ceil(.7*n*t)),this.renderHeader(Math.ceil(.7*r*t)),this.renderSubheader(Math.ceil(.7*i*t))),this.renderTrendline(e))}return(0,d.tZ)("div",{className:a,style:{height:t}},this.renderFallbackWarning(),this.renderKicker(n*t),this.renderHeader(Math.ceil(r*t)),this.renderSubheader(Math.ceil(i*t)))}}p.defaultProps={className:"",headerFormatter:u,formatTime:l.Z,headerFontSize:.3,kickerFontSize:.1,mainColor:o.E8,showTimestamp:!1,showTrendLine:!1,startYAxisAtZero:!0,subheader:"",subheaderFontSize:.125,timeRangeFixed:!1};const g=(0,h.iK)(p)`
  ${({theme:e})=>`\n    font-family: ${e.typography.families.sansSerif};\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n\n    &.no-trendline .subheader-line {\n      padding-bottom: 0.3em;\n    }\n\n    .text-container {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: flex-start;\n      .alert {\n        font-size: ${e.typography.sizes.s};\n        margin: -0.5em 0 0.4em;\n        line-height: 1;\n        padding: ${e.gridUnit}px;\n        border-radius: ${e.gridUnit}px;\n      }\n    }\n\n    .kicker {\n      line-height: 1em;\n      padding-bottom: 2em;\n    }\n\n    .header-line {\n      position: relative;\n      line-height: 1em;\n      span {\n        position: absolute;\n        bottom: 0;\n      }\n    }\n\n    .subheader-line {\n      line-height: 1em;\n      padding-bottom: 0;\n    }\n\n    &.is-fallback-value {\n      .kicker,\n      .header-line,\n      .subheader-line {\n        opacity: ${e.opacity.mediumHeavy};\n      }\n    }\n  `}
`},63475:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(67294),i=n(51995),a=n(82217),s=n(11965);const l=i.iK.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function o({width:e,height:t,echartOptions:n,eventHandlers:i,zrEventHandlers:o,selectedValues:h={}},c){const d=(0,r.useRef)(null),u=(0,r.useRef)(),m=(0,r.useMemo)((()=>Object.keys(h)||[]),[h]),p=(0,r.useRef)([]);return(0,r.useImperativeHandle)(c,(()=>({getEchartInstance:()=>u.current}))),(0,r.useEffect)((()=>{d.current&&(u.current||(u.current=(0,a.S1)(d.current)),Object.entries(i||{}).forEach((([e,t])=>{var n,r;null==(n=u.current)||n.off(e),null==(r=u.current)||r.on(e,t)})),Object.entries(o||{}).forEach((([e,t])=>{var n,r;null==(n=u.current)||n.getZr().off(e),null==(r=u.current)||r.getZr().on(e,t)})),u.current.setOption(n,!0))}),[n,i,o]),(0,r.useEffect)((()=>{u.current&&(u.current.dispatchAction({type:"downplay",dataIndex:p.current.filter((e=>!m.includes(e)))}),m.length&&u.current.dispatchAction({type:"highlight",dataIndex:m}),p.current=m)}),[m]),(0,r.useEffect)((()=>{u.current&&u.current.resize({width:e,height:t})}),[e,t]),(0,s.tZ)(l,{ref:d,height:t,width:e})}const h=(0,r.forwardRef)(o)}}]);
//# sourceMappingURL=f81ce807a2aebac28b3e.chunk.js.map