(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1911],{84392:function(e,r,n){"use strict";n.d(r,{HF:function(){return o},L6:function(){return t}});var t,u=n(81132),i=n(10503),s=n(9736);function o(e,r){var n=e.owner,o=e.roles,c=[{Icon:i.Vz,id:t.WORKSPACES,isSelected:function(){return t.WORKSPACES===r},label:function(){return"Workspaces"},linkProps:{href:"/manage"}}];return(n||o===u.No.ADMIN)&&c.push({Icon:i.NO,id:t.USERS,isSelected:function(){return t.USERS===r},label:function(){return"Users"},linkProps:{href:"/manage/users"}}),(!(0,s.YB)()||o<=u.No.EDITOR)&&c.push({Icon:i.Zr,id:t.SETTINGS,isSelected:function(){return t.SETTINGS===r},label:function(){return"Settings"},linkProps:{href:"/manage/settings"}}),c}!function(e){e.WORKSPACES="workspaces",e.USERS="users",e.SETTINGS="settings"}(t||(t={}))},3849:function(e,r,n){"use strict";n(82684);var t=n(1210),u=n(49125),i=n(84392),s=n(9736),o=n(28598);r.Z=function(e){var r=e.before,n=e.breadcrumbs,c=void 0===n?[]:n,a=e.children,l=e.pageName,d=e.subheaderChildren,f=(0,s.PR)()||{};return(0,o.jsx)(t.Z,{before:r,beforeWidth:r?50*u.iI:0,breadcrumbs:c,navigationItems:(0,i.HF)(f,l),subheaderChildren:d,title:"Workspaces",uuid:"workspaces/index",children:a})}},37938:function(e,r,n){"use strict";n.r(r);var t=n(77837),u=n(82394),i=n(38860),s=n.n(i),o=n(82684),c=n(34376),a=n(60328),l=n(87372),d=n(41788),f=n(86673),p=n(58180),v=n(19711),h=n(20582),b=n(3849),O=n(82531),m=n(66166),w=n(10503),_=n(49125),j=n(63153),S=n(84392),P=n(9736),g=n(33766),y=n(7715),E=n(59e3),Z=n(28598);function x(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function k(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?x(Object(n),!0).forEach((function(r){(0,u.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function N(){var e=(0,c.useRouter)(),r=(0,P.PR)()||{},n=r.id,t=r.owner,u=(0,o.useState)(null),i=u[0],s=u[1],d=O.ZP.users.list({},{revalidateOnFocus:!1}),x=d.data,N=d.mutate,R=(0,o.useMemo)((function(){return(null===x||void 0===x?void 0:x.users)||[]}),[null===x||void 0===x?void 0:x.users]),D=O.ZP.users.detail(null===i||void 0===i?void 0:i.user_id,{},{revalidateOnFocus:!1}),I=D.data,A=D.mutate,C=null===I||void 0===I?void 0:I.user,T=(0,E.iV)(),U=(0,m.Z)(T);(0,o.useEffect)((function(){var e=T.add_new_user,r=T.user_id;if(!(0,y.Xy)(T,U)){var n=k(k({},U),T);r?n.user_id=r:delete n.user_id,e?n.add_new_user=e:delete n.add_new_user,s(n)}}),[T,U]);var F=null===i||void 0===i?void 0:i.add_new_user;(0,o.useMemo)((function(){return F?(0,Z.jsx)(f.Z,{p:_.cd,children:(0,Z.jsx)(h.Z,{newUser:!0,onSaveSuccess:function(){(0,g.u7)({add_new_user:null,user_id:null}),N()},title:"Add new user",user:{}})}):C?(0,Z.jsx)(f.Z,{p:_.cd,children:(0,Z.jsx)(h.Z,{hideFields:[j.s7],onDeleteSuccess:function(){(0,g.u7)({add_new_user:null,user_id:null}),N()},onSaveSuccess:function(){(0,g.u7)({add_new_user:null,user_id:null}),A(),N()},showDelete:!0,title:"Edit user",user:C})}):null}),[A,N,F,C]);return(0,Z.jsxs)(b.Z,{pageName:S.L6.USERS,children:[t&&(0,Z.jsx)(f.Z,{p:_.cd,children:(0,Z.jsx)(a.Z,{beforeIcon:(0,Z.jsx)(w.mm,{}),onClick:function(){return(0,g.u7)({add_new_user:1,user_id:null})},primary:!0,children:"Add new user"})}),(0,Z.jsx)(f.Z,{p:_.cd,children:(0,Z.jsx)(l.Z,{children:"Users"})}),(0,Z.jsx)(p.Z,{columnFlex:[1,1,1],columns:[{uuid:"Username"},{uuid:"Email"},{uuid:"Role"}],isSelectedRow:function(e){var r;return(null===(r=R[e])||void 0===r?void 0:r.id)===(null===C||void 0===C?void 0:C.id)},onClickRow:function(r){var t,u=null===(t=R[r])||void 0===t?void 0:t.id;u===n?e.push("/settings/account/profile"):e.push("/manage/users/[user]","/manage/users/".concat(u))},rows:R.map((function(e){var r=e.email,n=e.roles_display,t=e.roles_new,u=e.username;return[(0,Z.jsx)(v.ZP,{bold:!0,children:u},"username"),(0,Z.jsx)(v.ZP,{default:!0,children:r},"email"),(0,Z.jsx)(v.ZP,{default:!0,children:t&&t[0]?t[0].name:n},"roles")]})),uuid:"pipeline-runs"})]})}N.getInitialProps=(0,t.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)}))),r.default=(0,d.Z)(N)},33766:function(e,r,n){"use strict";n.d(r,{O2:function(){return d},g_:function(){return p},u7:function(){return f}});var t=n(75582),u=n(82394),i=n(34376),s=n.n(i),o=n(59e3),c=n(24224);function a(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function l(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach((function(r){(0,u.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var d="_offset";function f(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.preserveParams,u=r.pushHistory,i=r.replaceParams,c=(0,o.iV)(),a={};n&&n.forEach((function(e){c[e]&&(a[e]=c[e])}));var d,f=i?a:c;d=window.location.pathname;var p=u?s().push:s().replace,v=l(l({},f),e);Object.entries(e).forEach((function(e){var r=(0,t.Z)(e,2),n=r[0],u=r[1];"undefined"!==typeof u&&null!==u||delete v[n]}));var h=(0,o.uM)(v);h.length>=1&&(h="?".concat(h));var b="".concat(d.split("?")[0]).concat(h);return p(s().router.pathname,b,{shallow:!0})}function p(e,r,n){var u=n.addingMultipleValues,i=n.isList,s=n.itemsPerPage,o=n.pushHistory,a=void 0!==o&&o,p=n.resetLimitParams,v=l({},e);u?Object.entries(r).forEach((function(e){var r=(0,t.Z)(e,2),n=r[0],u=r[1];if(Array.isArray(u)){var i="".concat(n,"[]");v[i]=u.map(String)}})):i?Object.entries(r).forEach((function(e){var r=(0,t.Z)(e,2),n=r[0],u=r[1],i=String(u),s="".concat(n,"[]"),o=v[s];o&&Array.isArray(o)?(o=o.map(String)).includes(i)?v[s]=(0,c.Od)(o,(function(e){return e===i})):v[s]=o.concat(i):v[s]=[i]})):v=l(l({},v),r),p&&(v._limit=s||20,v[d]=0),f(v,{pushHistory:a})}},72695:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage/users",function(){return n(37938)}])}},function(e){e.O(0,[844,7607,1424,1005,8180,3883,9774,2888,179],(function(){return r=72695,e(e.s=r);var r}));var r=e.O();_N_E=r}]);