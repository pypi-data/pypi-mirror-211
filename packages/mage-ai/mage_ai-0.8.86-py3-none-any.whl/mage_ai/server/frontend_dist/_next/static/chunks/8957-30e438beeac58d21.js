"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8957],{75968:function(n,e,t){t.d(e,{J8:function(){return v},MS:function(){return b},Ts:function(){return p},_o:function(){return m},eY:function(){return s},fA:function(){return f}});var o=t(82394),i=t(86422),r=t(98781),u=t(90211),c=t(33766),l=t(60701);function d(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function a(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?d(Object(t),!0).forEach((function(e){(0,o.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var s=function(n,e){var t=(null===e||void 0===e?void 0:e.upstream_blocks)||[];return i.iZ.includes(null===n||void 0===n?void 0:n.type)||i.iZ.includes(null===e||void 0===e?void 0:e.type)||i.tf.DATA_LOADER===(null===e||void 0===e?void 0:e.type)&&i.tf.SENSOR!==n.type||t.push(n.uuid),t},f=function(n,e,t){var o=[];return(null===n||void 0===n?void 0:n.type)!==r.qL.STREAMING||i.iZ.includes(null===e||void 0===e?void 0:e.type)||i.iZ.includes(null===t||void 0===t?void 0:t.type)||(o=o.concat((null===e||void 0===e?void 0:e.downstream_blocks)||[])),o},p=function(n,e,t,o){for(var r,c=[],l=e.findIndex((function(e){return e.uuid===n.uuid}));!r&&l>=0;){var d;r=e[l-1],i.tf.SCRATCHPAD===(null===(d=r)||void 0===d?void 0:d.type)&&(r=null),l-=1}return r&&c.push(r.uuid),i.Ut.map((function(e){return{label:function(){return"Convert to ".concat((0,u.wX)(i.V4[e]))},onClick:function(){return o({converted_from_type:e,converted_from_uuid:n.uuid,type:e,upstream_blocks:c})},uuid:"".concat(t,"/convert_to/").concat(e)}}))},v=function(n,e,t,o,r,u){var d=n||{},s=d.configuration,f=d.downstream_blocks,p=d.has_callback,v=d.language,b=d.metadata,m=d.replicated_block,h=d.type,k=d.upstream_blocks,g=d.uuid,y=s||{},x=y.dynamic,O=y.reduce_output,C=i.tf.DBT===h,j=[];if(![i.tf.CALLBACK,i.tf.EXTENSION,i.tf.MARKDOWN].includes(h)){j.push({label:function(){return C?"Execute and run upstream blocks":"Execute with upstream blocks"},onClick:function(){return e({block:n,runUpstream:!0})},uuid:"execute_upstream"}),C||j.push({label:function(){return"Execute block and run tests"},onClick:function(){return e({block:n,runTests:!0})},uuid:"run_tests"});var _,E,T=u||{},P=T.addNewBlock,w=T.blocksMapping,D=T.fetchFileTree,S=T.fetchPipeline,Z=T.savePipelineContent,I=T.updatePipeline,A=[];if(f.forEach((function(n){var e=null===w||void 0===w?void 0:w[n];e&&e.upstream_blocks.forEach((function(n){var e,t;null!==w&&void 0!==w&&null!==(e=w[n])&&void 0!==e&&null!==(t=e.configuration)&&void 0!==t&&t.dynamic&&A.push(w[n])}))})),C&&i.t6.SQL===v)null!==b&&void 0!==b&&null!==(_=b.dbt)&&void 0!==_&&null!==(E=_.block)&&void 0!==E&&E.snapshot||j.unshift.apply(j,[{label:function(){return"Run model"},onClick:function(){return e({block:n,runSettings:{run_model:!0}})},tooltip:function(){return"Execute command dbt run."},uuid:"run_model"},{label:function(){return"Test model"},onClick:function(){return e({block:n,runSettings:{test_model:!0}})},tooltip:function(){return"Execute command dbt test."},uuid:"test_model"},{label:function(){return"Build model"},onClick:function(){return e({block:n,runSettings:{build_model:!0}})},tooltip:function(){return"Execute command dbt build."},uuid:"build_model"},{label:function(){return"Add upstream models"},onClick:function(){I({pipeline:{add_upstream_for_block_uuid:null===n||void 0===n?void 0:n.uuid}})},tooltip:function(){return"Add upstream models for this model to the pipeline."},uuid:"add_upstream_models"}]);if(C||!Z||!x&&0!==A.length||j.push({label:function(){return x?"Disable block as dynamic":"Set block as dynamic"},onClick:function(){return Z({block:a(a({},n),{},{configuration:a(a({},s),{},{dynamic:!x})})})},uuid:"dynamic"}),w)(null===k||void 0===k?void 0:k.find((function(n){var e,t;return null===w||void 0===w||null===(e=w[n])||void 0===e||null===(t=e.configuration)||void 0===t?void 0:t.dynamic})))&&j.push({label:function(){return O?"Don\u2019t reduce output":"Reduce output"},onClick:function(){return Z({block:a(a({},n),{},{configuration:a(a({},s),{},{reduce_output:!O})})})},uuid:"reduce_output"});j.push({label:function(){return p?"Remove callback":"Add callback"},onClick:function(){if(p)return Z({block:a(a({},n),{},{has_callback:!p})}).then((function(){D(),S()}));(0,c.u7)({sideview:l.cH.CALLBACKS})},uuid:"has_callback"}),C||j.push({disabled:!!m,label:function(){return"Replicate block"},onClick:function(){return P({replicated_block:g})},uuid:"Replicate block"})}return j.push({label:function(){return"Delete block"},onClick:function(){t(n),o(!1)},uuid:"delete_block"}),r?[j.pop()]:j};function b(n){var e=n.tags,t=[];return null===e||void 0===e||e.forEach((function(n){i.L8.DBT_SNAPSHOT===n?t.push({description:"This is a dbt snapshot file.",title:(0,u.vg)(i.L8.DBT_SNAPSHOT)}):i.L8.DYNAMIC===n?t.push({description:"This block will create N blocks for each of its downstream blocks.",title:(0,u.vg)(i.L8.DYNAMIC)}):i.L8.DYNAMIC_CHILD===n?t.push({description:"This block is dynamically created by its upstream parent block that is dynamic.",title:(0,u.vg)(i.L8.DYNAMIC_CHILD)}):i.L8.REDUCE_OUTPUT===n?t.push({description:"Reduce output from all dynamically created blocks into a single array output.",title:(0,u.vg)(i.L8.REDUCE_OUTPUT)}):i.L8.REPLICA===n?t.push({description:"This block is a replica of another block in the current pipeline.",title:(0,u.vg)(i.L8.REPLICA)}):t.push({title:n})})),t}function m(n){var e=n.block,t=n.dynamic,o=n.dynamicUpstreamBlock,i=n.hasError,r=(n.reduceOutput,n.reduceOutputUpstreamBlock),u=n.selected,c=o&&!r;return{borderColorShareProps:{blockColor:null===e||void 0===e?void 0:e.color,blockType:null===e||void 0===e?void 0:e.type,dynamicBlock:t,dynamicChildBlock:c,hasError:i,selected:u},tags:b(e)}}},35438:function(n,e,t){t.d(e,{Ai:function(){return u},BT:function(){return l},Jo:function(){return r},X8:function(){return d},bJ:function(){return c},rl:function(){return o}});var o,i=t(86422),r=(t(49125).iI,1e4),u={compact:!0},c={height:10,width:10},l=[i.tf.DATA_EXPORTER,i.tf.SENSOR],d=[i.Lq.GREY,i.Lq.PINK,i.Lq.TEAL,i.Lq.YELLOW];!function(n){n.NORTH="NORTH",n.SOUTH="SOUTH"}(o||(o={}))},48957:function(n,e,t){t.d(e,{Z:function(){return nn}});var o=t(21831),i=t(75582),r=t(82394),u=t(26304),c=t(77837),l=t(38860),d=t.n(l),a=t(51774),s=t.n(a),f=t(9518),p=t(4804),v=t(82684),b=t(83455),m=t(86422),h=t(67971),k=t(18283),g=t(16634),y=t(86673),x=t(54283),O=t(19711),C=t(23831),j=t(10503),_=t(35438),E=t(73942),T=t(37391),P=t(49125),w=f.default.div.withConfig({displayName:"indexstyle__GraphContainerStyle",componentId:"sc-bc2ei5-0"})(["div{","}",""],T.w5,(function(n){return n.height&&"\n    height: ".concat(n.height,"px;\n  ")})),D=f.default.div.withConfig({displayName:"indexstyle__NodeStyle",componentId:"sc-bc2ei5-1"})(["border-radius:","px;border:1px solid transparent;min-width:fit-content;"," "," "," "," ",""],E.BG,(function(n){return n.selected&&"\n    border-color: ".concat((n.theme.content||C.Z.content).active,";\n  ")}),(function(n){return n.backgroundColor&&"\n    background-color: ".concat(n.backgroundColor,";\n  ")}),(function(n){return(n.isCancelled||n.disabled)&&"\n    // opacity doesn\u2019t work on Safari\n    border-color: ".concat((n.theme.content||C.Z.content).active,";\n    border-style: dashed;\n    cursor: not-allowed;\n  ")}),(function(n){return n.disabled&&"\n    &:hover {\n      cursor: not-allowed;\n    }\n  "}),(function(n){return n.height&&"\n    height: ".concat(n.height,"px;\n  ")})),S=f.default.div.withConfig({displayName:"indexstyle__RuntimeStyle",componentId:"sc-bc2ei5-2"})(["margin-right:","px;padding:12px 4px;height:100%;width:50px;background:rgba(0,0,0,0.2);background-blend-mode:soft-light;"],2*P.iI),Z=t(75968),I=t(44162),A=t(25958),B=t(90211),N=function(n){var e=n/1e3,t=4-Math.floor(e).toString().length,o=(0,B.QV)(e,t>=0?t:0),i="s";return o>1e3&&(o=(0,B.QV)(o/60,0),i="m"),"".concat(o).concat(i)},R=function(n,e){var t=n||{},o=t.id,i=t.side,r=null===e||void 0===e?void 0:e.id;return i===_.rl.NORTH?null===o||void 0===o?void 0:o.endsWith("".concat(r,"-to")):i===_.rl.SOUTH&&(null===o||void 0===o?void 0:o.startsWith(r))},L=t(28598);var U=function(n){var e=n.block,t=n.bodyText,o=n.children,i=n.disabled,r=n.hasFailed,u=n.height,c=n.hideStatus,l=n.isCancelled,d=n.isInProgress,a=n.isQueued,s=n.isSuccessful,p=n.kicker,b=(n.onClick,n.runtime),E=n.selected,T=(n.subtitle,(0,v.useContext)(f.ThemeContext)),w=e.color,B=e.type,R=e.uuid,U=(0,Z.MS)(e),H=!(d||a||r||s||l),M=s&&!(d||a),q=r&&!(d||a),G="";H?G="No status":M?G="Successful execution":q?G="Failed execution":d?G="Currently executiing":l&&(G="Cancelled execution");var V=_.BT.includes(B)||_.X8.includes(w),F=p;return m.tf.DBT!==B||F||(F=(0,A.IU)(e).project),(0,L.jsx)(D,{backgroundColor:(0,I.qn)(B,{blockColor:w,theme:T}).accent,disabled:i,height:u,isCancelled:l,selected:E,children:(0,L.jsxs)(h.Z,{alignItems:"center",fullHeight:!0,children:[b&&(0,L.jsx)(S,{backgroundColor:(0,I.qn)(B,{blockColor:w,theme:T}).accent,children:(0,L.jsx)(h.Z,{justifyContent:"center",children:(0,L.jsx)(O.ZP,{inverted:_.BT.includes(B)||_.X8.includes(w),xsmall:!0,children:N(b)})})}),!b&&(0,L.jsx)(y.Z,{ml:2}),!c&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(h.Z,{alignItems:"center",justifyContent:"center",style:{height:2*P.iI,width:2*P.iI},title:G,children:[d&&(0,L.jsx)(x.Z,{color:(T||C.Z).content.active,small:!0}),M&&(0,L.jsx)(j.Jr,{size:2*P.iI,success:!0}),q&&(0,L.jsx)(j.x8,{danger:!0,size:1.5*P.iI}),H&&(0,L.jsx)(g.Z,{borderSize:1,size:1*P.iI})]}),(0,L.jsx)(y.Z,{ml:1})]}),(0,L.jsxs)(h.Z,{flexDirection:"column",justifyContent:"center",style:{height:"100%",padding:"8px 0"},children:[F&&(0,L.jsx)(O.ZP,{bold:!0,inverted:V,monospace:!0,xsmall:!0,children:F}),t&&(0,L.jsx)(O.ZP,{inverted:V,monospace:!0,small:!0,children:t}),o,(null===U||void 0===U?void 0:U.length)>=1&&(0,L.jsx)(h.Z,{alignItems:"center",children:U.reduce((function(n,e,t){var o=e.title;return t>=1&&n.push((0,L.jsx)("div",{children:"\xa0"},"space-".concat(o))),n.push((0,L.jsx)(k.Z,{inverted:!V,xxsmall:!0,children:o},"badge-".concat(o))),n}),[])})]})]})},R)},H=t(11135),M=t(98781),q=t(82531),G=t(66050),V=t(24224),F=t(96510),K=t(87323),J=["forwardedRef"];function X(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function Q(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?X(Object(t),!0).forEach((function(e){(0,r.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):X(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var Y=s()((0,c.Z)(d().mark((function n(){var e,o;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.e(4434),t.e(5987),t.e(3873)]).then(t.t.bind(t,74529,23));case 2:return e=n.sent,o=e.Canvas,n.abrupt("return",(function(n){var e=n.forwardedRef,t=(0,u.Z)(n,J);return(0,L.jsx)(o,Q({ref:e},t))}));case 5:case"end":return n.stop()}}),n)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}),z=s()((0,c.Z)(d().mark((function n(){var e;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.e(4434),t.e(5987),t.e(3873)]).then(t.t.bind(t,74529,23));case 2:return e=n.sent,n.abrupt("return",e.Node);case 4:case"end":return n.stop()}}),n)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}),W=s()((0,c.Z)(d().mark((function n(){var e;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.e(4434),t.e(5987),t.e(3873)]).then(t.t.bind(t,74529,23));case 2:return e=n.sent,n.abrupt("return",e.Edge);case 4:case"end":return n.stop()}}),n)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}}),$=s()((0,c.Z)(d().mark((function n(){var e;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.e(4434),t.e(5987),t.e(3873)]).then(t.t.bind(t,74529,23));case 2:return e=n.sent,n.abrupt("return",e.Port);case 4:case"end":return n.stop()}}),n)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[74529]}}});var nn=function(n){var e=n.blockRefs,t=n.blockStatus,r=n.disabled,u=n.editingBlock,c=n.enablePorts,l=void 0!==c&&c,d=n.fetchPipeline,a=n.height,s=n.heightOffset,k=void 0===s?10*P.iI:s,g=n.noStatus,x=n.onClickNode,C=n.pannable,j=void 0===C||C,E=n.pipeline,T=n.runningBlocks,D=void 0===T?[]:T,S=n.selectedBlock,Z=n.setEditingBlock,B=n.setErrors,N=n.setSelectedBlock,J=n.setZoom,X=n.showDynamicBlocks,nn=void 0!==X&&X,en=n.treeRef,tn=n.zoomable,on=void 0===tn||tn,rn=(0,v.useContext)(f.ThemeContext),un=(0,v.useRef)(null),cn=en||un,ln=(0,v.useState)([]),dn=ln[0],an=ln[1],sn=(0,v.useState)(!1),fn=sn[0],pn=sn[1],vn=(0,v.useState)(null),bn=vn[0],mn=vn[1],hn=l&&fn,kn=(null===u||void 0===u?void 0:u.upstreamBlocks)||{},gn=kn.block,yn=kn.values,xn=void 0===yn?[]:yn,On=(0,v.useMemo)((function(){return xn.length}),[xn]),Cn=(0,v.useMemo)((function(){var n;return(null===E||void 0===E||null===(n=E.blocks)||void 0===n?void 0:n.filter((function(n){var e=n.type;return!m.iZ.includes(e)})))||[]}),[null===E||void 0===E?void 0:E.blocks]),jn=((0,V.HK)((0,K.cU)(Cn,Cn),(function(n){return n.block.uuid})),(0,v.useMemo)((function(){return Cn}),[Cn,nn])),_n=(0,v.useMemo)((function(){return(0,V.HK)(jn,(function(n){return n.uuid}))}),[jn]),En=(0,v.useMemo)((function(){return(0,V.HK)(D,(function(n){return n.uuid}))}),[D]),Tn=(0,b.Db)(q.ZP.blocks.pipelines.useUpdate(null===E||void 0===E?void 0:E.uuid,encodeURIComponent(null===gn||void 0===gn?void 0:gn.uuid)),{onSuccess:function(n){return(0,F.wD)(n,{callback:function(){Z({upstreamBlocks:null}),null===d||void 0===d||d()},onErrorCallback:function(n,e){return null===B||void 0===B?void 0:B({errors:e,response:n})}})}}),Pn=(0,i.Z)(Tn,2),wn=Pn[0],Dn=Pn[1].isLoading,Sn=(0,b.Db)((function(n){var e=n.fromBlock,t=n.portSide,o=n.toBlock,i=n.removeDependency,r=o,u=o.upstream_blocks.concat(e.uuid);return i||t!==_.rl.NORTH||(r=e,u=e.upstream_blocks.concat(o.uuid)),q.ZP.blocks.pipelines.useUpdate(null===E||void 0===E?void 0:E.uuid,encodeURIComponent(r.uuid))({block:Q(Q({},r),{},{upstream_blocks:i?o.upstream_blocks.filter((function(n){return n!==e.uuid})):u})})}),{onSuccess:function(n){return(0,F.wD)(n,{callback:function(){null===d||void 0===d||d()},onErrorCallback:function(n,e){return null===B||void 0===B?void 0:B({errors:e,response:n})}})}}),Zn=(0,i.Z)(Sn,1)[0],In=(0,v.useCallback)((function(n){var t=n.type,o=n.uuid;if(null===N||void 0===N||N(n),an([]),null!==e&&void 0!==e&&e.current){var i,r=e.current["".concat(t,"s/").concat(o,".py")];null===r||void 0===r||null===(i=r.current)||void 0===i||i.scrollIntoView()}}),[e,N]),An=(0,v.useCallback)((function(n){an([]),Z((function(e){var t=e.upstreamBlocks.values||[],o=t.findIndex((function(e){var t=e.uuid;return n.uuid===t}));return Q(Q({},e),{},{upstreamBlocks:Q(Q({},e.upstreamBlocks),{},{values:o>=0?(0,V.oM)(t,o):t.concat(n)})})}))}),[Z]),Bn=(0,v.useMemo)((function(){var n={};return jn.forEach((function(e){e.upstream_blocks.forEach((function(t){n[t]||(n[t]=[]),n[t].push(e)}))})),n}),[jn]),Nn=(0,v.useCallback)((function(n){var e,t;if(M.qL.INTEGRATION===(null===E||void 0===E?void 0:E.type)&&m.tf.TRANSFORMER!==n.type){var o,i={};if(m.t6.YAML===n.language&&(i=(0,p.Qc)(n.content)),m.tf.DATA_LOADER===n.type)e="".concat(n.uuid,": ").concat(null===(o=i)||void 0===o?void 0:o.source);else if(m.tf.DATA_EXPORTER===n.type){var r;e="".concat(n.uuid,": ").concat(null===(r=i)||void 0===r?void 0:r.destination)}}else if(m.tf.DBT===n.type&&m.t6.SQL===n.language){var u=(0,A.IU)(n);e=u.name,t=u.project}return null!==n&&void 0!==n&&n.replicated_block&&(e=null===n||void 0===n?void 0:n.replicated_block,t=null===n||void 0===n?void 0:n.uuid),e||(e=n.uuid),{displayText:e,kicker:t,subtitle:undefined}}),[E]),Rn=(0,v.useMemo)((function(){var n=[],e=[];return jn.forEach((function(i){var u,c=Nn(i),l=c.displayText,d=c.kicker,a=c.subtitle,s=i.tags,f=void 0===s?[]:s,p=i.upstream_blocks,v=void 0===p?[]:p,b=i.uuid,m=Bn[b],h=[];m?h.push.apply(h,(0,o.Z)(m.map((function(n){return Q(Q({},_.bJ),{},{id:"".concat(b,"-").concat(n.uuid,"-from"),side:_.rl.SOUTH})})))):h.push(Q(Q({},_.bJ),{},{id:"".concat(b,"-from"),side:_.rl.SOUTH})),0===v.length&&h.push(Q(Q({},_.bJ),{},{id:"".concat(b,"-to"),side:_.rl.NORTH})),null===v||void 0===v||v.forEach((function(n){h.push(Q(Q({},_.bJ),{},{id:"".concat(n,"-").concat(b,"-to"),side:_.rl.NORTH})),e.push({from:n,fromPort:"".concat(n,"-").concat(b,"-from"),id:"".concat(n,"-").concat(b),to:b,toPort:"".concat(n,"-").concat(b,"-to")})}));var k=37;(null===f||void 0===f?void 0:f.length)>=1&&(k+=1.5*P.iI),d&&(k+=1.5*P.iI),a&&(k+=2*P.iI);var g=l;[d,a].forEach((function(n){n&&n.length>g.length&&(g=n)})),n.push({data:{block:i},height:k,id:b,ports:h,width:g.length*P.KF+(r?0:5*P.iI)+((null===gn||void 0===gn?void 0:gn.uuid)===i.uuid?19*P.KF:0)+(null!==t&&void 0!==t&&null!==(u=t[i.uuid])&&void 0!==u&&u.runtime?50:0)})})),{edges:e,nodes:n}}),[null===gn||void 0===gn?void 0:gn.uuid,t,jn,r,Nn,Bn]),Ln=Rn.edges,Un=Rn.nodes,Hn=(0,v.useCallback)((function(n){if(g)return{};if(t){var e=t[n.uuid]||{},o=e.status,i=e.runtime;return{hasFailed:G.V.FAILED===o,isCancelled:G.V.CANCELLED===o,isInProgress:G.V.RUNNING===o,isQueued:G.V.INITIAL===o,isSuccessful:G.V.COMPLETED===o,runtime:i}}var r;return{hasFailed:m.DA.FAILED===n.status,isInProgress:En[n.uuid],isQueued:En[n.uuid]&&(null===(r=D[0])||void 0===r?void 0:r.uuid)!==n.uuid,isSuccessful:m.DA.EXECUTED===n.status}}),[t,g,D,En]),Mn=(0,v.useMemo)((function(){var n=0;return a&&(n+=a),k&&(n-=k),Math.max(0,n)}),[a,k]);return(0,L.jsxs)(L.Fragment,{children:[gn&&(0,L.jsxs)(y.Z,{my:3,px:P.cd,children:[(0,L.jsxs)(y.Z,{mb:P.cd,children:[(0,L.jsxs)(O.ZP,{children:["Select parent block(s) for ",(0,L.jsx)(O.ZP,{color:(0,I.qn)(gn.type,{blockColor:gn.color,theme:rn}).accent,inline:!0,monospace:!0,children:gn.uuid}),":"]}),(0,L.jsx)(y.Z,{mt:1,children:xn.map((function(n,e){var t,o,i=n.uuid;return(0,L.jsxs)(O.ZP,{color:(0,I.qn)(null===(t=_n[i])||void 0===t?void 0:t.type,{blockColor:null===(o=_n[i])||void 0===o?void 0:o.type,theme:rn}).accent,inline:!0,monospace:!0,children:[i,On>=2&&e<=On-2?(0,L.jsx)(O.ZP,{inline:!0,children:",\xa0"}):null]},i)}))})]}),(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(H.ZP,{compact:!0,inline:!0,loading:Dn,onClick:function(){return wn({block:Q(Q({},gn),{},{upstream_blocks:xn.map((function(n){return n.uuid}))})})},uuid:"DependencyGraph/save_parents",children:"Save dependencies"}),(0,L.jsx)(y.Z,{ml:1}),(0,L.jsx)(H.ZP,{compact:!0,inline:!0,noBackground:!0,onClick:function(){an([]),Z({upstreamBlocks:null})},uuid:"DependencyGraph/cancel_save_parents",children:"Cancel"})]})]}),(0,L.jsx)(w,{height:Mn,onDoubleClick:function(){var n,e;return null===cn||void 0===cn||null===(n=cn.current)||void 0===n||null===(e=n.fitCanvas)||void 0===e?void 0:e.call(n)},children:(0,L.jsx)(Y,{arrow:null,disabled:r,edge:function(n){var e,t=_n[n.source];return(0,L.jsx)(W,Q(Q({},n),{},{onClick:function(n,e){mn(null),an([e.id])},onRemove:function(n,e){var t=_n[e.from],o=_n[e.to];Zn({fromBlock:t,removeDependency:!0,toBlock:o}),an([])},removable:l&&!(null!==u&&void 0!==u&&u.upstreamBlocks),style:{stroke:null===(e=(0,I.qn)(null===t||void 0===t?void 0:t.type,{blockColor:null===t||void 0===t?void 0:t.color,theme:rn}))||void 0===e?void 0:e.accent}}))},edges:Ln,fit:!0,forwardedRef:cn,maxHeight:_.Jo,maxWidth:_.Jo,maxZoom:1,minZoom:-.7,node:function(n){var e,t,o,i,c,l;return(0,L.jsx)(z,Q(Q({},n),{},{dragType:"port",linkable:!0,onClick:function(n,e){var t=e.data.block;mn(null),(null===gn||void 0===gn?void 0:gn.uuid)===t.uuid||(gn?An(t):(null===x||void 0===x||x({block:t}),setTimeout((function(){In(t)}),1)))},onEnter:function(){null!==u&&void 0!==u&&u.upstreamBlocks||pn(!0)},onLeave:function(){return pn(!1)},port:hn&&(null===bn||R(bn,n))?(0,L.jsx)($,{onDrag:function(){return pn(!0)},onDragEnd:function(){pn(!1),mn(null)},onDragStart:function(n,e,t){var o=null===t||void 0===t?void 0:t.side;mn({id:null===t||void 0===t?void 0:t.id,side:o})},onEnter:function(){return pn(!0)},rx:10,ry:10,style:{fill:(0,I.qn)(null===n||void 0===n||null===(e=n.properties)||void 0===e||null===(t=e.data)||void 0===t||null===(o=t.block)||void 0===o?void 0:o.type,{blockColor:null===n||void 0===n||null===(i=n.properties)||void 0===i||null===(c=i.data)||void 0===c||null===(l=c.block)||void 0===l?void 0:l.color,theme:rn}).accent,stroke:"white",strokeWidth:"1px"}}):null,style:{fill:"transparent",stroke:"transparent",strokeWidth:0},children:function(n){var e=n.height,t=n.node.data.block,o=Hn(t),i=Nn(t),u=i.displayText,c=i.kicker,l=i.subtitle;return(0,L.jsx)("foreignObject",{height:e,style:{pointerEvents:"none"},width:n.width,x:0,y:0,children:(0,L.jsx)(U,Q({block:t,bodyText:"".concat(u).concat((null===gn||void 0===gn?void 0:gn.uuid)===t.uuid?" (editing)":""),disabled:(null===gn||void 0===gn?void 0:gn.uuid)===t.uuid,height:e,hideStatus:r,kicker:c,selected:gn?!!(0,V.sE)(xn,(function(n){return n.uuid===t.uuid})):(null===S||void 0===S?void 0:S.uuid)===t.uuid,subtitle:l},o),t.uuid)})}}))},nodes:Un,onNodeLink:function(n,e,t,o){var i,r=_n[e.id],u=_n[t.id],c=(null===E||void 0===E?void 0:E.type)===M.qL.INTEGRATION&&((null===r||void 0===r?void 0:r.type)===m.tf.DATA_EXPORTER||(null===r||void 0===r?void 0:r.type)===m.tf.DATA_LOADER&&(null===u||void 0===u?void 0:u.type)===m.tf.DATA_EXPORTER);if(!(null!==r&&void 0!==r&&null!==(i=r.upstream_blocks)&&void 0!==i&&i.includes(u.uuid)||e.id===t.id||c)){var l=null===o||void 0===o?void 0:o.side;Zn({fromBlock:r,portSide:l||_.rl.SOUTH,toBlock:u})}},onNodeLinkCheck:function(n,e,t){return!Ln.some((function(n){return n.from===e.id&&n.to===t.id}))},onZoomChange:function(n){return null===J||void 0===J?void 0:J(n)},pannable:j,selections:dn,zoomable:on})})]})}},66050:function(n,e,t){var o;t.d(e,{V:function(){return o}}),function(n){n.CANCELLED="cancelled",n.COMPLETED="completed",n.FAILED="failed",n.INITIAL="initial",n.RUNNING="running"}(o||(o={}))},18283:function(n,e,t){var o=t(82394),i=t(26304),r=(t(82684),t(9518)),u=t(23831),c=t(73942),l=t(2005),d=t(49125),a=t(31012),s=t(28598),f=["children"];function p(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function v(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?p(Object(t),!0).forEach((function(e){(0,o.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var b=r.default.p.withConfig({displayName:"Badge__BadgeStyle",componentId:"sc-tfqsp0-0"})(["border-radius:","px;display:inline;font-family:",";margin:0;",";"," "," ",";",";"," "," "," "," "," "," ",""],c.BG,l.ry,a.iD,(function(n){return n.small&&"\n    ".concat(a.HC,";\n  ")}),(function(n){return n.xxsmall&&"\n    font-size: ".concat(a.VK,"px;\n    line-height: ").concat(a.VK,"px;\n  ")}),(function(n){return!n.regular&&"\n    padding: 2px 4px;\n  "}),(function(n){return n.regular&&"\n    padding: ".concat(1*d.iI,"px ").concat(1.25*d.iI,"px;\n  ")}),(function(n){return n.noVerticalPadding&&"\n    padding-bottom: 0;\n    padding-top: 0;\n  "}),(function(n){return!n.disabled&&!n.inverted&&"\n    background-color: ".concat((n.theme||u.Z).background.row,";\n    color: ").concat((n.theme||u.Z).content.default,";\n  ")}),(function(n){return!n.disabled&&n.inverted&&"\n    background-color: ".concat((n.theme||u.Z).background.dark,";\n    color: ").concat((n.theme||u.Z).content.inverted,";\n  ")}),(function(n){return n.cyan&&"\n    background-color: ".concat((n.theme||u.Z).accent.cyan,";\n    color: ").concat((n.theme||u.Z).monotone.black,";\n  ")}),(function(n){return n.disabled&&"\n    background-color: ".concat((n.theme||u.Z).feature.disabled,";\n    color: ").concat((n.theme||u.Z).content.disabled,";\n  ")}),(function(n){return n.quantifier&&"\n    border-radius: 34px;\n    line-height: 10px;\n    padding: 4px 6px;\n  "}),(function(n){return n.monospace&&"\n    font-family: ".concat(l.Vp,";\n    word-break: break-all;\n  ")}));e.Z=function(n){var e=n.children,t=(0,i.Z)(n,f);return(0,s.jsx)(b,v(v({},t),{},{children:e}))}},87323:function(n,e,t){t.d(e,{cU:function(){return u}});var o=t(82684),i=t(24224);function r(n,e){return function(n,e,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{includeAllNodes:!1},r=(0,i.HK)(t,(function(n){return n.uuid})),u=(o||{}).includeAllNodes,c=[];function l(t){if(t){var o=(t[e]||[]).reduce((function(e,t){return n.uuid===t?e:e.concat(r[t])}),[]);(0===o.length||u&&n.uuid!==t.uuid)&&c.push(t),o.forEach((function(n){l(n)}))}}return l(n),c}(n,"upstream_blocks",e,{includeAllNodes:!0})}function u(n,e){return(0,o.useMemo)((function(){return n.map((function(t){var o=function(n,e){var t=r(n,e),o=t.filter((function(e){var t=e.configuration,o=e.uuid;return(null===t||void 0===t?void 0:t.dynamic)&&o!==(null===n||void 0===n?void 0:n.uuid)})),i=t.filter((function(e){var t=e.configuration,o=e.uuid;return(null===t||void 0===t?void 0:t.reduce_output)&&o!==(null===n||void 0===n?void 0:n.uuid)}));return{dynamicUpstreamBlock:o[0],dynamicUpstreamBlocks:o,reduceOutputUpstreamBlock:i[0],reduceOutputUpstreamBlocks:i}}(t,e),i=o.dynamicUpstreamBlock,u=o.dynamicUpstreamBlocks,c=o.reduceOutputUpstreamBlock,l=o.reduceOutputUpstreamBlocks,d=(t||{}).configuration||{},a=d.dynamic,s=d.reduce_output;return{block:t,blocksToUse:n,dynamic:!!a,dynamicUpstreamBlock:i,dynamicUpstreamBlocks:u,reduceOutput:!!s,reduceOutputUpstreamBlock:c,reduceOutputUpstreamBlocks:l}}))}),[e,null===e||void 0===e?void 0:e.map((function(n){var e=n.configuration;return null===e||void 0===e?void 0:e.dynamic})),null===e||void 0===e?void 0:e.map((function(n){var e=n.configuration;return null===e||void 0===e?void 0:e.reduce_output})),null===e||void 0===e?void 0:e.map((function(n){return n.upstream_blocks}))])}},25958:function(n,e,t){t.d(e,{$1:function(){return r},Dy:function(){return i},IU:function(){return u}});var o=t(17717),i="--full-refresh";function r(n,e){var t,i=null===e||void 0===e?void 0:e.fullPath,r=null===n||void 0===n||null===(t=n.configuration)||void 0===t?void 0:t.file_path;if(i)return null===n||void 0===n?void 0:n.uuid;if(r){var u=r.split(o.sep),c=u[u.length-1].split(".");return c.pop(),c.join(".")}}function u(n){var e,t=null===n||void 0===n||null===(e=n.configuration)||void 0===e?void 0:e.file_path;if(t){var i=t.split(o.sep),r=i[0],u=i[i.length-1].split(".");return u.pop(),{directory:i.slice(1,i.length-1).join(o.sep),filePath:t,name:u.join("."),project:r}}return{filePath:t}}}}]);