"use strict";(self.webpackChunkjupyterlab_sparksql=self.webpackChunkjupyterlab_sparksql||[]).push([[568],{568:(t,e,i)=>{i.r(e),i.d(e,{default:()=>c});var n=i(779),s=i(872);const r={ipython:"text/x-ipython","%%sql":"text/x-pgsql","%%sh":"text/x-sh","%%bash":"text/x-sh","%%html":"text/html","%%javascript":"text/javascript","%%js":"text/javascript"};class l{constructor(t,e){this.app=t,this.tracker=e,this.app.restored.then((()=>{var t,e;null===(t=this.tracker.currentWidget)||void 0===t||t.content.fullyRendered.connect((t=>{if(this.tracker.currentWidget){const t=this.tracker.currentWidget.content.widgets.length;this.setSyntax(this.tracker.currentWidget.content.widgets.slice(t-1,t)[0])}})),null===(e=this.tracker.currentWidget)||void 0===e||e.content.modelContentChanged.connect((()=>{this.tracker.activeCell&&this.setSyntax(this.tracker.activeCell)})),this.tracker.currentChanged.connect((t=>{t.restored.then((()=>{var e,i,n,s;null===(i=null===(e=t.currentWidget)||void 0===e?void 0:e.model)||void 0===i||i.cells.changed.connect(((e,i)=>{var n;if("add"===i.type){const s=null===(n=t.currentWidget)||void 0===n?void 0:n.content.widgets;if(s){const t=s.find((t=>t.model.id===e.get(i.newIndex).id));t&&this.setSyntax(t)}}})),null===(s=null===(n=t.currentWidget)||void 0===n?void 0:n.model)||void 0===s||s.contentChanged.connect((()=>{this.tracker.activeCell&&this.setSyntax(this.tracker.activeCell)}))}))}))}))}setSyntax(t){const e=t.editor.editor;if(null!==t&&(0,s.isCodeCellModel)(t.model)){const t=e.getDoc().getLine(0),i=e.getDoc().getLine(1),n=t.split(" ")[0];if(n.startsWith("%%")&&n in r)return void this.highlight(e,r[n]);t.indexOf("spark.sql(")>=0?this.highlight(e,r["%%sql"]):void 0!==i?i.indexOf("spark.sql(")>=0&&this.highlight(e,r["%%sql"]):this.highlight(e,r.ipython)}}highlight(t,e,i=!0){const n=t.getOption("mode");"null"!==n?n!==e&&t.setOption("mode",e):i&&setTimeout((()=>this.highlight(t,e,!1)),0)}}const c={id:"jupyterlab-sparksql:plugin",autoStart:!0,requires:[n.INotebookTracker],activate:function(t,e){console.log("JupyterLab extension jupyterlab-sparksql is activated!"),new l(t,e)}}}}]);