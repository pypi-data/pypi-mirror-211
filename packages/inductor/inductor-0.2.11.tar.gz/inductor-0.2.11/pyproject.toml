[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[project]
name = "inductor"
version = "0.2.11"
requires-python = ">=3.7"
license-files = { paths = ["LICENSE"] }
classifiers = ["Programming Language :: Python :: 3"]
dependencies = [
    "typing_extensions>=4.4,<5",
    "fastapi>=0.85.1,<1",
    "uvicorn[standard]>=0.19,<1",
    "aiofiles>=22.1,<23",
    "apscheduler>=3.9.1,<4",
    "pandas>=1.3.5,<2",
    "typer[all]>=0.6.1,<1",
    "watchgod>=0.8.2,<1",
    "joblib>=1.2,<2",
    "PyMySQL>=1.0.2,<2",
    "Pillow>=9.2,<10",
    "plotly>=5.11,<6",
    "numpy>=1.21.6,<2",
    "boto3>=1.24.76,<2",
    "psycopg2>=2.9.5,<3",
    "google-cloud-storage>=2.8.0,<3",
    "SQLAlchemy>=2.0.6,<3",
    "alembic>=1.10.2,<2",
]

[project.optional-dependencies]
bigquery = ["google-cloud-bigquery>=3.10.0,<4", "db-dtypes>=1.1.1,<2"]
clickhouse = ["clickhouse-connect>=0.5.24,<1"]
mysql = ["PyMySQL>=1.0.2,<2"]
postgres = ["psycopg2>=2.9.5,<3"]
postgresql = ["psycopg2>=2.9.5,<3"]
snowflake = ["snowflake-connector-python>=3.0.0,<4", "pyarrow>=10.0.1,<10.1.0"]

[project.urls]
Homepage = "https://inductor.ai"

[project.scripts]
inductor = "inductor.cli:app"

[tool.hatch.build]
packages = ["inductor"]
only-packages = true
exclude = ["README*", "inductor/conftest.py"]
artifacts = [
    "inductor/ui/frontend/build/**",
    "inductor/ui/frontend/build/static/**",
    "inductor/ui/frontend/build/static/js/**",
]

[tool.pytest.ini_options]
addopts = "-m \"not slow and not manualsetup\""
markers = [
    "slow: marks tests as slow (deselect with '-m \"not slow\"')",
    "manualsetup: marks tests as requiring manual setup (deselect with '-m \"not manualsetup\"')",
]
