!function(){var t={4989:function(t,e,s){var i=s(7537),n=s(3645)(i);n.push([t.id,"\n.notification-body {\n  overflow-wrap: break-word;\n}\n","",{version:3,sources:["webpack://./kadi/assets/scripts/components/local/base/NotificationToast.vue"],names:[],mappings:";AAkCA;EACA,yBAAA;AACA",sourcesContent:['\x3c!-- Copyright 2020 Karlsruhe Institute of Technology\n   -\n   - Licensed under the Apache License, Version 2.0 (the "License");\n   - you may not use this file except in compliance with the License.\n   - You may obtain a copy of the License at\n   -\n   -     http://www.apache.org/licenses/LICENSE-2.0\n   -\n   - Unless required by applicable law or agreed to in writing, software\n   - distributed under the License is distributed on an "AS IS" BASIS,\n   - WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   - See the License for the specific language governing permissions and\n   - limitations under the License. --\x3e\n\n<template>\n  <div class="toast mw-100" data-animation="false" data-autohide="false" data-delay="0" ref="toast">\n    <div class="toast-header bg-primary">\n      <span class="mr-auto">{{ title }}</span>\n      <button type="button" class="ml-2 close text-white" @click="dismiss">\n        <i class="fa-solid fa-xmark fa-xs"></i>\n      </button>\n    </div>\n    <div class="toast-body py-2">\n      <div class="notification-body" v-html="body"></div>\n      <div class="mt-1">\n        <small class="text-muted">\n          <from-now :timestamp="timestamp"></from-now>\n        </small>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style>\n.notification-body {\n  overflow-wrap: break-word;\n}\n</style>\n\n<script>\nexport default {\n  props: {\n    title: String,\n    body: String,\n    timestamp: String,\n    dismissEndpoint: String,\n  },\n  methods: {\n    dismiss() {\n      axios.delete(this.dismissEndpoint)\n        .then(() => {\n          $(this.$refs.toast).toast(\'dispose\');\n          kadi.base.getNotifications();\n        })\n        .catch((error) => kadi.base.flashDanger($t(\'Error dismissing notification.\'), {request: error.request}));\n    },\n  },\n  mounted() {\n    $(this.$refs.toast).toast(\'show\');\n  },\n  beforeDestroy() {\n    $(this.$refs.toast).toast(\'dispose\');\n  },\n};\n<\/script>\n'],sourceRoot:""}]),t.exports=n},7465:function(t,e,s){var i=s(7537),n=s(3645)(i);n.push([t.id,".clear-btn[data-v-146f534d],.search-btn[data-v-146f534d]{background-color:#1a252f !important;transition:none}.custom-input[data-v-146f534d]{background-color:#1a252f;border:none;box-shadow:none;-webkit-appearance:none}.dropdown.active .custom-input[data-v-146f534d],.dropdown.active .clear-btn[data-v-146f534d],.dropdown.active .search-btn[data-v-146f534d]{background-color:#fff !important}.dropdown-item[data-v-146f534d]{white-space:normal;word-break:break-all}.dropdown-item[data-v-146f534d]:focus,.dropdown-item[data-v-146f534d]:hover{background-color:#ecf0f1}.font-identifier[data-v-146f534d]{font-size:90%}.font-timestamp[data-v-146f534d]{font-size:80%}.font-title[data-v-146f534d]{font-size:95%}.input-group-append-content[data-v-146f534d]{background-color:#fff;border:none;color:#aab7b8;padding-left:.75rem !important;padding-right:.75rem !important}.responsive-width[data-v-146f534d]{width:225px}@media(min-width: 1200px){.responsive-width[data-v-146f534d]{width:350px}}@media(max-width: 1200px){.type[data-v-146f534d]{display:none}}","",{version:3,sources:["webpack://./kadi/assets/scripts/components/local/base/QuickSearch.vue"],names:[],mappings:"AACA,yDACE,mCAAA,CACA,eAAA,CAGF,+BACE,wBAAA,CACA,WAAA,CACA,eAAA,CACA,uBAAA,CAIA,2IACE,gCAAA,CAIJ,gCACE,kBAAA,CACA,oBAAA,CAEA,4EACE,wBAAA,CAIJ,kCACE,aAAA,CAGF,iCACE,aAAA,CAGF,6BACE,aAAA,CAGF,6CACE,qBAAA,CACA,WAAA,CACA,aAAA,CACA,8BAAA,CACA,+BAAA,CAGF,mCACE,WAAA,CAEA,0BAHF,mCAII,WAAA,CAAA,CAKF,0BADF,uBAEI,YAAA,CAAA",sourcesContent:["\n.clear-btn, .search-btn {\n  background-color: #1a252f !important;\n  transition: none;\n}\n\n.custom-input {\n  background-color: #1a252f;\n  border: none;\n  box-shadow: none;\n  -webkit-appearance: none;\n}\n\n.dropdown.active {\n  .custom-input, .clear-btn, .search-btn {\n    background-color: white !important;\n  }\n}\n\n.dropdown-item {\n  white-space: normal;\n  word-break: break-all;\n\n  &:focus, &:hover {\n    background-color: #ecf0f1;\n  }\n}\n\n.font-identifier {\n  font-size: 90%;\n}\n\n.font-timestamp {\n  font-size: 80%;\n}\n\n.font-title {\n  font-size: 95%;\n}\n\n.input-group-append-content {\n  background-color: white;\n  border: none;\n  color: #aab7b8;\n  padding-left: 0.75rem !important;\n  padding-right: 0.75rem !important;\n}\n\n.responsive-width {\n  width: 225px;\n\n  @media (min-width: 1200px) {\n    width: 350px;\n  }\n}\n\n.type {\n  @media (max-width: 1200px) {\n    display: none;\n  }\n}\n"],sourceRoot:""}]),t.exports=n},3665:function(t,e,s){var i=s(7537),n=s(3645)(i);n.push([t.id,".font-identifier[data-v-74ecd9ba]{font-size:90%}.font-timestamp[data-v-74ecd9ba]{font-size:80%}.font-title[data-v-74ecd9ba]{font-size:95%}.items[data-v-74ecd9ba]{padding:0 0 1px 0}@media(min-width: 1200px)and (max-width: 1500px){.type[data-v-74ecd9ba]{display:none}}","",{version:3,sources:["webpack://./kadi/assets/scripts/components/local/base/RecentlyVisited.vue"],names:[],mappings:"AACA,kCACE,aAAA,CAGF,iCACE,aAAA,CAGF,6BACE,aAAA,CAGF,wBACE,iBAAA,CAIA,iDADF,uBAEI,YAAA,CAAA",sourcesContent:["\n.font-identifier {\n  font-size: 90%;\n}\n\n.font-timestamp {\n  font-size: 80%;\n}\n\n.font-title {\n  font-size: 95%;\n}\n\n.items {\n  padding: 0 0 1px 0;\n}\n\n.type {\n  @media (min-width: 1200px) and (max-width: 1500px) {\n    display: none;\n  }\n}\n"],sourceRoot:""}]),t.exports=n},3645:function(t){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s="",i=void 0!==e[5];return e[4]&&(s+="@supports (".concat(e[4],") {")),e[2]&&(s+="@media ".concat(e[2]," {")),i&&(s+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),s+=t(e),i&&(s+="}"),e[2]&&(s+="}"),e[4]&&(s+="}"),s})).join("")},e.i=function(t,s,i,n,a){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var r=0;r<this.length;r++){var d=this[r][0];null!=d&&(o[d]=!0)}for(var l=0;l<t.length;l++){var c=[].concat(t[l]);i&&o[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),s&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=s):c[2]=s),n&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=n):c[4]="".concat(n)),e.push(c))}},e}},7537:function(t){"use strict";t.exports=function(t){var e=t[1],s=t[3];if(!s)return e;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),a="/*# ".concat(n," */");return[e].concat([a]).join("\n")}return[e].join("\n")}},9854:function(t,e,s){var i=s(4989);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals),(0,s(5346).Z)("cb9a25f8",i,!1,{})},3157:function(t,e,s){var i=s(7465);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals),(0,s(5346).Z)("060b7b8e",i,!1,{})},6634:function(t,e,s){var i=s(3665);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals),(0,s(5346).Z)("815b9148",i,!1,{})},5346:function(t,e,s){"use strict";function i(t,e){for(var s=[],i={},n=0;n<e.length;n++){var a=e[n],o=a[0],r={id:t+":"+n,css:a[1],media:a[2],sourceMap:a[3]};i[o]?i[o].parts.push(r):s.push(i[o]={id:o,parts:[r]})}return s}s.d(e,{Z:function(){return f}});var n="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!n)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},o=n&&(document.head||document.getElementsByTagName("head")[0]),r=null,d=0,l=!1,c=function(){},u=null,p="data-vue-ssr-id",m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(t,e,s,n){l=s,u=n||{};var o=i(t,e);return h(o),function(e){for(var s=[],n=0;n<o.length;n++){var r=o[n];(d=a[r.id]).refs--,s.push(d)}for(e?h(o=i(t,e)):o=[],n=0;n<s.length;n++){var d;if(0===(d=s[n]).refs){for(var l=0;l<d.parts.length;l++)d.parts[l]();delete a[d.id]}}}}function h(t){for(var e=0;e<t.length;e++){var s=t[e],i=a[s.id];if(i){i.refs++;for(var n=0;n<i.parts.length;n++)i.parts[n](s.parts[n]);for(;n<s.parts.length;n++)i.parts.push(g(s.parts[n]));i.parts.length>s.parts.length&&(i.parts.length=s.parts.length)}else{var o=[];for(n=0;n<s.parts.length;n++)o.push(g(s.parts[n]));a[s.id]={id:s.id,refs:1,parts:o}}}}function v(){var t=document.createElement("style");return t.type="text/css",o.appendChild(t),t}function g(t){var e,s,i=document.querySelector("style["+p+'~="'+t.id+'"]');if(i){if(l)return c;i.parentNode.removeChild(i)}if(m){var n=d++;i=r||(r=v()),e=b.bind(null,i,n,!1),s=b.bind(null,i,n,!0)}else i=v(),e=C.bind(null,i),s=function(){i.parentNode.removeChild(i)};return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else s()}}var w,A=(w=[],function(t,e){return w[t]=e,w.filter(Boolean).join("\n")});function b(t,e,s,i){var n=s?"":i.css;if(t.styleSheet)t.styleSheet.cssText=A(e,n);else{var a=document.createTextNode(n),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}function C(t,e){var s=e.css,i=e.media,n=e.sourceMap;if(i&&t.setAttribute("media",i),u.ssrId&&t.setAttribute(p,e.id),n&&(s+="\n/*# sourceURL="+n.sources[0]+" */",s+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),t.styleSheet)t.styleSheet.cssText=s;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(s))}}}},e={};function s(i){var n=e[i];if(void 0!==n)return n.exports;var a=e[i]={id:i,exports:{}};return t[i](a,a.exports,s),a.exports}s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){"use strict";var t=function(){var t=this,e=t._self._c;return t.showBroadcastMsg?e("div",{staticClass:"card"},[e("div",{staticClass:"card-body pb-1"},[e("button",{staticClass:"close text-primary",attrs:{type:"button"},on:{click:t.dismissBroadcast}},[e("i",{staticClass:"fa-solid fa-xmark fa-xs"})]),t._v(" "),e("markdown-renderer",{attrs:{input:t.message}})],1)]):t._e()};function e(t,e,s,i,n,a,o,r){var d,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=s,l._compiled=!0),i&&(l.functional=!0),a&&(l._scopeId="data-v-"+a),o?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=d):n&&(d=r?function(){n.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:n),d)if(l.functional){l._injectStyles=d;var c=l.render;l.render=function(t,e){return d.call(e),c(t,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,d):[d]}return{exports:t,options:l}}t._withStripped=!0;var i=e({data(){return{storageKey:"hide_broadcast_msg",showBroadcastMsg:!1}},props:{message:String,hash:String},methods:{dismissBroadcast(){window.localStorage.setItem(this.storageKey,this.hash),this.showBroadcastMsg=!1}},mounted(){""===this.message?window.localStorage.removeItem(this.storageKey):window.localStorage.getItem(this.storageKey)!==this.hash&&(window.localStorage.removeItem(this.storageKey),this.showBroadcastMsg=!0)}},t,[],!1,null,null,null).exports,n=function(){var t=this,e=t._self._c;return t.active?e("div",[e("div",{staticClass:"alert fade show",class:`alert-${t.type}`},[t.icon?e("i",{staticClass:"fa",class:`fa-${t.icon}`}):t._e(),t._v(" "+t._s(t.message)+"\n  ")])]):t._e()};n._withStripped=!0;var a=e({data(){return{icon:null,active:!0}},props:{message:String,type:{type:String,default:"info"},timeout:{type:Number,default:5e3}},mounted(){"info"===this.type?this.icon="circle-info":"danger"===this.type?this.icon="circle-xmark":"warning"===this.type?this.icon="triangle-exclamation":"success"===this.type&&(this.icon="circle-check"),null!==this.timeout&&window.setTimeout((()=>this.active=!1),this.timeout)}},n,[],!1,null,null,null).exports,o=function(){var t=this,e=t._self._c;return e("div",t._l(t.messages,(function(t){return e("div",{key:t.id},[e("flash-message",{staticClass:"mb-4",attrs:{message:t.message,type:t.type,timeout:t.timeout}})],1)})),0)};o._withStripped=!0;var r=e({components:{FlashMessage:a},data(){return{messages:[]}},methods:{addMessage(t,e,s){let i=e;const n={request:null,timeout:5e3,scrollTo:!0,...s};if(null!==n.request){if(0===n.request.status)return;i=`${e} (${n.request.status})`}this.messages.push({id:kadi.utils.randomAlnum(),message:i,type:t,timeout:n.timeout}),n.scrollTo&&kadi.utils.scrollIntoView(this.$el,"bottom")},flashDanger(t,e){this.addMessage("danger",t,e)},flashInfo(t,e){this.addMessage("info",t,e)},flashSuccess(t,e){this.addMessage("success",t,e)},flashWarning(t,e){this.addMessage("warning",t,e)}}},o,[],!1,null,null,null).exports,d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dropup float-lg-right"},[e("a",{staticClass:"text-white dropdown-toggle",attrs:{href:"#","data-toggle":"dropdown"}},[e("i",{staticClass:"fa-solid fa-globe"}),t._v(" "+t._s(t.$t("Language"))+"\n  ")]),t._v(" "),e("div",{staticClass:"dropdown-menu dropdown-menu-right mb-3"},[e("strong",{staticClass:"dropdown-header"},[t._v(t._s(t.$t("Select a language")))]),t._v(" "),t._l(t.locales,(function(s,i){return e("button",{key:i,staticClass:"dropdown-item",on:{click:function(e){return t.switchLocale(i)}}},[t._v("\n      "+t._s(s)+"\n      "),i===t.kadi.globals.locale?e("span",{staticClass:"float-right"},[e("i",{staticClass:"fa-solid fa-check fa-sm"})]):t._e()])}))],2)])};d._withStripped=!0;var l=e({props:{param:String,locales:Object},methods:{switchLocale(t){const e=kadi.utils.setSearchParam(this.param,t);window.location.href=e}}},d,[],!1,null,null,null).exports,c=function(){var t=this,e=t._self._c;return e("div",t._l(t.notifications,(function(t){return e("div",{key:t.id},[e("notification-toast",{staticClass:"mb-4",attrs:{title:t.data.title,body:t.data.body,timestamp:t.created_at,"dismiss-endpoint":t._actions.dismiss}})],1)})),0)};c._withStripped=!0;var u=function(){var t=this,e=t._self._c;return e("div",{ref:"toast",staticClass:"toast mw-100",attrs:{"data-animation":"false","data-autohide":"false","data-delay":"0"}},[e("div",{staticClass:"toast-header bg-primary"},[e("span",{staticClass:"mr-auto"},[t._v(t._s(t.title))]),t._v(" "),e("button",{staticClass:"ml-2 close text-white",attrs:{type:"button"},on:{click:t.dismiss}},[e("i",{staticClass:"fa-solid fa-xmark fa-xs"})])]),t._v(" "),e("div",{staticClass:"toast-body py-2"},[e("div",{staticClass:"notification-body",domProps:{innerHTML:t._s(t.body)}}),t._v(" "),e("div",{staticClass:"mt-1"},[e("small",{staticClass:"text-muted"},[e("from-now",{attrs:{timestamp:t.timestamp}})],1)])])])};u._withStripped=!0;var p={props:{title:String,body:String,timestamp:String,dismissEndpoint:String},methods:{dismiss(){axios.delete(this.dismissEndpoint).then((()=>{$(this.$refs.toast).toast("dispose"),kadi.base.getNotifications()})).catch((t=>kadi.base.flashDanger($t("Error dismissing notification."),{request:t.request})))}},mounted(){$(this.$refs.toast).toast("show")},beforeDestroy(){$(this.$refs.toast).toast("dispose")}},m=(s(9854),e(p,u,[],!1,null,null,null)),f=e({components:{NotificationToast:m.exports},data(){return{notifications:[],title:null,lastNotificationDate:null,currentTimeout:null,baseTimeout:5e3,maxTimeout:1e4,pollTimeoutHandle:null}},props:{endpoint:String},methods:{resetTimeout(){this.currentTimeout=this.baseTimeout},getNotifications(t=!1,e=!0){this.lastNotificationDate=new Date,e&&this.resetTimeout(),axios.get(this.endpoint).then((e=>{this.notifications=e.data;const s=this.notifications.length;t&&s>0&&this.$nextTick((()=>kadi.utils.scrollIntoView(this.$el,"bottom"))),document.title=s>0?`(${s}) ${this.title}`:this.title}))},beforeUnload(){window.clearTimeout(this.pollTimeoutHandle)}},mounted(){this.title=document.title,this.resetTimeout();const t=()=>{this.pollTimeoutHandle=window.setTimeout(t,this.currentTimeout),this.currentTimeout<this.maxTimeout&&(this.currentTimeout+=1e3),(null===this.lastNotificationDate||new Date-this.lastNotificationDate>=this.baseTimeout)&&this.getNotifications(!1,!1)};window.addEventListener("blur",(()=>{window.clearTimeout(this.pollTimeoutHandle)})),window.addEventListener("focus",(()=>{window.clearTimeout(this.pollTimeoutHandle),this.resetTimeout(),t()})),document.hasFocus()&&t(),window.addEventListener("beforeunload",this.beforeUnload)},beforeDestroy(){window.removeEventListener("beforeunload",this.beforeUnload)}},c,[],!1,null,null,null).exports,h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dropdown",class:{active:t.dropdownActive},attrs:{id:`dropdown-${t.id}`}},[e("div",{staticClass:"input-group input-group-sm responsive-width",on:{click:t.showDropdown}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],ref:"input",staticClass:"form-control custom-input",attrs:{placeholder:t.$t("Quick search")},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),t._v(" "),t.query?e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-sm clear-btn input-group-append-content",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.clearQuery.apply(null,arguments)}}},[e("i",{staticClass:"fa-solid fa-xmark"})])]):e("div",{staticClass:"input-group-append"},[t._m(0)])]),t._v(" "),e("div",{staticClass:"dropdown-menu p-0 mt-2 responsive-width",class:{"d-block":t.dropdownActive}},[t.initialized?e("div",[0===t.items.length?e("div",{staticClass:"px-2 my-1"},[e("strong",{staticClass:"font-identifier text-muted"},[t._v(t._s(t.$t("No results.")))])]):t._l(t.items,(function(s,i){return e("div",{key:s._links.view},[e("a",{staticClass:"dropdown-item text-default p-2",attrs:{href:s._links.view}},[e("div",{staticClass:"d-flex justify-content-between"},[e("strong",{staticClass:"font-title"},[t._v(t._s(t._f("truncate")(s.title,50)))]),t._v(" "),e("div",{staticClass:"type"},[e("span",{staticClass:"badge badge-light border border-muted font-weight-normal ml-3"},[t._v("\n                "+t._s(s.pretty_type)+"\n              ")])])]),t._v(" "),e("span",{staticClass:"font-identifier"},[t._v("@"+t._s(s.identifier))]),t._v(" "),e("br"),t._v(" "),e("span",{staticClass:"text-muted font-timestamp"},[t._v("\n            "+t._s(t.$t("Last modified"))+" "),e("from-now",{attrs:{timestamp:s.last_modified}})],1)]),t._v(" "),i<t.items.length-1?e("div",{staticClass:"dropdown-divider m-0"}):t._e()])}))],2):t._e(),t._v(" "),t.initialized?t._e():e("i",{staticClass:"fa-solid fa-circle-notch fa-spin p-2"})])])};h._withStripped=!0;var v={data(){return{id:kadi.utils.randomAlnum(),query:"",items:[],dropdownActive:!1,initialized:!1,searchTimeoutHandle:null}},props:{endpoint:String},watch:{query(){this.search()}},methods:{search(){window.clearTimeout(this.searchTimeoutHandle),this.searchTimeoutHandle=window.setTimeout((()=>{axios.get(`${this.endpoint}?query=${this.query}`).then((t=>{this.items=t.data,this.initialized=!0}))}),500)},showDropdown(){this.dropdownActive||(this.dropdownActive=!0,this.initialized||this.search())},clearQuery(){this.query="",this.dropdownActive=!0,this.$refs.input.focus()},outsideClickHandler(t){null===t.target.closest(`#dropdown-${this.id}`)&&(this.dropdownActive=!1)}},mounted(){window.addEventListener("click",this.outsideClickHandler)},beforeDestroy(){window.removeEventListener("click",this.outsideClickHandler)}},g=(s(3157),e(v,h,[function(){var t=this._self._c;return t("span",{staticClass:"input-group-text search-btn input-group-append-content"},[t("i",{staticClass:"fa-solid fa-magnifying-glass fa-sm"})])}],!1,null,"146f534d",null).exports),w=function(){var t=this,e=t._self._c;return t.kadi.globals.user_active?e("div",{directives:[{name:"show",rawName:"v-show",value:t.items.length>0,expression:"items.length > 0"}],staticClass:"card"},[e("div",{staticClass:"card-header border-bottom-0 py-1"},[e("collapse-item",{staticClass:"text-default stretched-link",attrs:{id:t.id,"is-collapsed":t.collapsed},on:{collapse:function(e){t.collapsed=e}}},[e("strong",[t._v(t._s(t.$t("Recently visited")))])])],1),t._v(" "),e("div",{staticClass:"card-body items",attrs:{id:t.id}},[e("div",{staticClass:"list-group list-group-flush"},t._l(t.items,(function(s){return e("div",{key:s.id,staticClass:"list-group-item list-group-item-action"},[e("a",{staticClass:"text-default stretched-link wb-break-all",attrs:{href:s.endpoint}},[e("div",{staticClass:"d-flex justify-content-between"},[e("strong",{staticClass:"font-title"},[t._v(t._s(t._f("truncate")(s.title,50)))]),t._v(" "),e("div",{staticClass:"type"},[e("span",{staticClass:"badge badge-light border border-muted font-weight-normal ml-3"},[t._v("\n                "+t._s(t.itemTypes[s.type]||s.type)+"\n              ")])])]),t._v(" "),e("span",{staticClass:"font-identifier"},[t._v("@"+t._s(s.identifier))]),t._v(" "),e("br"),t._v(" "),e("span",{staticClass:"text-muted font-timestamp"},[t._v("\n            "+t._s(t.$t("Last visited"))+" "),e("from-now",{attrs:{timestamp:s.timestamp}})],1)])])})),0)])]):t._e()};w._withStripped=!0;var A={data(){return{items:[],itemsStorageKey:"recently_visited_items",collapseStorageKey:"recently_visited_collapse",id:kadi.utils.randomAlnum(),collapsed:null,initialized:!1,itemTypes:{record:$t("Record"),collection:$t("Collection"),template:$t("Template"),group:$t("Group")}}},props:{maxItems:{type:Number,default:5}},watch:{collapsed(){this.collapsed?window.localStorage.setItem(this.collapseStorageKey,"true"):window.localStorage.removeItem(this.collapseStorageKey)}},methods:{addItem(t,e,s,i,n=null){const a={id:kadi.utils.randomAlnum(),timestamp:n||(new Date).toISOString(),type:t,title:e,identifier:s,endpoint:i},o=this.items.findIndex((t=>t.endpoint===i));-1!==o&&this.items.splice(o,1),this.initialized?this.items.unshift(a):this.items.push(a),this.items=this.items.slice(0,this.maxItems),this.initialized&&this.persistItems()},persistItems(){const t=[];for(const e of this.items){const s={...e};delete s.id,t.push(s)}window.localStorage.setItem(this.itemsStorageKey,JSON.stringify(t))},clearItems(){window.localStorage.removeItem(this.itemsStorageKey)}},created(){kadi.globals.user_active&&(window.localStorage.getItem(this.collapseStorageKey)?this.collapsed=!0:this.collapsed=!1)},mounted(){if(kadi.globals.user_active){try{const t=JSON.parse(window.localStorage.getItem(this.itemsStorageKey));for(const e of t)this.addItem(e.type,e.title,e.identifier,e.endpoint,e.timestamp)}catch{this.clearItems()}this.initialized=!0}else this.clearItems()}},b=(s(6634),e(A,w,[],!1,null,"74ecd9ba",null).exports);document.querySelectorAll(".kadi-logo").forEach((t=>{t.addEventListener("animationiteration",(()=>t.style.animation="none")),t.addEventListener("webkitAnimationIteration",(()=>t.style.animation="none"))})),window.addEventListener("invalid",(t=>kadi.utils.scrollIntoView(t.target)),!0),kadi.base={newVue(t){return new Vue({el:"#base-content",...t})}},new Vue({el:"#base-locale-chooser",components:{LocaleChooser:l}});const C=new Vue({el:"#base-flash-messages",components:{FlashMessage:a,FlashMessages:r}}).$refs.component;Object.assign(kadi.base,{flashDanger:C.flashDanger,flashInfo:C.flashInfo,flashSuccess:C.flashSuccess,flashWarning:C.flashWarning});const y=new Vue({el:"#base-recently-visited",components:{RecentlyVisited:b}}).$refs.component;if(kadi.base.visitItem=y.addItem,kadi.globals.user_active){const t={H:"",R:"records",C:"collections",T:"templates",U:"users",G:"groups"};window.addEventListener("keydown",(e=>{if(!["INPUT","SELECT","TEXTAREA"].includes(e.target.tagName)&&"true"!==e.target.contentEditable&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey)for(const[s,i]of Object.entries(t))if(e.key===s)return e.preventDefault(),void(window.location.href=`/${i}`)})),new Vue({el:"#base-quick-search",components:{QuickSearch:g}}),new Vue({el:"#base-broadcast-message",components:{BroadcastMessage:i}});const e=new Vue({el:"#base-notification-manager",components:{NotificationManager:f}}).$refs.component;kadi.base.getNotifications=e.getNotifications}}()}();
//# sourceMappingURL=base.js.map