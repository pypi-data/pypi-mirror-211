apiVersion: anyscale.aws.infra/v1alpha1
kind: ScalingPolicy
metadata:
  PolicyName:
    $basename:
      ${filename}
  ServiceNamespace: ecs
  ScalableDimension: ecs:service:DesiredCount
  ResourceId:
    $arn_body:
      $file(service.yaml)
  PolicyType: TargetTrackingScaling
spec:
  TargetTrackingScalingPolicyConfiguration:
    PredefinedMetricSpecification:
      PredefinedMetricType: ECSServiceAverageCPUUtilization
    TargetValue: 8
    ScaleOutCooldown: 60
    ScaleInCooldown: 300
