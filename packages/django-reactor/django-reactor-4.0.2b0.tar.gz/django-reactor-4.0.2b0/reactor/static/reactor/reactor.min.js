(()=>{var _e=Object.defineProperty;var me=(t,e,n)=>e in t?_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var H=(t,e,n)=>(me(t,typeof e!="symbol"?e+"":e,n),n);var re=11;function ge(t,e){var n=e.attributes,i,r,o,s,u;if(!(e.nodeType===re||t.nodeType===re)){for(var d=n.length-1;d>=0;d--)i=n[d],r=i.name,o=i.namespaceURI,s=i.value,o?(r=i.localName||r,u=t.getAttributeNS(o,r),u!==s&&(i.prefix==="xmlns"&&(r=i.name),t.setAttributeNS(o,r,s))):(u=t.getAttribute(r),u!==s&&t.setAttribute(r,s));for(var _=t.attributes,b=_.length-1;b>=0;b--)i=_[b],r=i.name,o=i.namespaceURI,o?(r=i.localName||r,e.hasAttributeNS(o,r)||t.removeAttributeNS(o,r)):e.hasAttribute(r)||t.removeAttribute(r)}}var q,ye="http://www.w3.org/1999/xhtml",p=typeof document=="undefined"?void 0:document,be=!!p&&"content"in p.createElement("template"),we=!!p&&p.createRange&&"createContextualFragment"in p.createRange();function Ee(t){var e=p.createElement("template");return e.innerHTML=t,e.content.childNodes[0]}function Te(t){q||(q=p.createRange(),q.selectNode(p.body));var e=q.createContextualFragment(t);return e.childNodes[0]}function Se(t){var e=p.createElement("body");return e.innerHTML=t,e.childNodes[0]}function Oe(t){return t=t.trim(),be?Ee(t):we?Te(t):Se(t)}function V(t,e){var n=t.nodeName,i=e.nodeName,r,o;return n===i?!0:(r=n.charCodeAt(0),o=i.charCodeAt(0),r<=90&&o>=97?n===i.toUpperCase():o<=90&&r>=97?i===n.toUpperCase():!1)}function Ce(t,e){return!e||e===ye?p.createElement(t):p.createElementNS(e,t)}function Le(t,e){for(var n=t.firstChild;n;){var i=n.nextSibling;e.appendChild(n),n=i}return e}function Q(t,e,n){t[n]!==e[n]&&(t[n]=e[n],t[n]?t.setAttribute(n,""):t.removeAttribute(n))}var ie={OPTION:function(t,e){var n=t.parentNode;if(n){var i=n.nodeName.toUpperCase();i==="OPTGROUP"&&(n=n.parentNode,i=n&&n.nodeName.toUpperCase()),i==="SELECT"&&!n.hasAttribute("multiple")&&(t.hasAttribute("selected")&&!e.selected&&(t.setAttribute("selected","selected"),t.removeAttribute("selected")),n.selectedIndex=-1)}Q(t,e,"selected")},INPUT:function(t,e){Q(t,e,"checked"),Q(t,e,"disabled"),t.value!==e.value&&(t.value=e.value),e.hasAttribute("value")||t.removeAttribute("value")},TEXTAREA:function(t,e){var n=e.value;t.value!==n&&(t.value=n);var i=t.firstChild;if(i){var r=i.nodeValue;if(r==n||!n&&r==t.placeholder)return;i.nodeValue=n}},SELECT:function(t,e){if(!e.hasAttribute("multiple")){for(var n=-1,i=0,r=t.firstChild,o,s;r;)if(s=r.nodeName&&r.nodeName.toUpperCase(),s==="OPTGROUP")o=r,r=o.firstChild;else{if(s==="OPTION"){if(r.hasAttribute("selected")){n=i;break}i++}r=r.nextSibling,!r&&o&&(r=o.nextSibling,o=null)}t.selectedIndex=n}}},x=1,Ne=11,oe=3,se=8;function N(){}function Ae(t){if(t)return t.getAttribute&&t.getAttribute("id")||t.id}function Re(t){return function(n,i,r){if(r||(r={}),typeof i=="string")if(n.nodeName==="#document"||n.nodeName==="HTML"||n.nodeName==="BODY"){var o=i;i=p.createElement("html"),i.innerHTML=o}else i=Oe(i);var s=r.getNodeKey||Ae,u=r.onBeforeNodeAdded||N,d=r.onNodeAdded||N,_=r.onBeforeElUpdated||N,b=r.onElUpdated||N,D=r.onBeforeNodeDiscarded||N,C=r.onNodeDiscarded||N,U=r.onBeforeElChildrenUpdated||N,m=r.childrenOnly===!0,g=Object.create(null),y=[];function L(l){y.push(l)}function Z(l,c){if(l.nodeType===x)for(var a=l.firstChild;a;){var f=void 0;c&&(f=s(a))?L(f):(C(a),a.firstChild&&Z(a,c)),a=a.nextSibling}}function M(l,c,a){D(l)!==!1&&(c&&c.removeChild(l),C(l),Z(l,a))}function ee(l){if(l.nodeType===x||l.nodeType===Ne)for(var c=l.firstChild;c;){var a=s(c);a&&(g[a]=c),ee(c),c=c.nextSibling}}ee(n);function F(l){d(l);for(var c=l.firstChild;c;){var a=c.nextSibling,f=s(c);if(f){var v=g[f];v&&V(c,v)?(c.parentNode.replaceChild(v,c),j(v,c)):F(c)}else F(c);c=a}}function he(l,c,a){for(;c;){var f=c.nextSibling;(a=s(c))?L(a):M(c,l,!0),c=f}}function j(l,c,a){var f=s(c);f&&delete g[f],!(!a&&(_(l,c)===!1||(t(l,c),b(l),U(l,c)===!1)))&&(l.nodeName!=="TEXTAREA"?pe(l,c):ie.TEXTAREA(l,c))}function pe(l,c){var a=c.firstChild,f=l.firstChild,v,w,P,G,E;e:for(;a;){for(G=a.nextSibling,v=s(a);f;){if(P=f.nextSibling,a.isSameNode&&a.isSameNode(f)){a=G,f=P;continue e}w=s(f);var B=f.nodeType,T=void 0;if(B===a.nodeType&&(B===x?(v?v!==w&&((E=g[v])?P===E?T=!1:(l.insertBefore(E,f),w?L(w):M(f,l,!0),f=E):T=!1):w&&(T=!1),T=T!==!1&&V(f,a),T&&j(f,a)):(B===oe||B==se)&&(T=!0,f.nodeValue!==a.nodeValue&&(f.nodeValue=a.nodeValue))),T){a=G,f=P;continue e}w?L(w):M(f,l,!0),f=P}if(v&&(E=g[v])&&V(E,a))l.appendChild(E),j(E,a);else{var J=u(a);J!==!1&&(J&&(a=J),a.actualize&&(a=a.actualize(l.ownerDocument||p)),l.appendChild(a),F(a))}a=G,f=P}he(l,f,w);var ne=ie[l.nodeName];ne&&ne(l,c)}var h=n,I=h.nodeType,te=i.nodeType;if(!m){if(I===x)te===x?V(n,i)||(C(n),h=Le(n,Ce(i.nodeName,i.namespaceURI))):h=i;else if(I===oe||I===se){if(te===I)return h.nodeValue!==i.nodeValue&&(h.nodeValue=i.nodeValue),h;h=i}}if(h===i)C(n);else{if(i.isSameNode&&i.isSameNode(h))return;if(j(h,i,m),y)for(var z=0,ve=y.length;z<ve;z++){var $=g[y[z]];$&&M($,$.parentNode,!1)}}return!m&&h!==n&&n.parentNode&&(h.actualize&&(h=h.actualize(n.ownerDocument||p)),n.parentNode.replaceChild(h,n)),h}}var Pe=Re(ge),ae=Pe;var K=function(t,e){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)i.hasOwnProperty(r)&&(n[r]=i[r])},K(t,e)};function ce(t,e){K(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function xe(t){var e=typeof Symbol=="function"&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function ke(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,o=[],s;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(u){s={error:u}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return o}function De(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ke(arguments[e]));return t}var le=function(){function t(e,n){this.target=n,this.type=e}return t}(),Ue=function(t){ce(e,t);function e(n,i){var r=t.call(this,"error",i)||this;return r.message=n.message,r.error=n,r}return e}(le),Me=function(t){ce(e,t);function e(n,i,r){n===void 0&&(n=1e3),i===void 0&&(i="");var o=t.call(this,"close",r)||this;return o.wasClean=!0,o.code=n,o.reason=i,o}return e}(le);var je=function(){if(typeof WebSocket!="undefined")return WebSocket},Ie=function(t){return typeof t!="undefined"&&!!t&&t.CLOSING===2},A={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},Ge=function(){function t(e,n,i){var r=this;i===void 0&&(i={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(o){r._debug("open event");var s=r._options.minUptime,u=s===void 0?A.minUptime:s;clearTimeout(r._connectTimeout),r._uptimeTimeout=setTimeout(function(){return r._acceptOpen()},u),r._ws.binaryType=r._binaryType,r._messageQueue.forEach(function(d){return r._ws.send(d)}),r._messageQueue=[],r.onopen&&r.onopen(o),r._listeners.open.forEach(function(d){return r._callEventListener(o,d)})},this._handleMessage=function(o){r._debug("message event"),r.onmessage&&r.onmessage(o),r._listeners.message.forEach(function(s){return r._callEventListener(o,s)})},this._handleError=function(o){r._debug("error event",o.message),r._disconnect(void 0,o.message==="TIMEOUT"?"timeout":void 0),r.onerror&&r.onerror(o),r._debug("exec error listeners"),r._listeners.error.forEach(function(s){return r._callEventListener(o,s)}),r._connect()},this._handleClose=function(o){r._debug("close event"),r._clearTimeouts(),r._shouldReconnect&&r._connect(),r.onclose&&r.onclose(o),r._listeners.close.forEach(function(s){return r._callEventListener(o,s)})},this._url=e,this._protocols=n,this._options=i,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(t,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(t,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CONNECTING",{get:function(){return t.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"OPEN",{get:function(){return t.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CLOSING",{get:function(){return t.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CLOSED",{get:function(){return t.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(n,i){return typeof i=="string"?n+=i.length:i instanceof Blob?n+=i.size:n+=i.byteLength,n},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?t.CLOSED:t.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),t.prototype.close=function(e,n){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,n)},t.prototype.reconnect=function(e,n){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,n),this._connect())},t.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var n=this._options.maxEnqueuedMessages,i=n===void 0?A.maxEnqueuedMessages:n;this._messageQueue.length<i&&(this._debug("enqueue",e),this._messageQueue.push(e))}},t.prototype.addEventListener=function(e,n){this._listeners[e]&&this._listeners[e].push(n)},t.prototype.dispatchEvent=function(e){var n,i,r=this._listeners[e.type];if(r)try{for(var o=xe(r),s=o.next();!s.done;s=o.next()){var u=s.value;this._callEventListener(e,u)}}catch(d){n={error:d}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return!0},t.prototype.removeEventListener=function(e,n){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(i){return i!==n}))},t.prototype._debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._options.debug&&console.log.apply(console,De(["RWS>"],e))},t.prototype._getNextDelay=function(){var e=this._options,n=e.reconnectionDelayGrowFactor,i=n===void 0?A.reconnectionDelayGrowFactor:n,r=e.minReconnectionDelay,o=r===void 0?A.minReconnectionDelay:r,s=e.maxReconnectionDelay,u=s===void 0?A.maxReconnectionDelay:s,d=0;return this._retryCount>0&&(d=o*Math.pow(i,this._retryCount-1),d>u&&(d=u)),this._debug("next delay",d),d},t.prototype._wait=function(){var e=this;return new Promise(function(n){setTimeout(n,e._getNextDelay())})},t.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var n=e();if(typeof n=="string")return Promise.resolve(n);if(n.then)return n}throw Error("Invalid URL")},t.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var n=this._options,i=n.maxRetries,r=i===void 0?A.maxRetries:i,o=n.connectionTimeout,s=o===void 0?A.connectionTimeout:o,u=n.WebSocket,d=u===void 0?je():u;if(this._retryCount>=r){this._debug("max retries reached",this._retryCount,">=",r);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!Ie(d))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(_){e._closeCalled||(e._debug("connect",{url:_,protocols:e._protocols}),e._ws=e._protocols?new d(_,e._protocols):new d(_),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},s))})}},t.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new Ue(Error("TIMEOUT"),this))},t.prototype._disconnect=function(e,n){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,n),this._handleClose(new Me(e,n,this))}catch{}}},t.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},t.prototype._callEventListener=function(e,n){"handleEvent"in n?n.handleEvent(e):n(e)},t.prototype._removeListeners=function(){!this._ws||(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},t.prototype._addListeners=function(){!this._ws||(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},t.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},t}(),X=Ge;var W=JSON.parse(document.querySelector("meta[name=reactor-boost]")?.dataset.enabled||"false");console.log("BOOST_PAGES",W);function ue(){if(W)for(let t of document.querySelectorAll("a[href]"))fe(t)}function fe(t){W&&t.tagName?.toLowerCase()==="a"&&t.hasAttribute("href")&&!(t.boosted||t.hasAttribute("onclick")||t.hasAttribute(":no-boost"))&&(t.boosted=!0,t.addEventListener("click",Be))}function Be(t){t.preventDefault(),R.load(t.target.href)}function Y(t,e){console.log("replaceBodyContent",e);let n=document.createElement("html");n.innerHTML=t,window.requestAnimationFrame(()=>{e?.beforeReplace&&e.beforeReplace(n),document.body=n.querySelector("body"),ue(),e?.afterReplace&&e.afterReplace(n)})}function He(t){return t.startsWith("http://")||t.startsWith("https://")?new URL(t).origin===document.location.origin:!0}var k=class{static async load(e){W?(this._saveCurrentPage(),console.log(e),He(e)?(this.push(e),await this.restoreFromCurrentPath()):location.assign(e)):location.assign(e)}static loadContent(e,n){console.log("Load content",e),Y(n,{beforeReplace(i){k._saveCurrentPage(),k.push(e),document.title=i.querySelector("title")?.text??""}})}static async restoreFromCurrentPath(){this._saveCurrentPage();let e=window.location.pathname+window.location.search;console.log("Restoring Page:",e);let n=this._get(e);n&&(Y(n.content,{beforeReplace(){document.title=n.title},afterReplace(){window.scrollTo(0,n.scroll)}}),console.log("currentPath",e),this.currentPath=e);let i=await fetch(window.location.href),r=await i.text();this.replace(i.url),Y(r,{beforeReplace(o){document.title=o.querySelector("title")?.text??""},afterReplace(){k._saveCurrentPage()}})}static back(){window.history.back()}static push(e){history.pushState({},document.title,e),this.currentPath=e}static replace(e){history.replaceState({},document.title,e),this.currentPath=e}static _saveCurrentPage(){if(console.log("Saving page:",this.currentPath),this.cache=this.cache.filter(({url:e})=>e!=this.currentPath),this.cache.push({url:this.currentPath,content:document.body.outerHTML,title:document.title,scroll:window.scrollY}),this.cache.length>this.maxSize){let e=this.cache.shift();console.log("Evicted:",e.url)}console.log("Currently cached:",this.cache.map(({url:e})=>e))}static _get(e){return this.cache.find(n=>n.url==e)}},R=k;H(R,"maxSize",10),H(R,"cache",[]),H(R,"currentPath",window.location.pathname+window.location.search);window.addEventListener("popstate",t=>{R.restoreFromCurrentPath()});window.addEventListener("load",()=>{ue()});var S={boostElement:fe,HistoryCache:R};var de=class extends EventTarget{open(e="__reactor__"){let n=location.protocol.replace("http","ws");this.socket=new X(`${n}//${location.host}/${e}`,[],{maxEnqueuedMessages:0}),this.socket.addEventListener("open",()=>{console.log("WS: OPEN"),this.dispatchEvent(new Event("open"))}),this.socket.addEventListener("message",i=>this._processMessage(i)),this.socket.addEventListener("close",()=>{console.log("WS: CLOSE"),this.dispatchEvent(new Event("close"))})}get isOpen(){return this.socket?.readyState==X.OPEN}_processMessage(e){let{command:n,payload:i}=JSON.parse(e.data);switch(n){case"render":var{id:r,diff:o}=i;console.log("<<< RENDER",r),document.getElementById(r)?.applyDiff(o);break;case"remove":var{id:r}=i;console.log("<<< REMOVE",r),document.getElementById(r)?.remove();break;case"focus_on":var{selector:s}=i;console.log("<<< FOCUS-ON",`"${s}"`),document.querySelector(s)?.focus();break;case"visit":var{url:u,replace:d}=i;d?(console.log("<< REPLACE",u),S.HistoryCache.replace(u)):(console.log("<< VISIT",u),S.HistoryCache.load(u));break;case"set_url_params":console.log("<< SET URL PARAMS",i);let b=document.location.search.slice(1),D={};b.length&&(D=b.split("&").map(m=>m.split("=")).reduce((m,g)=>{let[y,L]=g;return m[y]=L===void 0?void 0:decodeURIComponent(L),m},{}));let C=Object.entries(Object.assign(D,i)).map(m=>{let[g,y]=m;return g+(y===void 0?"":`=${encodeURIComponent(y)}`)}),U=document.location.pathname;C.length&&(U+="?"+C.join("&")),S.HistoryCache.replace(U);break;case"page":var{url:u,content:_}=i;console.log("<< PAGE",`"${u}"`),S.HistoryCache.loadContent(u,_);break;case"back":S.HistoryCache.back();break;default:console.error(`Unknown command "${n}"`,i)}}sendJoin(e,n){console.log(">>> JOIN",e),this._send("join",{name:e,state:n})}sendLeave(e){console.log(">>> LEAVE",e),this._send("leave",{id:e})}sendUserEvent(e,n,i,r){console.log(">>> USER_EVENT",e,n,r),this._send("user_event",{id:e,command:n,implicit_args:i,explicit_args:r})}_send(e,n){this.isOpen&&this.socket.send(JSON.stringify({command:e,payload:n}))}},O=new de;for({dataset}of document.querySelectorAll("meta[name=reactor-component]")){let t=document.createElement(dataset.extends);class e extends t.constructor{constructor(...i){super(...i);this._lastReceivedHtml=[],this.joinBind=()=>this.join(),this.wentOffline=()=>this.classList.add("reactor-disconnected")}connectedCallback(){O.addEventListener("open",this.joinBind),O.addEventListener("close",this.wentOffline),this.join()}disconnectedCallback(){O.removeEventListener("open",this.joinBind),O.removeEventListener("close",this.wentOffline),O.sendLeave(this.id)}join(){this.classList.remove("reactor-disconnected"),this.isRoot&&O.sendJoin(this.dataset.name,this.dataset.state)}applyDiff(i){let r=this.getHtml(i);window.requestAnimationFrame(()=>{ae(this,r,{onBeforeNodeAdded(o){S.boostElement(o)},onElUpdated(o){S.boostElement(o)}})})}getHtml(i){let r=[],o=0;for(let s of i)typeof s=="string"?r.push(s):s<0?o-=s:(r.push(...this._lastReceivedHtml.slice(o,o+s)),o+=s);return this._lastReceivedHtml=r,r.join(" ")}get isRoot(){return!this.parentComponent}get parentComponent(){return this.parentElement?.closest("[reactor-component]")}dispatch(i,r,o){O.sendUserEvent(this.id,i,this.serialize(o),r)}serialize(i){let r={};for(let o of i.querySelectorAll("[name]")){if(o.closest("[reactor-component]")!==this)continue;let s=null;switch(o.type.toLowerCase()){case"checkbox":case"radio":s=o.checked?o.value||!0:null;break;case"select-multiple":s=o.selectedOptions.map(u=>u.value);break;default:s=o.value;break}if(s!==null){let u=o.getAttribute("name"),d=r[u]??[];d.push(s),r[u]=d}}return r}}customElements.define(dataset.tagName,e,{extends:dataset.extends})}O.open();debounceTimeouts={};window.reactor={send(t,e,n){let i=t.closest("[reactor-component]");if(i!==null){let r=t.closest("form"),o=i.contains(r)?r:i;i.dispatch(e,n,o)}},debounce(t,e){return n=>(...i)=>{clearTimeout(debounceTimeouts[t]),debounceTimeouts[t]=setTimeout(()=>n(...i),e)}}};})();
/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
//# sourceMappingURL=reactor.min.js.map
