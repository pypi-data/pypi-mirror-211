(()=>{var e,t,r={9936:(e,t,r)=>{"use strict";var a=r(3578),n=r.n(a),i=r(9757);const o={uint8:{bytes:Uint8Array.BYTES_PER_ELEMENT,format:i.Z.RED_INTEGER,internalFormat:i.Z.R8UI,type:i.Z.UNSIGNED_BYTE,filtering:i.Z.NEAREST,samplerType:"usampler2DArray",max:255,create:function(e){return new Uint8Array(e)}},uint16:{bytes:Uint16Array.BYTES_PER_ELEMENT,format:i.Z.RED_INTEGER,internalFormat:i.Z.R16UI,type:i.Z.UNSIGNED_SHORT,filtering:i.Z.NEAREST,samplerType:"usampler2DArray",max:65535,create:function(e){return new Uint16Array(e)}}};self.onmessage=async function(e){const t={apiKey:e.data.token,basePath:e.data.basePath},r=new(n())(t),a=e.data.downsample,i=e.data.index.x,s=e.data.index.y,l=e.data.tileSize,c=e.data.format,f=e.data.axes.indexOf("X"),u=e.data.axes.indexOf("Y"),p=e.data.axes.indexOf("C"),d=new Array(3);d[f]=[i*l*a,Math.min((i+1)*l*a,e.data.levelWidth)-1],d[u]=[s*l*a,Math.min((s+1)*l*a,e.data.levelHeight)-1],d[p]=e.data.channelRanges;const y=(d[f][1]-d[f][0]+1)/a,h=(d[u][1]-d[u][0]+1)/a;let v=0;if("number"==typeof d[p][0])v=d[p][1]-d[p][0]+1;else for(const e of d[p])v+=e[1]-e[0]+1;const m={layout:"row-major",ranges:d,bufferSize:Math.pow(l*a,2)*v*o[c].bytes,attributes:["intensity"],returnRawBuffers:!0},b=r.query.ReadQuery(e.data.namespace,e.data.levelUri,m),g=o[c].create(await b.next().then((e=>e.value.intensity))),w=o[c].create(y*h*v),E=new Array(3);for(let e=0;e<d.length;++e)E[e]=d[e][1]-d[e][0]+1;1===a?self.postMessage({data:g,width:y,height:h,channels:v},[g.buffer]):(g.forEach(((e,t)=>{const r=new Array(3);r[0]=~~(t/(E[1]*E[2])),r[1]=~~(t%(E[1]*E[2])/E[2]),r[2]=t%E[2];const n=(r[p]*h+~~(r[u]/a))*y+~~(r[f]/a);w[n]=e})),self.postMessage({data:w,width:y,height:h,channels:v},[w.buffer]))}},8291:()=>{},4447:()=>{}},a={};function n(e){var t=a[e];if(void 0!==t)return t.exports;var i=a[e]={exports:{}};return r[e].call(i.exports,i,i.exports,n),i.exports}n.m=r,n.c=a,n.x=()=>{var e=n.O(void 0,[635],(()=>n(9936)));return n.O(e)},e=[],n.O=(t,r,a,i)=>{if(!r){var o=1/0;for(f=0;f<e.length;f++){for(var[r,a,i]=e[f],s=!0,l=0;l<r.length;l++)(!1&i||o>=i)&&Object.keys(n.O).every((e=>n.O[e](r[l])))?r.splice(l--,1):(s=!1,i<o&&(o=i));if(s){e.splice(f--,1);var c=a();void 0!==c&&(t=c)}}return t}i=i||0;for(var f=e.length;f>0&&e[f-1][2]>i;f--)e[f]=e[f-1];e[f]=[r,a,i]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>e+".4157372254b1af879611.js?v=4157372254b1af879611",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{n.S={};var e={},t={};n.I=(r,a)=>{a||(a=[]);var i=t[r];if(i||(i=t[r]={}),!(a.indexOf(i)>=0)){if(a.push(i),e[r])return e[r];n.o(n.S,r)||(n.S[r]={}),n.S[r];var o=[];return e[r]=o.length?Promise.all(o).then((()=>e[r]=1)):1}}})(),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var a=r.length-1;a>-1&&!e;)e=r[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={633:1};n.f.i=(t,r)=>{e[t]||importScripts(n.p+n.u(t))};var t=self.webpackChunk_tiledb_inc_jupyter_bioimage_viewer=self.webpackChunk_tiledb_inc_jupyter_bioimage_viewer||[],r=t.push.bind(t);t.push=t=>{var[a,i,o]=t;for(var s in i)n.o(i,s)&&(n.m[s]=i[s]);for(o&&o(n);a.length;)e[a.pop()]=1;r(t)}})(),t=n.x,n.x=()=>n.e(635).then(t),n.x()})();