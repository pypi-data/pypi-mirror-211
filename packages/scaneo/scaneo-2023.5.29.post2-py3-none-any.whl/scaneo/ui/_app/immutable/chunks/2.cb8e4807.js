import{S as V,i as P,s as S,k,l as C,m as p,h as m,n as _,b as D,g as E,v as K,d as T,f as X,I as M,o as se,J as ce,K as Se,C as Ie,D as Oe,E as Ne,F as Fe,L as Ue,M as Be,N as U,e as q,O as R,G as b,H as j,q as G,r as J,u as Z,P as He,a as H,c as z,Q as te,R as Re,T as ee,U as je,y as O,z as W,A as N,V as We,B as F,W as he,X as Ge,Y as Je,Z as Ze,_ as qe,$ as Qe,a0 as Ye,a1 as Ke,x as oe,p as Xe}from"./index.8c237fac.js";import{_ as ae}from"./preload-helper.41c905a7.js";import{w as Q,j as ze}from"./singletons.d791afcf.js";import{p as xe}from"./parse.bee59afc.js";import{p as $e}from"./stores.4b841c19.js";function et(){const{subscribe:o,set:e,update:l}=Q(null);return{subscribe:o,init:n=>e(n),remove:()=>{l(n=>(n==null||n.remove(),null))},stopPropagation:n=>{L.DomEvent.disableClickPropagation(n),L.DomEvent.disableScrollPropagation(n)},zoom:n=>{l(s=>(n instanceof L.Layer?s.fitBounds(n.getBounds()):s.fitBounds(L.geoJSON(n).getBounds()),s))}}}const $=et();function _e(o){let e;const l=o[7].default,t=Ie(l,o,o[6],null);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,a){t&&t.m(i,a),e=!0},p(i,a){t&&t.p&&(!e||a&64)&&Oe(t,l,i,i[6],e?Fe(l,i[6],a,null):Ne(i[6]),null)},i(i){e||(E(t,i),e=!0)},o(i){T(t,i),e=!1},d(i){t&&t.d(i)}}}function tt(o){let e,l,t=o[0]&&_e(o);return{c(){e=k("div"),t&&t.c(),this.h()},l(i){e=C(i,"DIV",{id:!0,class:!0});var a=p(e);t&&t.l(a),a.forEach(m),this.h()},h(){_(e,"id","map"),_(e,"class","svelte-yhv4y9")},m(i,a){D(i,e,a),t&&t.m(e,null),l=!0},p(i,[a]){i[0]?t?(t.p(i,a),a&1&&E(t,1)):(t=_e(i),t.c(),E(t,1),t.m(e,null)):t&&(K(),T(t,1,1,()=>{t=null}),X())},i(i){l||(E(t),l=!0)},o(i){T(t),l=!1},d(i){i&&m(e),t&&t.d()}}}function lt(o,e,l){let t;M(o,$,h=>l(0,t=h));let{$$slots:i={},$$scope:a}=e,{options:r={attributionControl:!1,drawControls:!0,max_zoom:20}}=e,{zoomPosition:n="bottomright"}=e,{zoom:s=12}=e,{position:f=[42.0407,3.1]}=e,{panes:u=null}=e,d;return se(async()=>{if(!d){const h=await ae(()=>import("./leaflet-src.20dcb89b.js").then(c=>c.l),["./leaflet-src.20dcb89b.js","./_commonjsHelpers.725317a4.js"],import.meta.url);await ae(()=>import("./ToggleToolset.452a7038.js"),[],import.meta.url),d=h.map("map",r).setView(f,s),d.zoomControl.setPosition(n),u==null||u.forEach(({name:c,zIndex:v})=>{d.createPane(c),d.getPane(c).style.zIndex=v,d.getPane(c).style.pointerEvents="none"}),$.init(d),h.control.toggleToolset().addTo(d)}}),ce(()=>{$.remove()}),Se("map",{getMap:()=>d}),o.$$set=h=>{"options"in h&&l(1,r=h.options),"zoomPosition"in h&&l(2,n=h.zoomPosition),"zoom"in h&&l(3,s=h.zoom),"position"in h&&l(4,f=h.position),"panes"in h&&l(5,u=h.panes),"$$scope"in h&&l(6,a=h.$$scope)},[t,r,n,s,f,u,a,i]}let it=class extends V{constructor(e){super(),P(this,e,lt,tt,S,{options:1,zoomPosition:2,zoom:3,position:4,panes:5})}};function nt(o,e,l){let{url:t}=e,{options:i}=e;const{getMap:a}=Ue("map");let r=null;return se(()=>{const n=a();r=L.tileLayer(t,i).addTo(n)}),ce(()=>{r.remove()}),o.$$set=n=>{"url"in n&&l(0,t=n.url),"options"in n&&l(1,i=n.options)},[t,i]}class ot extends V{constructor(e){super(),P(this,e,nt,null,S,{url:0,options:1})}}const x=Q({id:"background",color:"#71706f"}),fe=Q([]),at=()=>{const o={data:[{id:"background",color:"#71706f"},{id:"crops",color:"#eff542"},{id:"vegetation",color:"#48f542"},{id:"urban",color:"#f54242"},{id:"water",color:"#4260f5"}],current:Be(x),loading:!1,error:null},{subscribe:e,set:l,update:t}=Q(o);return{subscribe:e,reset:()=>l(o),select:i=>t(a=>({...a,current:i})),add:(i,a)=>t(r=>({...r,data:[...r.data,{id:i,color:a}]}))}},ue=at();function me(o){let e,l;return{c(){e=U("desc"),l=G(o[7])},l(t){e=R(t,"desc",{});var i=p(e);l=J(i,o[7]),i.forEach(m)},m(t,i){D(t,e,i),b(e,l)},p(t,i){i&128&&Z(l,t[7])},d(t){t&&m(e)}}}function ge(o){let e,l;return{c(){e=U("title"),l=G(o[6])},l(t){e=R(t,"title",{});var i=p(e);l=J(i,o[6]),i.forEach(m)},m(t,i){D(t,e,i),b(e,l)},p(t,i){i&64&&Z(l,t[6])},d(t){t&&m(e)}}}function rt(o){let e,l,t,i=o[7]&&me(o),a=o[6]&&ge(o);return{c(){e=U("svg"),i&&i.c(),l=q(),a&&a.c(),t=U("path"),this.h()},l(r){e=R(r,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var n=p(e);i&&i.l(n),l=q(),a&&a.l(n),t=R(n,"path",{d:!0,fill:!0}),p(t).forEach(m),n.forEach(m),this.h()},h(){_(t,"d","M9,3L3.36,4.9C3.16,4.97 3,5.15 3,5.38V20.5A0.5,0.5 0 0,0 3.5,21C3.55,21 3.6,21 3.66,20.97L9,18.9L13.16,20.36C13.06,19.92 13,19.46 13,19C13,18.77 13,18.54 13.04,18.3L9,16.9V5L15,7.1V14.56C16.07,13.6 17.47,13 19,13C19.7,13 20.37,13.13 21,13.36V3.5A0.5,0.5 0 0,0 20.5,3H20.34L15,5.1L9,3M18,15V18H15V20H18V23H20V20H23V18H20V15H18Z"),_(t,"fill",o[2]),_(e,"viewBox",o[3]),_(e,"width",o[0]),_(e,"height",o[1]),_(e,"class",o[8]),_(e,"aria-label",o[4]),_(e,"aria-hidden",o[5])},m(r,n){D(r,e,n),i&&i.m(e,null),b(e,l),a&&a.m(e,null),b(e,t)},p(r,[n]){r[7]?i?i.p(r,n):(i=me(r),i.c(),i.m(e,l)):i&&(i.d(1),i=null),r[6]?a?a.p(r,n):(a=ge(r),a.c(),a.m(e,t)):a&&(a.d(1),a=null),n&4&&_(t,"fill",r[2]),n&8&&_(e,"viewBox",r[3]),n&1&&_(e,"width",r[0]),n&2&&_(e,"height",r[1]),n&256&&_(e,"class",r[8]),n&16&&_(e,"aria-label",r[4]),n&32&&_(e,"aria-hidden",r[5])},i:j,o:j,d(r){r&&m(e),i&&i.d(),a&&a.d()}}}function st(o,e,l){let{size:t="1em"}=e,{width:i=t}=e,{height:a=t}=e,{color:r="currentColor"}=e,{viewBox:n="0 0 24 24"}=e,{ariaLabel:s=void 0}=e,{ariaHidden:f=void 0}=e,{title:u=void 0}=e,{desc:d=void 0}=e,{class:h=void 0}=e;return o.$$set=c=>{"size"in c&&l(9,t=c.size),"width"in c&&l(0,i=c.width),"height"in c&&l(1,a=c.height),"color"in c&&l(2,r=c.color),"viewBox"in c&&l(3,n=c.viewBox),"ariaLabel"in c&&l(4,s=c.ariaLabel),"ariaHidden"in c&&l(5,f=c.ariaHidden),"title"in c&&l(6,u=c.title),"desc"in c&&l(7,d=c.desc),"class"in c&&l(8,h=c.class)},[i,a,r,n,s,f,u,d,h,t]}class ct extends V{constructor(e){super(),P(this,e,st,rt,S,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function be(o){let e,l;return{c(){e=U("desc"),l=G(o[7])},l(t){e=R(t,"desc",{});var i=p(e);l=J(i,o[7]),i.forEach(m)},m(t,i){D(t,e,i),b(e,l)},p(t,i){i&128&&Z(l,t[7])},d(t){t&&m(e)}}}function ve(o){let e,l;return{c(){e=U("title"),l=G(o[6])},l(t){e=R(t,"title",{});var i=p(e);l=J(i,o[6]),i.forEach(m)},m(t,i){D(t,e,i),b(e,l)},p(t,i){i&64&&Z(l,t[6])},d(t){t&&m(e)}}}function ft(o){let e,l,t,i=o[7]&&be(o),a=o[6]&&ve(o);return{c(){e=U("svg"),i&&i.c(),l=q(),a&&a.c(),t=U("path"),this.h()},l(r){e=R(r,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var n=p(e);i&&i.l(n),l=q(),a&&a.l(n),t=R(n,"path",{d:!0,fill:!0}),p(t).forEach(m),n.forEach(m),this.h()},h(){_(t,"d","M12,1C7.59,1 4,4.59 4,9C4,14.57 10.96,22.34 11.26,22.67L12,23.5L12.74,22.67C13.04,22.34 20,14.57 20,9C20,4.59 16.41,1 12,1M12,20.47C9.82,17.86 6,12.54 6,9A6,6 0 0,1 12,3A6,6 0 0,1 18,9C18,12.83 13.75,18.36 12,20.47M11.13,14H12.88V15.75H11.13M12,5A3.5,3.5 0 0,0 8.5,8.5H10.25A1.75,1.75 0 0,1 12,6.75A1.75,1.75 0 0,1 13.75,8.5C13.75,10.26 11.13,10.04 11.13,12.88H12.88C12.88,10.91 15.5,10.69 15.5,8.5A3.5,3.5 0 0,0 12,5Z"),_(t,"fill",o[2]),_(e,"viewBox",o[3]),_(e,"width",o[0]),_(e,"height",o[1]),_(e,"class",o[8]),_(e,"aria-label",o[4]),_(e,"aria-hidden",o[5])},m(r,n){D(r,e,n),i&&i.m(e,null),b(e,l),a&&a.m(e,null),b(e,t)},p(r,[n]){r[7]?i?i.p(r,n):(i=be(r),i.c(),i.m(e,l)):i&&(i.d(1),i=null),r[6]?a?a.p(r,n):(a=ve(r),a.c(),a.m(e,t)):a&&(a.d(1),a=null),n&4&&_(t,"fill",r[2]),n&8&&_(e,"viewBox",r[3]),n&1&&_(e,"width",r[0]),n&2&&_(e,"height",r[1]),n&256&&_(e,"class",r[8]),n&16&&_(e,"aria-label",r[4]),n&32&&_(e,"aria-hidden",r[5])},i:j,o:j,d(r){r&&m(e),i&&i.d(),a&&a.d()}}}function ut(o,e,l){let{size:t="1em"}=e,{width:i=t}=e,{height:a=t}=e,{color:r="currentColor"}=e,{viewBox:n="0 0 24 24"}=e,{ariaLabel:s=void 0}=e,{ariaHidden:f=void 0}=e,{title:u=void 0}=e,{desc:d=void 0}=e,{class:h=void 0}=e;return o.$$set=c=>{"size"in c&&l(9,t=c.size),"width"in c&&l(0,i=c.width),"height"in c&&l(1,a=c.height),"color"in c&&l(2,r=c.color),"viewBox"in c&&l(3,n=c.viewBox),"ariaLabel"in c&&l(4,s=c.ariaLabel),"ariaHidden"in c&&l(5,f=c.ariaHidden),"title"in c&&l(6,u=c.title),"desc"in c&&l(7,d=c.desc),"class"in c&&l(8,h=c.class)},[i,a,r,n,s,f,u,d,h,t]}class dt extends V{constructor(e){super(),P(this,e,ut,ft,S,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function pe(o,e,l){const t=o.slice();return t[3]=e[l],t}function we(o,e){let l,t=e[3].id.charAt(0).toUpperCase()+e[3].id.slice(1)+"",i,a,r,n,s,f,u,d;function h(){return e[2](e[3])}return{key:o,first:null,c(){l=k("button"),i=G(t),a=H(),r=k("div"),s=H(),this.h()},l(c){l=C(c,"BUTTON",{class:!0});var v=p(l);i=J(v,t),a=z(v),r=C(v,"DIV",{class:!0,style:!0}),p(r).forEach(m),s=z(v),v.forEach(m),this.h()},h(){_(r,"class","w-[65px] h-full"),_(r,"style",n=`background-color: ${e[3].color}70;
					border: 1px solid ${e[3].color}90;`),_(l,"class",f=`tab ${e[3].id===e[1].id&&"text-[#202124] bg-lightgray"} w-full justify-between pl-2 pr-0 hover:text-[#2576E8]`),this.first=l},m(c,v){D(c,l,v),b(l,i),b(l,a),b(l,r),b(l,s),u||(d=te(l,"click",h),u=!0)},p(c,v){e=c,v&1&&t!==(t=e[3].id.charAt(0).toUpperCase()+e[3].id.slice(1)+"")&&Z(i,t),v&1&&n!==(n=`background-color: ${e[3].color}70;
					border: 1px solid ${e[3].color}90;`)&&_(r,"style",n),v&3&&f!==(f=`tab ${e[3].id===e[1].id&&"text-[#202124] bg-lightgray"} w-full justify-between pl-2 pr-0 hover:text-[#2576E8]`)&&_(l,"class",f)},d(c){c&&m(l),u=!1,d()}}}function ht(o){let e,l,t=[],i=new Map,a=o[0].data;const r=n=>n[3].id;for(let n=0;n<a.length;n+=1){let s=pe(o,a,n),f=r(s);i.set(f,t[n]=we(f,s))}return{c(){e=k("section"),l=k("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=C(n,"SECTION",{class:!0});var s=p(e);l=C(s,"DIV",{class:!0});var f=p(l);for(let u=0;u<t.length;u+=1)t[u].l(f);f.forEach(m),s.forEach(m),this.h()},h(){_(l,"class","flex flex-col flex-1 gap-3 w-full"),_(e,"class","flex flex-1 flex-col items-start w-full gap-9 mt-5")},m(n,s){D(n,e,s),b(e,l);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(l,null)},p(n,[s]){s&3&&(a=n[0].data,t=He(t,s,r,1,n,a,i,l,Re,we,null,pe))},i:j,o:j,d(n){n&&m(e);for(let s=0;s<t.length;s+=1)t[s].d()}}}function _t(o,e,l){let t,i;return M(o,ue,r=>l(0,t=r)),M(o,x,r=>l(1,i=r)),[t,i,r=>{ee(x,i=r,i)}]}class mt extends V{constructor(e){super(),P(this,e,_t,ht,S,{})}}function ye(o){let e,l;return{c(){e=U("desc"),l=G(o[7])},l(t){e=R(t,"desc",{});var i=p(e);l=J(i,o[7]),i.forEach(m)},m(t,i){D(t,e,i),b(e,l)},p(t,i){i&128&&Z(l,t[7])},d(t){t&&m(e)}}}function Ee(o){let e,l;return{c(){e=U("title"),l=G(o[6])},l(t){e=R(t,"title",{});var i=p(e);l=J(i,o[6]),i.forEach(m)},m(t,i){D(t,e,i),b(e,l)},p(t,i){i&64&&Z(l,t[6])},d(t){t&&m(e)}}}function gt(o){let e,l,t,i=o[7]&&ye(o),a=o[6]&&Ee(o);return{c(){e=U("svg"),i&&i.c(),l=q(),a&&a.c(),t=U("path"),this.h()},l(r){e=R(r,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var n=p(e);i&&i.l(n),l=q(),a&&a.l(n),t=R(n,"path",{d:!0,fill:!0}),p(t).forEach(m),n.forEach(m),this.h()},h(){_(t,"d","M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"),_(t,"fill",o[2]),_(e,"viewBox",o[3]),_(e,"width",o[0]),_(e,"height",o[1]),_(e,"class",o[8]),_(e,"aria-label",o[4]),_(e,"aria-hidden",o[5])},m(r,n){D(r,e,n),i&&i.m(e,null),b(e,l),a&&a.m(e,null),b(e,t)},p(r,[n]){r[7]?i?i.p(r,n):(i=ye(r),i.c(),i.m(e,l)):i&&(i.d(1),i=null),r[6]?a?a.p(r,n):(a=Ee(r),a.c(),a.m(e,t)):a&&(a.d(1),a=null),n&4&&_(t,"fill",r[2]),n&8&&_(e,"viewBox",r[3]),n&1&&_(e,"width",r[0]),n&2&&_(e,"height",r[1]),n&256&&_(e,"class",r[8]),n&16&&_(e,"aria-label",r[4]),n&32&&_(e,"aria-hidden",r[5])},i:j,o:j,d(r){r&&m(e),i&&i.d(),a&&a.d()}}}function bt(o,e,l){let{size:t="1em"}=e,{width:i=t}=e,{height:a=t}=e,{color:r="currentColor"}=e,{viewBox:n="0 0 24 24"}=e,{ariaLabel:s=void 0}=e,{ariaHidden:f=void 0}=e,{title:u=void 0}=e,{desc:d=void 0}=e,{class:h=void 0}=e;return o.$$set=c=>{"size"in c&&l(9,t=c.size),"width"in c&&l(0,i=c.width),"height"in c&&l(1,a=c.height),"color"in c&&l(2,r=c.color),"viewBox"in c&&l(3,n=c.viewBox),"ariaLabel"in c&&l(4,s=c.ariaLabel),"ariaHidden"in c&&l(5,f=c.ariaHidden),"title"in c&&l(6,u=c.title),"desc"in c&&l(7,d=c.desc),"class"in c&&l(8,h=c.class)},[i,a,r,n,s,f,u,d,h,t]}class vt extends V{constructor(e){super(),P(this,e,bt,gt,S,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function ke(o,e,l){const t=o.slice();return t[4]=e[l],t}function Le(o){let e,l,t,i,a;l=new vt({props:{color:"#202124"}});function r(){return o[2](o[4])}return{c(){e=k("button"),O(l.$$.fragment),this.h()},l(n){e=C(n,"BUTTON",{class:!0});var s=p(e);W(l.$$.fragment,s),s.forEach(m),this.h()},h(){_(e,"class","text-2xl hover:text-3xl mr-2")},m(n,s){D(n,e,s),N(l,e,null),t=!0,i||(a=te(e,"click",We(r)),i=!0)},p(n,s){o=n},i(n){t||(E(l.$$.fragment,n),t=!0)},o(n){T(l.$$.fragment,n),t=!1},d(n){n&&m(e),F(l),i=!1,a()}}}function Ce(o,e){let l,t=e[4].id.charAt(0).toUpperCase()+e[4].id.slice(1)+"",i,a,r,n=e[0].includes(e[4].id),s,f,u,d,h,c,v,A,g=n&&Le(e);function B(){return e[3](e[4])}return{key:o,first:null,c(){l=k("button"),i=G(t),a=H(),r=k("div"),g&&g.c(),s=H(),f=k("div"),d=H(),this.h()},l(w){l=C(w,"BUTTON",{class:!0});var y=p(l);i=J(y,t),a=z(y),r=C(y,"DIV",{class:!0});var I=p(r);g&&g.l(I),s=z(I),f=C(I,"DIV",{class:!0,style:!0}),p(f).forEach(m),I.forEach(m),d=z(y),y.forEach(m),this.h()},h(){_(f,"class","w-[65px] h-full"),_(f,"style",u=`background-color: ${e[4].color}70;
                        border: 1px solid ${e[4].color}90;`),_(r,"class","flex h-full"),_(l,"class",h=`tab ${e[0].includes(e[4].id)&&"text-[#202124] bg-lightgray"} w-full justify-between pl-2 pr-0 hover:text-[#2576E8]`),this.first=l},m(w,y){D(w,l,y),b(l,i),b(l,a),b(l,r),g&&g.m(r,null),b(r,s),b(r,f),b(l,d),c=!0,v||(A=te(l,"click",B),v=!0)},p(w,y){e=w,(!c||y&2)&&t!==(t=e[4].id.charAt(0).toUpperCase()+e[4].id.slice(1)+"")&&Z(i,t),y&3&&(n=e[0].includes(e[4].id)),n?g?(g.p(e,y),y&3&&E(g,1)):(g=Le(e),g.c(),E(g,1),g.m(r,s)):g&&(K(),T(g,1,1,()=>{g=null}),X()),(!c||y&2&&u!==(u=`background-color: ${e[4].color}70;
                        border: 1px solid ${e[4].color}90;`))&&_(f,"style",u),(!c||y&3&&h!==(h=`tab ${e[0].includes(e[4].id)&&"text-[#202124] bg-lightgray"} w-full justify-between pl-2 pr-0 hover:text-[#2576E8]`))&&_(l,"class",h)},i(w){c||(E(g),c=!0)},o(w){T(g),c=!1},d(w){w&&m(l),g&&g.d(),v=!1,A()}}}function pt(o){let e,l,t=[],i=new Map,a,r=o[1].data;const n=s=>s[4].id;for(let s=0;s<r.length;s+=1){let f=ke(o,r,s),u=n(f);i.set(u,t[s]=Ce(u,f))}return{c(){e=k("section"),l=k("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=C(s,"SECTION",{class:!0});var f=p(e);l=C(f,"DIV",{class:!0});var u=p(l);for(let d=0;d<t.length;d+=1)t[d].l(u);u.forEach(m),f.forEach(m),this.h()},h(){_(l,"class","flex flex-col flex-1 gap-3 w-full"),_(e,"class","flex flex-1 flex-col items-start w-full gap-9 mt-5")},m(s,f){D(s,e,f),b(e,l);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(l,null);a=!0},p(s,[f]){f&3&&(r=s[1].data,K(),t=He(t,f,n,1,s,r,i,l,je,Ce,null,ke),X())},i(s){if(!a){for(let f=0;f<r.length;f+=1)E(t[f]);a=!0}},o(s){for(let f=0;f<t.length;f+=1)T(t[f]);a=!1},d(s){s&&m(e);for(let f=0;f<t.length;f+=1)t[f].d()}}}function wt(o,e,l){let t,i;M(o,fe,n=>l(0,t=n)),M(o,ue,n=>l(1,i=n));const a=n=>{ee(fe,t=t.filter(s=>s!==n.id),t)},r=n=>{t.includes(n.id)||ee(fe,t=[...t,n.id],t)};return o.$$.update=()=>{o.$$.dirty&1&&console.log(t)},[t,i,a,r]}class yt extends V{constructor(e){super(),P(this,e,wt,pt,S,{})}}const Me=[{name:"Segmentation",icon:ct,component:mt},{name:"Classification",icon:dt,component:yt}],Et=Me[0],re=Q({availableTools:Me,currentTool:Et}),Ve=Q(!1),Pe=Q([]);let ne;Ve.subscribe(o=>{});Pe.subscribe(o=>{ne=o});function kt(){const{subscribe:o,set:e,update:l}=Q(null);let t,i,a,r=[];function n(u){if(a&&t.getLayers().length>=a)alert(`You can only draw ${a} items at a time`);else{const d=Be(x),{layer:h}=u,c=u.layerType;h.options.color=d.color,t.addLayer(h),l(()=>t);const v=h.feature=h.feature||{},A=v.properties=v.properties||{};if(c==="rectangle"){const g=h.getBounds();A.bbox=[[g._southWest.lat,g._northEast.lng],[g._northEast.lat,g._southWest.lng]]}A.label=d.id,A.id=h._leaflet_id,Pe.set([...ne,h.toGeoJSON()]),console.log(ne)}}function s(u){const{layers:d}=u;d.eachLayer(h=>{if(h instanceof L.Rectangle){const c=h.getBounds();h.feature.properties.bbox=[[c._southWest.lat,c._northEast.lng],[c._northEast.lat,c._southWest.lng]]}r.includes(h._leaflet_id)&&editedIds.push(h._leaflet_id),h.feature.properties.updatedAt=new Date}),console.log(ne)}function f(u){const{layers:d}=u;d.eachLayer(h=>{r.includes(h._leaflet_id)&&deletedItems.addLayer(h),t.removeLayer(h)}),l(()=>t)}return{subscribe:o,init:(u,d,h,c)=>{t=new L.FeatureGroup,u.addLayer(t),i=new L.Control.Draw({position:d,edit:{featureGroup:t},draw:h}),u.addControl(i),u.on(L.Draw.Event.CREATED,n),u.on(L.Draw.Event.EDITED,s),u.on(L.Draw.Event.DELETED,f),a=c,e(t)},geojson:()=>t.toGeoJSON(),remove:u=>{u==null||u.removeLayer(t),u==null||u.removeControl(i),t=null,i=null,l(()=>e(null))}}}const ie=kt();function Lt(o,e,l){let t;M(o,$,s=>l(4,t=s));let{position:i="topright"}=e,{tools:a={}}=e,{limit:r=null}=e,n;return se(async()=>{l(3,n=await ae(()=>import("./leaflet.draw.45fd9d9b.js"),[],import.meta.url)),window.type=!0}),ce(()=>{ie==null||ie.remove(t)}),o.$$set=s=>{"position"in s&&l(0,i=s.position),"tools"in s&&l(1,a=s.tools),"limit"in s&&l(2,r=s.limit)},o.$$.update=()=>{o.$$.dirty&31&&t&&n&&ie.init(t,i,a,r)},[i,a,r,n,t]}class Ct extends V{constructor(e){super(),P(this,e,Lt,null,S,{position:0,tools:1,limit:2})}}const Tt=ze("invalidate_all"),Dt=ze("apply_action");function At(o){const e=JSON.parse(o);return e.data&&(e.data=xe(e.data)),e}function Bt(o){return HTMLElement.prototype.cloneNode.call(o)}function Ht(o,e=()=>{}){const l=async({action:i,result:a,reset:r})=>{a.type==="success"&&(r!==!1&&HTMLFormElement.prototype.reset.call(o),await Tt()),(location.origin+location.pathname===i.origin+i.pathname||a.type==="redirect"||a.type==="error")&&Dt(a)};async function t(i){var c,v,A;i.preventDefault();const a=new URL((c=i.submitter)!=null&&c.hasAttribute("formaction")?i.submitter.formAction:Bt(o).action),r=new FormData(o),n=(v=i.submitter)==null?void 0:v.getAttribute("name");n&&r.append(n,((A=i.submitter)==null?void 0:A.getAttribute("value"))??"");const s=new AbortController;let f=!1;const d=await e({action:a,cancel:()=>f=!0,controller:s,get data(){return r},formData:r,get form(){return o},formElement:o,submitter:i.submitter})??l;if(f)return;let h;try{const g=await fetch(a,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:r,signal:s.signal});h=At(await g.text()),h.type==="error"&&(h.status=g.status)}catch(g){if((g==null?void 0:g.name)==="AbortError")return;h={type:"error",error:g}}d({action:a,get data(){return r},formData:r,get form(){return o},formElement:o,update:g=>l({action:a,result:h,reset:g==null?void 0:g.reset}),result:h})}return HTMLFormElement.prototype.addEventListener.call(o,"submit",t),{destroy(){HTMLFormElement.prototype.removeEventListener.call(o,"submit",t)}}}function zt(o){let e,l,t,i,a,r,n,s,f,u,d;return{c(){e=k("form"),l=k("label"),t=k("input"),i=H(),a=k("input"),r=H(),n=k("button"),s=G("+"),this.h()},l(h){e=C(h,"FORM",{method:!0});var c=p(e);l=C(c,"LABEL",{type:!0,name:!0,class:!0});var v=p(l);t=C(v,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),i=z(v),a=C(v,"INPUT",{id:!0,type:!0,name:!0,class:!0}),r=z(v),n=C(v,"BUTTON",{class:!0});var A=p(n);s=J(A,"+"),A.forEach(m),v.forEach(m),c.forEach(m),this.h()},h(){_(t,"type","text"),_(t,"name","newLabel"),_(t,"placeholder","New label"),_(t,"class","input input-bordered w-full rounded-l-md"),_(a,"id","nativeColorPicker1"),_(a,"type","color"),_(a,"name","newColor"),a.value="#ff8000",_(a,"class","h-auto"),_(n,"class","btn btn-secondary rounded-r-md text-white font-bold text-2xl px-2"),_(l,"type","text"),_(l,"name","newLabel"),_(l,"class","flex"),_(e,"method","POST")},m(h,c){D(h,e,c),b(e,l),b(l,t),he(t,o[0]),b(l,i),b(l,a),b(l,r),b(l,n),b(n,s),u||(d=[te(t,"input",o[2]),Ge(f=Ht.call(null,e,o[3]))],u=!0)},p(h,[c]){c&1&&t.value!==h[0]&&he(t,h[0]),f&&Je(f.update)&&c&3&&f.update.call(null,h[3])},i:j,o:j,d(h){h&&m(e),u=!1,Ze(d)}}}function Mt(o,e,l){let t;M(o,x,n=>l(1,t=n));let i="";function a(){i=this.value,l(0,i)}return[i,t,a,()=>async({form:n})=>{const s=new FormData(n),f=s.get("newLabel"),u=s.get("newColor"),d=f.charAt(0).toUpperCase()+f.slice(1);ue.add(d,u),ee(x,t={id:d,color:u},t),l(0,i="")}]}class Vt extends V{constructor(e){super(),P(this,e,Mt,zt,S,{})}}function Pt(o){const e=o-1;return e*e*e+1}function Te(o,{delay:e=0,duration:l=400,easing:t=Pt,axis:i="y"}={}){const a=getComputedStyle(o),r=+a.opacity,n=i==="y"?"height":"width",s=parseFloat(a[n]),f=i==="y"?["top","bottom"]:["left","right"],u=f.map(B=>`${B[0].toUpperCase()}${B.slice(1)}`),d=parseFloat(a[`padding${u[0]}`]),h=parseFloat(a[`padding${u[1]}`]),c=parseFloat(a[`margin${u[0]}`]),v=parseFloat(a[`margin${u[1]}`]),A=parseFloat(a[`border${u[0]}Width`]),g=parseFloat(a[`border${u[1]}Width`]);return{delay:e,duration:l,easing:t,css:B=>`overflow: hidden;opacity: ${Math.min(B*20,1)*r};${n}: ${B*s}px;padding-${f[0]}: ${B*d}px;padding-${f[1]}: ${B*h}px;margin-${f[0]}: ${B*c}px;margin-${f[1]}: ${B*v}px;border-${f[0]}-width: ${B*A}px;border-${f[1]}-width: ${B*g}px;`}}function St(o){let e,l,t=o[0].name+"",i,a,r,n;return{c(){e=k("header"),l=k("h2"),i=G(t),this.h()},l(s){e=C(s,"HEADER",{class:!0});var f=p(e);l=C(f,"H2",{});var u=p(l);i=J(u,t),u.forEach(m),f.forEach(m),this.h()},h(){_(e,"class","w-full bg-info py-2 px-3 text-white text-lg flex gap-5 items-center flex-row rounded-t-md justify-center border-b")},m(s,f){D(s,e,f),b(e,l),b(l,i),n=!0},p(s,[f]){(!n||f&1)&&t!==(t=s[0].name+"")&&Z(i,t)},i(s){n||(qe(()=>{n&&(r&&r.end(1),a=Qe(l,Te,{delay:300}),a.start())}),n=!0)},o(s){a&&a.invalidate(),r=Ye(l,Te,{duration:200}),n=!1},d(s){s&&m(e),s&&r&&r.end()}}}function It(o,e,l){let t,i;return M(o,re,a=>l(1,i=a)),o.$$.update=()=>{o.$$.dirty&2&&l(0,{currentTool:t}=i,t)},[t,i]}class Ot extends V{constructor(e){super(),P(this,e,It,St,S,{})}}function De(o,e,l){const t=o.slice();return t[4]=e[l],t}function Ae(o){let e,l,t,i,a,r,n;var s=o[4].icon;function f(d){return{props:{size:Ft}}}s&&(l=oe(s,f()));function u(){return o[3](o[4])}return{c(){e=k("button"),l&&O(l.$$.fragment),t=H(),this.h()},l(d){e=C(d,"BUTTON",{class:!0});var h=p(e);l&&W(l.$$.fragment,h),t=z(h),h.forEach(m),this.h()},h(){_(e,"class",i=`btn btn-primary px-2 rounded-none 
			${o[4].name===o[1].name&&"btn-active"}
			`)},m(d,h){D(d,e,h),l&&N(l,e,null),b(e,t),a=!0,r||(n=te(e,"click",u),r=!0)},p(d,h){if(o=d,h&4&&s!==(s=o[4].icon)){if(l){K();const c=l;T(c.$$.fragment,1,0,()=>{F(c,1)}),X()}s?(l=oe(s,f()),O(l.$$.fragment),E(l.$$.fragment,1),N(l,e,t)):l=null}(!a||h&6&&i!==(i=`btn btn-primary px-2 rounded-none 
			${o[4].name===o[1].name&&"btn-active"}
			`))&&_(e,"class",i)},i(d){a||(l&&E(l.$$.fragment,d),a=!0)},o(d){l&&T(l.$$.fragment,d),a=!1},d(d){d&&m(e),l&&F(l),r=!1,n()}}}function Nt(o){let e,l,t=o[2],i=[];for(let r=0;r<t.length;r+=1)i[r]=Ae(De(o,t,r));const a=r=>T(i[r],1,1,()=>{i[r]=null});return{c(){e=k("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=C(r,"DIV",{class:!0});var n=p(e);for(let s=0;s<i.length;s+=1)i[s].l(n);n.forEach(m),this.h()},h(){_(e,"class","col-span-1 bg-slate-100 flex flex-col items-centergap-3")},m(r,n){D(r,e,n);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(e,null);l=!0},p(r,[n]){if(n&7){t=r[2];let s;for(s=0;s<t.length;s+=1){const f=De(r,t,s);i[s]?(i[s].p(f,n),E(i[s],1)):(i[s]=Ae(f),i[s].c(),E(i[s],1),i[s].m(e,null))}for(K(),s=t.length;s<i.length;s+=1)a(s);X()}},i(r){if(!l){for(let n=0;n<t.length;n+=1)E(i[n]);l=!0}},o(r){i=i.filter(Boolean);for(let n=0;n<i.length;n+=1)T(i[n]);l=!1},d(r){r&&m(e),Ke(i,r)}}}const Ft=22;function Ut(o,e,l){let t,i,a;M(o,re,n=>l(0,a=n));const r=n=>ee(re,a.currentTool=n,a);return o.$$.update=()=>{o.$$.dirty&1&&l(2,{availableTools:t,currentTool:i}=a,t,(l(1,i),l(0,a)))},[a,i,t,r]}class Rt extends V{constructor(e){super(),P(this,e,Ut,Nt,S,{})}}function jt(o,e,l){let t;M(o,$,r=>l(1,t=r));let i,a;return se(async()=>{l(0,i=await ae(()=>import("./PaintPolygon.47895a92.js"),["./PaintPolygon.47895a92.js","./_commonjsHelpers.725317a4.js","../assets/PaintPolygon.08b3549b.css"],import.meta.url))}),ce(()=>{a==null||a.remove(t)}),o.$$.update=()=>{o.$$.dirty&3&&t&&i&&(a=L.control.paintPolygon().addTo(t))},[i,t]}class Wt extends V{constructor(e){super(),P(this,e,jt,null,S,{})}}function Gt(o){let e,l;return e=new Ct({props:{tools:o[2],position:Qt}}),{c(){O(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,i){N(e,t,i),l=!0},p:j,i(t){l||(E(e.$$.fragment,t),l=!0)},o(t){T(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function Jt(o){let e,l;return e=new Wt({}),{c(){O(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,i){N(e,t,i),l=!0},p:j,i(t){l||(E(e.$$.fragment,t),l=!0)},o(t){T(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function Zt(o){let e,l,t,i,a,r;e=new ot({props:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{maxZoom:20,zIndex:1}}});const n=[Jt,Gt],s=[];function f(u,d){return u[1]?0:1}return t=f(o),i=s[t]=n[t](o),{c(){O(e.$$.fragment),l=H(),i.c(),a=q()},l(u){W(e.$$.fragment,u),l=z(u),i.l(u),a=q()},m(u,d){N(e,u,d),D(u,l,d),s[t].m(u,d),D(u,a,d),r=!0},p(u,d){let h=t;t=f(u),t===h?s[t].p(u,d):(K(),T(s[h],1,1,()=>{s[h]=null}),X(),i=s[t],i?i.p(u,d):(i=s[t]=n[t](u),i.c()),E(i,1),i.m(a.parentNode,a))},i(u){r||(E(e.$$.fragment,u),E(i),r=!0)},o(u){T(e.$$.fragment,u),T(i),r=!1},d(u){F(e,u),u&&m(l),s[t].d(u),u&&m(a)}}}function qt(o){let e,l,t,i,a,r,n,s,f,u,d,h,c,v,A;t=new Ot({}),r=new Rt({}),f=new Vt({});var g=o[0].component;function B(w){return{}}return g&&(d=oe(g,B())),v=new it({props:{$$slots:{default:[Zt]},$$scope:{ctx:o}}}),{c(){e=k("main"),l=k("section"),O(t.$$.fragment),i=H(),a=k("div"),O(r.$$.fragment),n=H(),s=k("div"),O(f.$$.fragment),u=H(),d&&O(d.$$.fragment),h=H(),c=k("section"),O(v.$$.fragment),this.h()},l(w){e=C(w,"MAIN",{class:!0});var y=p(e);l=C(y,"SECTION",{class:!0,style:!0});var I=p(l);W(t.$$.fragment,I),i=z(I),a=C(I,"DIV",{class:!0});var Y=p(a);W(r.$$.fragment,Y),n=z(Y),s=C(Y,"DIV",{class:!0});var le=p(s);W(f.$$.fragment,le),u=z(le),d&&W(d.$$.fragment,le),le.forEach(m),Y.forEach(m),I.forEach(m),h=z(y),c=C(y,"SECTION",{class:!0});var de=p(c);W(v.$$.fragment,de),de.forEach(m),y.forEach(m),this.h()},h(){_(s,"class","col-span-7 p-5 h-full flex flex-col justify-between w-[280px]"),_(a,"class","grid grid-cols-8 h-full"),_(l,"class","fixed z-20 bg-[#fafdfe] flex flex-col m-6 rounded-md h-full"),Xe(l,"height","-webkit-fill-available"),_(c,"class","w-full h-full"),_(e,"class","min-w-full relative min-h-full")},m(w,y){D(w,e,y),b(e,l),N(t,l,null),b(l,i),b(l,a),N(r,a,null),b(a,n),b(a,s),N(f,s,null),b(s,u),d&&N(d,s,null),b(e,h),b(e,c),N(v,c,null),A=!0},p(w,[y]){if(y&1&&g!==(g=w[0].component)){if(d){K();const Y=d;T(Y.$$.fragment,1,0,()=>{F(Y,1)}),X()}g?(d=oe(g,B()),O(d.$$.fragment),E(d.$$.fragment,1),N(d,s,null)):d=null}const I={};y&66&&(I.$$scope={dirty:y,ctx:w}),v.$set(I)},i(w){A||(E(t.$$.fragment,w),E(r.$$.fragment,w),E(f.$$.fragment,w),d&&E(d.$$.fragment,w),E(v.$$.fragment,w),A=!0)},o(w){T(t.$$.fragment,w),T(r.$$.fragment,w),T(f.$$.fragment,w),d&&T(d.$$.fragment,w),T(v.$$.fragment,w),A=!1},d(w){w&&m(e),F(t),F(r),F(f),d&&F(d),F(v)}}}const Qt="topright";function Yt(o,e,l){let t,i,a,r;M(o,re,f=>l(3,i=f)),M(o,$e,f=>l(4,a=f)),M(o,Ve,f=>l(1,r=f));const n=async()=>{const f=a.url.origin;try{const d=await(await fetch(f+"/test")).text();console.log(d)}catch(u){console.log(u)}},s={polyline:!1,circlemarker:!1,circle:!1,marker:!1,rectangle:{shapeOptions:{weight:1}},polygon:{repeatMode:!1,showArea:!0,showLength:!0,shapeOptions:{weight:1}}};return o.$$.update=()=>{o.$$.dirty&16&&a.url.origin&&n(),o.$$.dirty&8&&l(0,{currentTool:t}=i,t)},[t,r,s,i,a]}class ll extends V{constructor(e){super(),P(this,e,Yt,qt,S,{})}}export{ll as P,x as c,Pe as d,Ve as i,ue as l};
